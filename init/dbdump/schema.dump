-- MySQL dump 10.11
--
-- Host: dbopensvc    Database: opensvc
-- ------------------------------------------------------
-- Server version	5.5.23-MariaDB

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8 */;
/*!40103 SET @OLD_TIME_ZONE=@@TIME_ZONE */;
/*!40103 SET TIME_ZONE='+00:00' */;
/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;

--
-- Table structure for table `SVCactions`
--

DROP TABLE IF EXISTS `SVCactions`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `SVCactions` (
  `svcname` varchar(60) DEFAULT NULL,
  `action` varchar(30) CHARACTER SET latin1 DEFAULT NULL,
  `status` enum('err','ok','warn') NOT NULL,
  `begin` datetime NOT NULL DEFAULT '0000-00-00 00:00:00',
  `end` datetime DEFAULT NULL,
  `hostname` varchar(50) NOT NULL DEFAULT '',
  `hostid` varchar(30) DEFAULT NULL,
  `status_log` text CHARACTER SET latin1,
  `pid` varchar(32) DEFAULT NULL,
  `ID` int(11) NOT NULL AUTO_INCREMENT,
  `ack` tinyint(4) DEFAULT NULL,
  `alert` tinyint(1) DEFAULT NULL,
  `acked_by` varchar(50) CHARACTER SET latin1 DEFAULT NULL,
  `acked_comment` text CHARACTER SET latin1,
  `acked_date` datetime NOT NULL,
  `version` varchar(20) CHARACTER SET latin1 DEFAULT NULL,
  `cron` tinyint(1) DEFAULT '0',
  `time` datetime DEFAULT '0000-00-00 00:00:00',
  PRIMARY KEY (`ID`,`begin`),
  KEY `hostname` (`hostname`),
  KEY `svcname` (`svcname`),
  KEY `hostid` (`hostid`),
  KEY `action` (`action`),
  KEY `end` (`end`),
  KEY `status` (`status`)
) ENGINE=InnoDB AUTO_INCREMENT=8358467 DEFAULT CHARSET=utf8
/*!50100 PARTITION BY RANGE (TO_DAYS(begin))
(PARTITION pNULL VALUES LESS THAN (0) ENGINE = InnoDB,
 PARTITION p201010 VALUES LESS THAN (734411) ENGINE = InnoDB,
 PARTITION p201011 VALUES LESS THAN (734442) ENGINE = InnoDB,
 PARTITION p201012 VALUES LESS THAN (734472) ENGINE = InnoDB,
 PARTITION p201101 VALUES LESS THAN (734503) ENGINE = InnoDB,
 PARTITION p201102 VALUES LESS THAN (734534) ENGINE = InnoDB,
 PARTITION p201103 VALUES LESS THAN (734562) ENGINE = InnoDB,
 PARTITION p201104 VALUES LESS THAN (734593) ENGINE = InnoDB,
 PARTITION p201105 VALUES LESS THAN (734623) ENGINE = InnoDB,
 PARTITION p201106 VALUES LESS THAN (734654) ENGINE = InnoDB,
 PARTITION p201107 VALUES LESS THAN (734684) ENGINE = InnoDB,
 PARTITION p201108 VALUES LESS THAN (734715) ENGINE = InnoDB,
 PARTITION p201109 VALUES LESS THAN (734746) ENGINE = InnoDB,
 PARTITION p201110 VALUES LESS THAN (734776) ENGINE = InnoDB,
 PARTITION p201111 VALUES LESS THAN (734807) ENGINE = InnoDB,
 PARTITION p201112 VALUES LESS THAN (734837) ENGINE = InnoDB,
 PARTITION p201201 VALUES LESS THAN (734868) ENGINE = InnoDB,
 PARTITION p201202 VALUES LESS THAN (734899) ENGINE = InnoDB,
 PARTITION p201203 VALUES LESS THAN (734928) ENGINE = InnoDB,
 PARTITION p201204 VALUES LESS THAN (734959) ENGINE = InnoDB,
 PARTITION p201205 VALUES LESS THAN (734989) ENGINE = InnoDB,
 PARTITION p201206 VALUES LESS THAN (735020) ENGINE = InnoDB,
 PARTITION p201207 VALUES LESS THAN (735050) ENGINE = InnoDB,
 PARTITION p201208 VALUES LESS THAN (735081) ENGINE = InnoDB,
 PARTITION p201209 VALUES LESS THAN (735112) ENGINE = InnoDB,
 PARTITION p201210 VALUES LESS THAN (735142) ENGINE = InnoDB,
 PARTITION p201211 VALUES LESS THAN (735173) ENGINE = InnoDB,
 PARTITION p201212 VALUES LESS THAN (735203) ENGINE = InnoDB,
 PARTITION p201301 VALUES LESS THAN (735234) ENGINE = InnoDB,
 PARTITION p201302 VALUES LESS THAN (735265) ENGINE = InnoDB,
 PARTITION p201303 VALUES LESS THAN (735293) ENGINE = InnoDB,
 PARTITION p201304 VALUES LESS THAN (735324) ENGINE = InnoDB,
 PARTITION p201305 VALUES LESS THAN (735354) ENGINE = InnoDB,
 PARTITION p201306 VALUES LESS THAN (735385) ENGINE = InnoDB,
 PARTITION p201307 VALUES LESS THAN (735415) ENGINE = InnoDB,
 PARTITION p201308 VALUES LESS THAN (735446) ENGINE = InnoDB,
 PARTITION p201309 VALUES LESS THAN (735477) ENGINE = InnoDB,
 PARTITION p201310 VALUES LESS THAN (735507) ENGINE = InnoDB,
 PARTITION p201311 VALUES LESS THAN (735538) ENGINE = InnoDB,
 PARTITION p201312 VALUES LESS THAN (735568) ENGINE = InnoDB,
 PARTITION pNew VALUES LESS THAN MAXVALUE ENGINE = InnoDB) */;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `action_queue`
--

DROP TABLE IF EXISTS `action_queue`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `action_queue` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `status` varchar(1) DEFAULT 'W',
  `command` text NOT NULL,
  `date_queued` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `date_dequeued` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00',
  `ret` int(11) DEFAULT '0',
  `stdout` text,
  `stderr` text,
  `nodename` varchar(128) DEFAULT NULL,
  `svcname` varchar(128) DEFAULT NULL,
  `action_type` varchar(8) DEFAULT NULL,
  `user_id` int(11) DEFAULT NULL,
  `form_id` int(11) DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `idx1` (`status`)
) ENGINE=InnoDB AUTO_INCREMENT=4043 DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `appinfo`
--

DROP TABLE IF EXISTS `appinfo`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `appinfo` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `app_svcname` varchar(60) DEFAULT NULL,
  `app_launcher` varchar(255) DEFAULT NULL,
  `app_key` varchar(40) DEFAULT NULL,
  `app_value` varchar(255) DEFAULT NULL,
  `app_updated` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `app_nodename` varchar(60) DEFAULT '',
  `cluster_type` varchar(10) DEFAULT '',
  PRIMARY KEY (`id`),
  KEY `appinfo_fk1` (`app_svcname`)
) ENGINE=InnoDB AUTO_INCREMENT=476956 DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `appinfo_log`
--

DROP TABLE IF EXISTS `appinfo_log`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `appinfo_log` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `app_svcname` varchar(60) DEFAULT NULL,
  `app_launcher` varchar(255) DEFAULT NULL,
  `app_key` varchar(40) DEFAULT NULL,
  `app_value` varchar(255) DEFAULT NULL,
  `app_updated` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `app_nodename` varchar(60) DEFAULT '',
  `cluster_type` varchar(10) DEFAULT '',
  PRIMARY KEY (`id`),
  KEY `appinfo_fk1` (`app_svcname`)
) ENGINE=InnoDB AUTO_INCREMENT=60872 DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `apps`
--

DROP TABLE IF EXISTS `apps`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `apps` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `app` varchar(64) DEFAULT NULL,
  `desc` mediumtext NOT NULL,
  `updated` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  UNIQUE KEY `i_app` (`app`)
) ENGINE=InnoDB AUTO_INCREMENT=1799 DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `apps_responsibles`
--

DROP TABLE IF EXISTS `apps_responsibles`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `apps_responsibles` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `group_id` int(11) NOT NULL,
  `app_id` int(11) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `apps_responsibles_fk2` (`group_id`),
  KEY `apps_responsibles_fk1` (`app_id`)
) ENGINE=InnoDB AUTO_INCREMENT=763 DEFAULT CHARSET=latin1;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `auth_event`
--

DROP TABLE IF EXISTS `auth_event`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `auth_event` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `time_stamp` datetime DEFAULT NULL,
  `client_ip` varchar(512) DEFAULT NULL,
  `user_id` int(11) DEFAULT NULL,
  `origin` varchar(512) DEFAULT NULL,
  `description` longtext,
  PRIMARY KEY (`id`),
  KEY `user_id__idx` (`user_id`)
) ENGINE=InnoDB AUTO_INCREMENT=4936 DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `auth_filters`
--

DROP TABLE IF EXISTS `auth_filters`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `auth_filters` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `fil_uid` int(11) NOT NULL,
  `fil_id` int(11) DEFAULT NULL,
  `fil_value` varchar(200) NOT NULL,
  `fil_active` tinyint(1) DEFAULT '1',
  PRIMARY KEY (`id`),
  UNIQUE KEY `index1` (`fil_uid`,`fil_id`)
) ENGINE=InnoDB AUTO_INCREMENT=508 DEFAULT CHARSET=latin1;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `auth_group`
--

DROP TABLE IF EXISTS `auth_group`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `auth_group` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `role` varchar(512) DEFAULT NULL,
  `description` longtext,
  `privilege` varchar(1) DEFAULT 'F',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=161 DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `auth_membership`
--

DROP TABLE IF EXISTS `auth_membership`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `auth_membership` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `user_id` int(11) DEFAULT NULL,
  `group_id` int(11) DEFAULT NULL,
  `primary_group` varchar(1) DEFAULT 'F',
  PRIMARY KEY (`id`),
  UNIQUE KEY `user_id` (`user_id`,`group_id`),
  KEY `user_id__idx` (`user_id`),
  KEY `group_id__idx` (`group_id`)
) ENGINE=InnoDB AUTO_INCREMENT=453 DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `auth_node`
--

DROP TABLE IF EXISTS `auth_node`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `auth_node` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `nodename` varchar(60) NOT NULL,
  `uuid` varchar(36) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `idx1` (`nodename`)
) ENGINE=InnoDB AUTO_INCREMENT=2866 DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `auth_permission`
--

DROP TABLE IF EXISTS `auth_permission`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `auth_permission` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `group_id` int(11) DEFAULT NULL,
  `name` varchar(512) DEFAULT NULL,
  `table_name` varchar(512) DEFAULT NULL,
  `record_id` int(11) DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `group_id__idx` (`group_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `auth_user`
--

DROP TABLE IF EXISTS `auth_user`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `auth_user` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `first_name` varchar(128) DEFAULT NULL,
  `last_name` varchar(128) DEFAULT NULL,
  `email` varchar(512) DEFAULT NULL,
  `password` varchar(512) DEFAULT NULL,
  `registration_key` varchar(512) DEFAULT NULL,
  `reset_password_key` varchar(512) DEFAULT '',
  `email_notifications` varchar(1) DEFAULT 'T',
  `perpage` int(11) DEFAULT '20',
  `im_notifications` varchar(1) DEFAULT 'T',
  `im_type` int(11) DEFAULT NULL,
  `im_username` varchar(100) DEFAULT NULL,
  `email_log_level` enum('debug','info','warning','error','critical') DEFAULT 'warning',
  `im_log_level` enum('debug','info','warning','error','critical') DEFAULT 'warning',
  `lock_filter` varchar(1) DEFAULT 'F',
  `phone_work` varchar(16) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=126 DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `b_action_errors`
--

DROP TABLE IF EXISTS `b_action_errors`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `b_action_errors` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `svcname` varchar(60) NOT NULL,
  `nodename` varchar(60) NOT NULL,
  `err` int(11) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `i_svcname` (`svcname`,`nodename`)
) ENGINE=InnoDB AUTO_INCREMENT=53 DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `b_apps`
--

DROP TABLE IF EXISTS `b_apps`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `b_apps` (
  `id` int(11) NOT NULL DEFAULT '0',
  `app` varchar(64) DEFAULT NULL,
  `roles` varchar(342) DEFAULT NULL,
  `responsibles` varchar(342) DEFAULT NULL,
  `mailto` varchar(342) DEFAULT NULL,
  KEY `i_app` (`app`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `b_apps_old`
--

DROP TABLE IF EXISTS `b_apps_old`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `b_apps_old` (
  `id` int(11) NOT NULL DEFAULT '0',
  `app` varchar(64) DEFAULT NULL,
  `roles` varchar(342) DEFAULT NULL,
  `responsibles` varchar(342) DEFAULT NULL,
  `mailto` varchar(342) DEFAULT NULL,
  KEY `i_app` (`app`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `b_disk_app`
--

DROP TABLE IF EXISTS `b_disk_app`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `b_disk_app` (
  `id` int(11) NOT NULL DEFAULT '0',
  `disk_id` varchar(120) CHARACTER SET latin1 DEFAULT NULL,
  `disk_region` varchar(32) DEFAULT NULL,
  `disk_svcname` varchar(60) DEFAULT NULL,
  `disk_nodename` varchar(60) DEFAULT NULL,
  `disk_vendor` varchar(60) DEFAULT NULL,
  `disk_model` varchar(60) DEFAULT NULL,
  `disk_dg` varchar(60) DEFAULT NULL,
  `svcdisk_updated` timestamp NULL DEFAULT NULL,
  `svcdisk_id` int(11) DEFAULT NULL,
  `disk_local` varchar(1) DEFAULT NULL,
  `app` varchar(64) DEFAULT NULL,
  `disk_used` int(11) DEFAULT NULL,
  `disk_size` int(11) DEFAULT NULL,
  `disk_arrayid` varchar(300) CHARACTER SET latin1 DEFAULT NULL,
  `disk_group` varchar(60) CHARACTER SET latin1 DEFAULT NULL,
  `disk_devid` varchar(60) CHARACTER SET latin1 NOT NULL DEFAULT '',
  `disk_name` varchar(120) CHARACTER SET latin1 DEFAULT NULL,
  `disk_alloc` int(11) DEFAULT NULL,
  `disk_updated` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00',
  `disk_raid` varchar(24) CHARACTER SET latin1 DEFAULT NULL,
  `disk_level` int(11) NOT NULL DEFAULT '0'
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `billing`
--

DROP TABLE IF EXISTS `billing`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `billing` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `bill_min_svc` int(11) NOT NULL,
  `bill_os_name` varchar(50) NOT NULL,
  `bill_cost` float NOT NULL,
  `bill_max_svc` int(11) NOT NULL,
  `bill_env` enum('prd','nonprd') NOT NULL DEFAULT 'prd',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=43 DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `billing_agent`
--

DROP TABLE IF EXISTS `billing_agent`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `billing_agent` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `bill_min_agt` int(11) NOT NULL,
  `bill_os_name` varchar(50) NOT NULL,
  `bill_cost` float NOT NULL,
  `bill_max_agt` int(11) NOT NULL,
  `bill_env` enum('prd','nonprd') NOT NULL DEFAULT 'prd',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=61 DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `charts`
--

DROP TABLE IF EXISTS `charts`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `charts` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `chart_name` varchar(100) NOT NULL,
  `chart_yaml` text,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=39 DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `checks_defaults`
--

DROP TABLE IF EXISTS `checks_defaults`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `checks_defaults` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `chk_type` varchar(10) NOT NULL,
  `chk_low` int(11) NOT NULL,
  `chk_high` int(11) NOT NULL,
  `chk_inst` varchar(128) DEFAULT NULL,
  `chk_prio` int(11) DEFAULT '0',
  PRIMARY KEY (`id`),
  UNIQUE KEY `idx1` (`chk_type`,`chk_inst`)
) ENGINE=InnoDB AUTO_INCREMENT=48 DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `checks_live`
--

DROP TABLE IF EXISTS `checks_live`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `checks_live` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `chk_nodename` varchar(50) NOT NULL,
  `chk_svcname` varchar(50) NOT NULL,
  `chk_type` varchar(10) NOT NULL,
  `chk_updated` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00',
  `chk_value` int(11) NOT NULL,
  `chk_created` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `chk_instance` varchar(100) DEFAULT NULL,
  `chk_low` int(11) DEFAULT NULL,
  `chk_high` int(11) DEFAULT NULL,
  `chk_threshold_provider` varchar(60) DEFAULT NULL,
  `chk_err` tinyint(4) DEFAULT '0',
  PRIMARY KEY (`id`),
  UNIQUE KEY `idx1` (`chk_nodename`,`chk_svcname`,`chk_type`,`chk_instance`)
) ENGINE=InnoDB AUTO_INCREMENT=34885938 DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `checks_settings`
--

DROP TABLE IF EXISTS `checks_settings`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `checks_settings` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `chk_nodename` varchar(50) NOT NULL,
  `chk_svcname` varchar(50) NOT NULL,
  `chk_type` varchar(10) NOT NULL,
  `chk_low` int(11) NOT NULL,
  `chk_high` int(11) NOT NULL,
  `chk_changed` datetime NOT NULL,
  `chk_changed_by` varchar(60) NOT NULL,
  `chk_instance` varchar(100) DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `idx1` (`chk_nodename`,`chk_svcname`,`chk_type`,`chk_instance`)
) ENGINE=InnoDB AUTO_INCREMENT=12400 DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `column_filters`
--

DROP TABLE IF EXISTS `column_filters`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `column_filters` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `user_id` int(11) NOT NULL,
  `col_tableid` varchar(30) DEFAULT '',
  `col_name` varchar(60) DEFAULT '',
  `col_filter` text,
  PRIMARY KEY (`id`),
  UNIQUE KEY `idx1` (`user_id`,`col_tableid`,`col_name`)
) ENGINE=InnoDB AUTO_INCREMENT=36030 DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `comp_log`
--

DROP TABLE IF EXISTS `comp_log`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `comp_log` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `run_nodename` varchar(64) NOT NULL,
  `run_module` varchar(64) NOT NULL,
  `run_status` int(11) NOT NULL DEFAULT '1',
  `run_log` text NOT NULL,
  `run_date` datetime NOT NULL,
  `run_ruleset` varchar(500) DEFAULT '',
  `run_action` varchar(7) DEFAULT '',
  `run_svcname` varchar(64) DEFAULT NULL,
  `rset_md5` varchar(32) DEFAULT NULL,
  PRIMARY KEY (`id`,`run_date`),
  KEY `idx1` (`run_nodename`),
  KEY `idx2` (`run_action`),
  KEY `idx3` (`run_module`)
) ENGINE=InnoDB AUTO_INCREMENT=11260441 DEFAULT CHARSET=utf8
/*!50100 PARTITION BY RANGE (TO_DAYS(run_date))
(PARTITION pNULL VALUES LESS THAN (0) ENGINE = InnoDB,
 PARTITION p201010 VALUES LESS THAN (734411) ENGINE = InnoDB,
 PARTITION p201011 VALUES LESS THAN (734442) ENGINE = InnoDB,
 PARTITION p201012 VALUES LESS THAN (734472) ENGINE = InnoDB,
 PARTITION p201101 VALUES LESS THAN (734503) ENGINE = InnoDB,
 PARTITION p201102 VALUES LESS THAN (734534) ENGINE = InnoDB,
 PARTITION p201103 VALUES LESS THAN (734562) ENGINE = InnoDB,
 PARTITION p201104 VALUES LESS THAN (734593) ENGINE = InnoDB,
 PARTITION p201105 VALUES LESS THAN (734623) ENGINE = InnoDB,
 PARTITION p201106 VALUES LESS THAN (734654) ENGINE = InnoDB,
 PARTITION p201107 VALUES LESS THAN (734684) ENGINE = InnoDB,
 PARTITION p201108 VALUES LESS THAN (734715) ENGINE = InnoDB,
 PARTITION p201109 VALUES LESS THAN (734746) ENGINE = InnoDB,
 PARTITION p201110 VALUES LESS THAN (734776) ENGINE = InnoDB,
 PARTITION p201111 VALUES LESS THAN (734807) ENGINE = InnoDB,
 PARTITION p201112 VALUES LESS THAN (734837) ENGINE = InnoDB,
 PARTITION p201201 VALUES LESS THAN (734868) ENGINE = InnoDB,
 PARTITION p201202 VALUES LESS THAN (734899) ENGINE = InnoDB,
 PARTITION p201203 VALUES LESS THAN (734928) ENGINE = InnoDB,
 PARTITION p201204 VALUES LESS THAN (734959) ENGINE = InnoDB,
 PARTITION p201205 VALUES LESS THAN (734989) ENGINE = InnoDB,
 PARTITION p201206 VALUES LESS THAN (735020) ENGINE = InnoDB,
 PARTITION p201207 VALUES LESS THAN (735050) ENGINE = InnoDB,
 PARTITION p201208 VALUES LESS THAN (735081) ENGINE = InnoDB,
 PARTITION p201209 VALUES LESS THAN (735112) ENGINE = InnoDB,
 PARTITION p201210 VALUES LESS THAN (735142) ENGINE = InnoDB,
 PARTITION p201211 VALUES LESS THAN (735173) ENGINE = InnoDB,
 PARTITION p201212 VALUES LESS THAN (735203) ENGINE = InnoDB,
 PARTITION p201301 VALUES LESS THAN (735234) ENGINE = InnoDB,
 PARTITION p201302 VALUES LESS THAN (735265) ENGINE = InnoDB,
 PARTITION p201303 VALUES LESS THAN (735293) ENGINE = InnoDB,
 PARTITION p201304 VALUES LESS THAN (735324) ENGINE = InnoDB,
 PARTITION p201305 VALUES LESS THAN (735354) ENGINE = InnoDB,
 PARTITION p201306 VALUES LESS THAN (735385) ENGINE = InnoDB,
 PARTITION p201307 VALUES LESS THAN (735415) ENGINE = InnoDB,
 PARTITION p201308 VALUES LESS THAN (735446) ENGINE = InnoDB,
 PARTITION p201309 VALUES LESS THAN (735477) ENGINE = InnoDB,
 PARTITION p201310 VALUES LESS THAN (735507) ENGINE = InnoDB,
 PARTITION p201311 VALUES LESS THAN (735538) ENGINE = InnoDB,
 PARTITION p201312 VALUES LESS THAN (735568) ENGINE = InnoDB,
 PARTITION pNew VALUES LESS THAN MAXVALUE ENGINE = InnoDB) */;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `comp_mod_status`
--

DROP TABLE IF EXISTS `comp_mod_status`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `comp_mod_status` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `total` int(11) DEFAULT NULL,
  `ok` int(11) DEFAULT NULL,
  `nok` int(11) DEFAULT NULL,
  `na` int(11) DEFAULT NULL,
  `obs` int(11) DEFAULT NULL,
  `pct` int(11) DEFAULT NULL,
  `mod_name` varchar(255) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `comp_moduleset`
--

DROP TABLE IF EXISTS `comp_moduleset`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `comp_moduleset` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `modset_name` varchar(60) NOT NULL,
  `modset_author` varchar(100) DEFAULT '',
  `modset_updated` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  UNIQUE KEY `idx1` (`modset_name`)
) ENGINE=InnoDB AUTO_INCREMENT=162 DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `comp_moduleset_modules`
--

DROP TABLE IF EXISTS `comp_moduleset_modules`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `comp_moduleset_modules` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `modset_id` int(11) DEFAULT NULL,
  `modset_mod_name` varchar(60) NOT NULL,
  `modset_mod_author` varchar(100) DEFAULT '',
  `modset_mod_updated` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  UNIQUE KEY `idx1` (`modset_mod_name`,`modset_id`),
  KEY `comp_moduleset_modules_fk1` (`modset_id`)
) ENGINE=InnoDB AUTO_INCREMENT=409 DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `comp_moduleset_team_responsible`
--

DROP TABLE IF EXISTS `comp_moduleset_team_responsible`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `comp_moduleset_team_responsible` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `modset_id` int(11) NOT NULL,
  `group_id` int(11) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `idx1` (`modset_id`),
  KEY `comp_moduleset_team_responsible_fk2` (`group_id`)
) ENGINE=InnoDB AUTO_INCREMENT=400 DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `comp_modulesets_services`
--

DROP TABLE IF EXISTS `comp_modulesets_services`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `comp_modulesets_services` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `modset_svcname` varchar(60) NOT NULL,
  `modset_id` int(11) NOT NULL,
  `modset_mod_author` varchar(100) DEFAULT '',
  `modset_updated` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `slave` varchar(1) DEFAULT 'F',
  PRIMARY KEY (`id`),
  UNIQUE KEY `idx1` (`modset_svcname`,`modset_id`,`slave`),
  KEY `idx2` (`modset_svcname`),
  KEY `comp_modulesets_services_fk1` (`modset_id`)
) ENGINE=InnoDB AUTO_INCREMENT=384 DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `comp_node_moduleset`
--

DROP TABLE IF EXISTS `comp_node_moduleset`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `comp_node_moduleset` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `modset_node` varchar(60) NOT NULL,
  `modset_id` int(11) NOT NULL,
  `modset_mod_author` varchar(100) DEFAULT '',
  `modset_updated` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  UNIQUE KEY `idx1` (`modset_node`,`modset_id`),
  KEY `idx2` (`modset_node`),
  KEY `comp_node_moduleset_fk1` (`modset_id`)
) ENGINE=InnoDB AUTO_INCREMENT=7883 DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `comp_node_status`
--

DROP TABLE IF EXISTS `comp_node_status`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `comp_node_status` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `total` int(11) DEFAULT NULL,
  `ok` int(11) DEFAULT NULL,
  `nok` int(11) DEFAULT NULL,
  `na` int(11) DEFAULT NULL,
  `obs` int(11) DEFAULT NULL,
  `pct` int(11) DEFAULT NULL,
  `node_name` varchar(255) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `comp_ruleset_team_responsible`
--

DROP TABLE IF EXISTS `comp_ruleset_team_responsible`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `comp_ruleset_team_responsible` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `ruleset_id` int(11) NOT NULL,
  `group_id` int(11) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `idx1` (`ruleset_id`),
  KEY `comp_ruleset_team_responsible_fk2` (`group_id`)
) ENGINE=InnoDB AUTO_INCREMENT=1279 DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `comp_rulesets`
--

DROP TABLE IF EXISTS `comp_rulesets`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `comp_rulesets` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `ruleset_name` varchar(100) DEFAULT '',
  `ruleset_type` varchar(10) DEFAULT 'explicit',
  `ruleset_public` varchar(1) DEFAULT 'T',
  PRIMARY KEY (`id`),
  UNIQUE KEY `idx1` (`ruleset_name`)
) ENGINE=InnoDB AUTO_INCREMENT=535 DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `comp_rulesets_filtersets`
--

DROP TABLE IF EXISTS `comp_rulesets_filtersets`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `comp_rulesets_filtersets` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `ruleset_id` int(11) NOT NULL,
  `fset_id` int(11) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `idx1` (`ruleset_id`),
  KEY `comp_rulesets_filtersets_fk2` (`fset_id`)
) ENGINE=InnoDB AUTO_INCREMENT=383 DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `comp_rulesets_nodes`
--

DROP TABLE IF EXISTS `comp_rulesets_nodes`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `comp_rulesets_nodes` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `ruleset_id` int(11) NOT NULL,
  `nodename` varchar(100) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `idx1` (`ruleset_id`,`nodename`),
  KEY `idx2` (`nodename`)
) ENGINE=InnoDB AUTO_INCREMENT=5425 DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `comp_rulesets_rulesets`
--

DROP TABLE IF EXISTS `comp_rulesets_rulesets`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `comp_rulesets_rulesets` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `parent_rset_id` int(11) NOT NULL,
  `child_rset_id` int(11) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `comp_rulesets_rulesets_uk1` (`parent_rset_id`,`child_rset_id`),
  KEY `comp_rulesets_rulesets_fk2` (`child_rset_id`)
) ENGINE=InnoDB AUTO_INCREMENT=136 DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `comp_rulesets_services`
--

DROP TABLE IF EXISTS `comp_rulesets_services`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `comp_rulesets_services` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `ruleset_id` int(11) NOT NULL,
  `svcname` varchar(100) NOT NULL,
  `slave` varchar(1) DEFAULT 'F',
  PRIMARY KEY (`id`),
  UNIQUE KEY `ruleset_id` (`ruleset_id`,`svcname`,`slave`),
  KEY `idx2` (`svcname`)
) ENGINE=InnoDB AUTO_INCREMENT=56108 DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `comp_rulesets_variables`
--

DROP TABLE IF EXISTS `comp_rulesets_variables`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `comp_rulesets_variables` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `ruleset_id` int(11) NOT NULL,
  `var_name` varchar(60) NOT NULL,
  `var_value` text NOT NULL,
  `var_author` varchar(100) NOT NULL,
  `var_updated` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `var_class` varchar(60) NOT NULL DEFAULT 'raw',
  PRIMARY KEY (`id`),
  KEY `comp_rulesets_variables_fk1` (`ruleset_id`)
) ENGINE=InnoDB AUTO_INCREMENT=3291 DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `comp_run_ruleset`
--

DROP TABLE IF EXISTS `comp_run_ruleset`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `comp_run_ruleset` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `rset_md5` varchar(32) NOT NULL,
  `rset` longblob NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `new_index` (`rset_md5`)
) ENGINE=InnoDB AUTO_INCREMENT=270708 DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `comp_status`
--

DROP TABLE IF EXISTS `comp_status`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `comp_status` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `run_nodename` varchar(64) NOT NULL,
  `run_module` varchar(64) NOT NULL,
  `run_status` int(11) NOT NULL DEFAULT '1',
  `run_log` text NOT NULL,
  `run_date` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `run_ruleset` char(100) NOT NULL,
  `run_action` varchar(7) DEFAULT '',
  `run_svcname` varchar(60) DEFAULT '',
  `rset_md5` varchar(32) DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `idx1` (`run_nodename`,`run_svcname`,`run_module`),
  KEY `idx2` (`run_nodename`),
  KEY `idx3` (`run_date`)
) ENGINE=InnoDB AUTO_INCREMENT=5784915 DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `comp_svc_status`
--

DROP TABLE IF EXISTS `comp_svc_status`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `comp_svc_status` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `total` int(11) DEFAULT NULL,
  `ok` int(11) DEFAULT NULL,
  `nok` int(11) DEFAULT NULL,
  `na` int(11) DEFAULT NULL,
  `obs` int(11) DEFAULT NULL,
  `pct` int(11) DEFAULT NULL,
  `svc_name` varchar(255) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `dashboard`
--

DROP TABLE IF EXISTS `dashboard`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `dashboard` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `dash_type` varchar(60) NOT NULL,
  `dash_svcname` varchar(60) NOT NULL,
  `dash_nodename` varchar(60) NOT NULL,
  `dash_severity` tinyint(4) NOT NULL,
  `dash_fmt` varchar(100) DEFAULT '',
  `dash_dict` varchar(200) DEFAULT '',
  `dash_created` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `dash_dict_md5` varchar(32) DEFAULT '',
  `dash_env` enum('DEV','PRD','TST','REC','INT','') DEFAULT '',
  `dash_md5` varchar(32) DEFAULT NULL,
  `dash_updated` datetime DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `idx1` (`dash_type`,`dash_svcname`,`dash_nodename`,`dash_dict_md5`),
  KEY `i_dash_nodename` (`dash_nodename`),
  KEY `i_dash_type` (`dash_type`)
) ENGINE=InnoDB AUTO_INCREMENT=26477468 DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

/*!50003 SET @SAVE_SQL_MODE=@@SQL_MODE*/;

DELIMITER ;;
/*!50003 SET SESSION SQL_MODE="" */;;
/*!50003 CREATE */ /*!50017 DEFINER=`opensvc`@`u64lmwbie5b.erp.sncf.fr` */ /*!50003 TRIGGER `dash_add` BEFORE INSERT ON `dashboard` FOR EACH ROW set new.dash_md5 = md5(concat(new.dash_type, new.dash_fmt, new.dash_dict)) */;;

/*!50003 SET SESSION SQL_MODE="" */;;
/*!50003 CREATE */ /*!50017 DEFINER=`opensvc`@`u64lmwbie5b.erp.sncf.fr` */ /*!50003 TRIGGER `dash_add_evt` AFTER INSERT ON `dashboard` FOR EACH ROW begin 
 insert ignore into dashboard_ref (dash_md5, dash_fmt, dash_dict, dash_type) values (new.dash_md5, new.dash_fmt, new.dash_dict, new.dash_type) ;
 insert into dashboard_events (dash_md5, dash_nodename, dash_svcname, dash_begin) values (new.dash_md5, new.dash_nodename, new.dash_svcname, now()) ;
end */;;

/*!50003 SET SESSION SQL_MODE="" */;;
/*!50003 CREATE */ /*!50017 DEFINER=`opensvc`@`u64lmwbie5b.erp.sncf.fr` */ /*!50003 TRIGGER `dash_del_evt` BEFORE DELETE ON `dashboard` FOR EACH ROW begin update dashboard_events set dash_end=now() where dash_md5=old.dash_md5 and dash_nodename=old.dash_nodename and dash_svcname=old.dash_svcname and dash_end is null ; end */;;

DELIMITER ;
/*!50003 SET SESSION SQL_MODE=@SAVE_SQL_MODE*/;

--
-- Table structure for table `dashboard_events`
--

DROP TABLE IF EXISTS `dashboard_events`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `dashboard_events` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `dash_nodename` varchar(60) DEFAULT NULL,
  `dash_svcname` varchar(60) DEFAULT NULL,
  `dash_md5` varchar(32) DEFAULT NULL,
  `dash_begin` datetime NOT NULL,
  `dash_end` datetime NOT NULL,
  PRIMARY KEY (`id`),
  KEY `idx1` (`dash_md5`),
  KEY `idx2` (`dash_begin`,`dash_end`),
  KEY `idx3` (`dash_md5`,`dash_nodename`,`dash_svcname`)
) ENGINE=InnoDB AUTO_INCREMENT=11616705 DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `dashboard_log`
--

DROP TABLE IF EXISTS `dashboard_log`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `dashboard_log` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `dash_type` varchar(60) NOT NULL,
  `dash_filters_md5` varchar(32) NOT NULL,
  `dash_alerts` int(11) DEFAULT NULL,
  `dash_date` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  KEY `idx1` (`dash_type`,`dash_date`)
) ENGINE=InnoDB AUTO_INCREMENT=3261331 DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `dashboard_ref`
--

DROP TABLE IF EXISTS `dashboard_ref`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `dashboard_ref` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `dash_md5` varchar(32) DEFAULT NULL,
  `dash_type` varchar(60) DEFAULT NULL,
  `dash_fmt` varchar(100) DEFAULT NULL,
  `dash_dict` varchar(200) DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `idx1` (`dash_md5`)
) ENGINE=InnoDB AUTO_INCREMENT=11057937 DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `disk_blacklist`
--

DROP TABLE IF EXISTS `disk_blacklist`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `disk_blacklist` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `disk_id` varchar(120) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `idx1` (`disk_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `diskinfo`
--

DROP TABLE IF EXISTS `diskinfo`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `diskinfo` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `disk_id` varchar(120) DEFAULT NULL,
  `disk_devid` varchar(60) NOT NULL,
  `disk_arrayid` varchar(300) DEFAULT NULL,
  `disk_updated` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `disk_raid` varchar(24) DEFAULT NULL,
  `disk_size` int(11) DEFAULT NULL,
  `disk_group` varchar(60) DEFAULT '',
  `disk_level` int(11) NOT NULL DEFAULT '0',
  `disk_controller` varchar(32) DEFAULT NULL,
  `disk_name` varchar(120) DEFAULT '',
  `disk_alloc` int(11) DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `new_index` (`disk_id`,`disk_group`)
) ENGINE=InnoDB AUTO_INCREMENT=8921857 DEFAULT CHARSET=latin1;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `domain_permissions`
--

DROP TABLE IF EXISTS `domain_permissions`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `domain_permissions` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `group_id` int(11) NOT NULL,
  `domains` varchar(600) CHARACTER SET latin1 NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `index_0` (`group_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `drpprojects`
--

DROP TABLE IF EXISTS `drpprojects`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `drpprojects` (
  `drp_project` varchar(30) CHARACTER SET latin1 NOT NULL,
  `drp_project_id` int(11) NOT NULL AUTO_INCREMENT,
  PRIMARY KEY (`drp_project_id`),
  UNIQUE KEY `uniq_key` (`drp_project`)
) ENGINE=InnoDB AUTO_INCREMENT=19 DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `drpservices`
--

DROP TABLE IF EXISTS `drpservices`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `drpservices` (
  `drp_svcname` varchar(60) DEFAULT NULL,
  `drp_wave` varchar(10) DEFAULT NULL,
  `drp_project_id` int(11) NOT NULL,
  UNIQUE KEY `foo` (`drp_svcname`,`drp_project_id`),
  KEY `drpservices_fk1` (`drp_project_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `feed_queue`
--

DROP TABLE IF EXISTS `feed_queue`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `feed_queue` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `q_fn` varchar(60) NOT NULL,
  `q_args` longblob NOT NULL,
  `created` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=29820920 DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `feed_queue_stats`
--

DROP TABLE IF EXISTS `feed_queue_stats`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `feed_queue_stats` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `q_start` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `q_end` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00',
  `q_fn` varchar(60) NOT NULL,
  `q_count` int(11) NOT NULL,
  `q_avg` float NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=16 DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `filters`
--

DROP TABLE IF EXISTS `filters`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `filters` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `fil_name` varchar(30) NOT NULL,
  `fil_column` varchar(30) NOT NULL,
  `fil_need_value` tinyint(1) NOT NULL DEFAULT '1',
  `fil_pos` int(11) NOT NULL DEFAULT '1',
  `fil_table` varchar(30) NOT NULL,
  `fil_img` varchar(30) NOT NULL,
  `fil_search_table` varchar(30) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=118 DEFAULT CHARSET=latin1;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `forms`
--

DROP TABLE IF EXISTS `forms`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `forms` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `form_name` varchar(100) DEFAULT NULL,
  `form_yaml` text,
  `form_author` varchar(100) DEFAULT NULL,
  `form_created` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `form_type` enum('obj','custo','folder','generic') DEFAULT 'custo',
  `form_folder` varchar(200) DEFAULT '/',
  PRIMARY KEY (`id`),
  KEY `idx1` (`form_name`)
) ENGINE=InnoDB AUTO_INCREMENT=49 DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `forms_revisions`
--

DROP TABLE IF EXISTS `forms_revisions`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `forms_revisions` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `form_yaml` text NOT NULL,
  `form_md5` varchar(32) NOT NULL,
  `form_date` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `form_id` int(11) DEFAULT NULL,
  `form_folder` varchar(200) DEFAULT NULL,
  `form_name` varchar(100) DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `idx1` (`form_md5`)
) ENGINE=InnoDB AUTO_INCREMENT=10 DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `forms_store`
--

DROP TABLE IF EXISTS `forms_store`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `forms_store` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `form_submitter` varchar(200) NOT NULL,
  `form_submit_date` datetime NOT NULL,
  `form_data` text NOT NULL,
  `form_next_id` int(11) DEFAULT NULL,
  `form_prev_id` int(11) DEFAULT NULL,
  `form_assignee` varchar(200) DEFAULT NULL,
  `form_head_id` int(11) DEFAULT NULL,
  `form_md5` varchar(32) DEFAULT NULL,
  `form_scripts` text,
  `form_var_id` int(11) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=83 DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `forms_team_publication`
--

DROP TABLE IF EXISTS `forms_team_publication`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `forms_team_publication` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `form_id` int(11) NOT NULL,
  `group_id` int(11) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `idx1` (`form_id`),
  KEY `idx2` (`group_id`),
  CONSTRAINT `forms_team_publication_fk1` FOREIGN KEY (`form_id`) REFERENCES `forms` (`id`) ON DELETE CASCADE,
  CONSTRAINT `forms_team_publication_fk2` FOREIGN KEY (`group_id`) REFERENCES `auth_group` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=69 DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `forms_team_responsible`
--

DROP TABLE IF EXISTS `forms_team_responsible`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `forms_team_responsible` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `form_id` int(11) NOT NULL,
  `group_id` int(11) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `idx1` (`form_id`),
  KEY `idx2` (`group_id`),
  CONSTRAINT `comp_forms_team_responsible_fk1` FOREIGN KEY (`form_id`) REFERENCES `forms` (`id`) ON DELETE CASCADE,
  CONSTRAINT `comp_forms_team_responsible_fk2` FOREIGN KEY (`group_id`) REFERENCES `auth_group` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=143 DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `fset_cache`
--

DROP TABLE IF EXISTS `fset_cache`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `fset_cache` (
  `fset_id` int(11) NOT NULL,
  `objtype` enum('svcname','nodename') NOT NULL,
  `name` varchar(128) NOT NULL,
  KEY `fset_id` (`fset_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `gen_filters`
--

DROP TABLE IF EXISTS `gen_filters`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `gen_filters` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `f_table` varchar(30) NOT NULL,
  `f_field` varchar(30) NOT NULL,
  `f_value` varchar(256) DEFAULT NULL,
  `f_updated` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `f_author` varchar(100) NOT NULL DEFAULT '',
  `f_op` varchar(8) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `idx1` (`f_table`,`f_field`,`f_value`,`f_op`)
) ENGINE=MyISAM AUTO_INCREMENT=111 DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `gen_filterset_check_threshold`
--

DROP TABLE IF EXISTS `gen_filterset_check_threshold`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `gen_filterset_check_threshold` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `fset_id` int(11) NOT NULL,
  `chk_type` varchar(10) NOT NULL,
  `chk_low` int(11) NOT NULL,
  `chk_high` int(11) NOT NULL,
  `chk_instance` varchar(60) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `idx1` (`fset_id`)
) ENGINE=InnoDB AUTO_INCREMENT=28 DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `gen_filterset_team_responsible`
--

DROP TABLE IF EXISTS `gen_filterset_team_responsible`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `gen_filterset_team_responsible` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `fset_id` int(11) NOT NULL,
  `group_id` int(11) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `idx1` (`fset_id`),
  KEY `gen_filterset_team_responsible_fk2` (`group_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `gen_filterset_user`
--

DROP TABLE IF EXISTS `gen_filterset_user`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `gen_filterset_user` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `fset_id` int(11) NOT NULL,
  `user_id` int(11) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `idx1` (`fset_id`,`user_id`),
  KEY `gen_filterset_user_fk2` (`user_id`)
) ENGINE=InnoDB AUTO_INCREMENT=687 DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `gen_filtersets`
--

DROP TABLE IF EXISTS `gen_filtersets`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `gen_filtersets` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `fset_name` varchar(100) DEFAULT '',
  `fset_updated` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `fset_author` varchar(100) NOT NULL DEFAULT '',
  PRIMARY KEY (`id`),
  UNIQUE KEY `idx1` (`fset_name`)
) ENGINE=InnoDB AUTO_INCREMENT=174 DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `gen_filtersets_filters`
--

DROP TABLE IF EXISTS `gen_filtersets_filters`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `gen_filtersets_filters` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `fset_id` int(11) NOT NULL,
  `f_id` int(11) NOT NULL,
  `f_log_op` varchar(8) NOT NULL,
  `encap_fset_id` int(11) DEFAULT NULL,
  `f_order` int(11) DEFAULT '0',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=399 DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `im_types`
--

DROP TABLE IF EXISTS `im_types`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `im_types` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `im_type` varchar(64) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `lifecycle_os`
--

DROP TABLE IF EXISTS `lifecycle_os`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `lifecycle_os` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `lc_os_concat` varchar(100) NOT NULL,
  `lc_count` int(11) NOT NULL,
  `lc_date` date NOT NULL,
  `lc_os_name` varchar(60) DEFAULT NULL,
  `lc_os_vendor` varchar(60) DEFAULT NULL,
  `fset_id` int(11) DEFAULT '0',
  PRIMARY KEY (`id`),
  UNIQUE KEY `lifecycle_os_uk1` (`lc_os_concat`,`lc_date`,`fset_id`)
) ENGINE=InnoDB AUTO_INCREMENT=2033439 DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `log`
--

DROP TABLE IF EXISTS `log`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `log` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `log_action` varchar(100) NOT NULL,
  `log_user` varchar(100) NOT NULL,
  `log_fmt` varchar(200) DEFAULT NULL,
  `log_dict` text,
  `log_date` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `log_svcname` varchar(256) DEFAULT NULL,
  `log_nodename` varchar(256) DEFAULT NULL,
  `log_gtalk_sent` tinyint(1) DEFAULT '0',
  `log_email_sent` tinyint(1) DEFAULT '0',
  `log_entry_id` varchar(32) DEFAULT NULL,
  `log_level` enum('debug','info','warning','error','critical') DEFAULT 'info',
  PRIMARY KEY (`id`),
  UNIQUE KEY `idx3` (`log_entry_id`),
  KEY `idx4` (`log_nodename`(255)),
  KEY `idx5` (`log_svcname`(255))
) ENGINE=InnoDB AUTO_INCREMENT=2062994 DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `metrics`
--

DROP TABLE IF EXISTS `metrics`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `metrics` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `metric_name` varchar(100) NOT NULL,
  `metric_sql` text,
  `metric_author` varchar(100) DEFAULT NULL,
  `metric_created` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `metric_col_value_index` int(11) DEFAULT '0',
  `metric_col_instance_index` int(11) DEFAULT NULL,
  `metric_col_instance_label` varchar(100) DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `idx1` (`metric_name`)
) ENGINE=InnoDB AUTO_INCREMENT=48 DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `metrics_log`
--

DROP TABLE IF EXISTS `metrics_log`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `metrics_log` (
  `metric_id` int(11) NOT NULL,
  `instance` varchar(20) DEFAULT NULL,
  `value` float DEFAULT NULL,
  `date` datetime DEFAULT NULL,
  `fset_id` int(11) DEFAULT '0',
  KEY `idx1` (`date`,`metric_id`,`fset_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `network_segment_responsibles`
--

DROP TABLE IF EXISTS `network_segment_responsibles`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `network_segment_responsibles` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `seg_id` int(11) DEFAULT NULL,
  `group_id` int(11) DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `network_segment_responsibles_fk1` (`seg_id`),
  KEY `network_segment_responsibles_fk2` (`group_id`)
) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `network_segments`
--

DROP TABLE IF EXISTS `network_segments`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `network_segments` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `net_id` int(11) DEFAULT NULL,
  `seg_type` enum('dynamic','static') DEFAULT 'static',
  `seg_begin` varchar(40) DEFAULT NULL,
  `seg_end` varchar(40) DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `network_segments_fk1` (`net_id`)
) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `networks`
--

DROP TABLE IF EXISTS `networks`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `networks` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(255) DEFAULT NULL,
  `network` varchar(40) DEFAULT NULL,
  `broadcast` varchar(40) DEFAULT NULL,
  `netmask` smallint(5) unsigned DEFAULT NULL,
  `team_responsible` varchar(255) DEFAULT NULL,
  `begin` varchar(40) DEFAULT NULL,
  `end` varchar(40) DEFAULT NULL,
  `comment` text,
  `pvid` int(11) DEFAULT NULL,
  `gateway` varchar(40) DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `idx1` (`name`),
  UNIQUE KEY `idx2` (`network`,`netmask`)
) ENGINE=InnoDB AUTO_INCREMENT=2118 DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `node_hba`
--

DROP TABLE IF EXISTS `node_hba`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `node_hba` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `updated` datetime NOT NULL,
  `nodename` varchar(60) NOT NULL,
  `hba_id` varchar(60) NOT NULL,
  `hba_type` varchar(5) DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `index_1` (`nodename`,`hba_id`)
) ENGINE=InnoDB AUTO_INCREMENT=596443 DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `node_ip`
--

DROP TABLE IF EXISTS `node_ip`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `node_ip` (
  `nodename` varchar(64) DEFAULT '',
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `mac` varchar(17) NOT NULL,
  `intf` varchar(128) DEFAULT NULL,
  `type` enum('ipv4','ipv6') DEFAULT 'ipv4',
  `addr` varchar(128) DEFAULT '',
  `mask` varchar(64) DEFAULT '',
  `updated` datetime NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=1743905 DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `nodes`
--

DROP TABLE IF EXISTS `nodes`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `nodes` (
  `nodename` varchar(60) NOT NULL,
  `loc_country` varchar(20) NOT NULL,
  `loc_city` varchar(50) NOT NULL,
  `loc_addr` varchar(100) NOT NULL,
  `loc_building` varchar(50) NOT NULL,
  `loc_floor` varchar(5) NOT NULL,
  `loc_room` varchar(30) DEFAULT '',
  `loc_rack` varchar(10) NOT NULL,
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `cpu_freq` varchar(10) NOT NULL,
  `cpu_cores` int(11) NOT NULL,
  `cpu_dies` int(11) NOT NULL,
  `cpu_vendor` varchar(20) NOT NULL,
  `cpu_model` varchar(50) NOT NULL,
  `mem_banks` int(11) NOT NULL,
  `mem_slots` int(11) NOT NULL,
  `mem_bytes` int(11) NOT NULL,
  `os_name` varchar(50) NOT NULL,
  `os_release` varchar(64) DEFAULT NULL,
  `os_update` varchar(10) NOT NULL,
  `os_segment` varchar(10) NOT NULL,
  `os_arch` varchar(10) NOT NULL,
  `os_vendor` varchar(20) NOT NULL,
  `os_kernel` varchar(32) DEFAULT NULL,
  `loc_zip` varchar(10) NOT NULL,
  `team_responsible` varchar(32) DEFAULT NULL,
  `serial` varchar(30) NOT NULL,
  `model` varchar(50) DEFAULT NULL,
  `type` varchar(15) NOT NULL,
  `warranty_end` datetime NOT NULL,
  `status` varchar(15) NOT NULL,
  `role` varchar(20) NOT NULL,
  `environnement` varchar(20) NOT NULL,
  `power_cabinet1` varchar(20) DEFAULT NULL,
  `power_cabinet2` varchar(20) DEFAULT NULL,
  `power_supply_nb` int(11) DEFAULT NULL,
  `power_protect` varchar(20) DEFAULT NULL,
  `power_protect_breaker` varchar(20) DEFAULT NULL,
  `power_breaker1` varchar(20) DEFAULT NULL,
  `power_breaker2` varchar(20) DEFAULT NULL,
  `blade_cabinet` varchar(20) DEFAULT NULL,
  `updated` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `team_integ` varchar(32) DEFAULT NULL,
  `project` varchar(64) DEFAULT NULL,
  `team_support` varchar(32) DEFAULT NULL,
  `host_mode` varchar(6) NOT NULL DEFAULT 'TST',
  `maintenance_end` datetime DEFAULT NULL,
  `enclosure` varchar(64) DEFAULT NULL,
  `hw_obs_warn_date` datetime DEFAULT NULL,
  `hw_obs_alert_date` datetime DEFAULT NULL,
  `os_obs_warn_date` datetime DEFAULT NULL,
  `os_obs_alert_date` datetime DEFAULT NULL,
  `fqdn` varchar(200) DEFAULT NULL,
  `listener_port` int(11) DEFAULT '1214',
  `version` varchar(20) DEFAULT NULL,
  `hvpool` varchar(64) DEFAULT NULL,
  `hv` varchar(128) DEFAULT NULL,
  `hvvdc` varchar(64) DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `nodename_1` (`nodename`),
  KEY `idx_os_name` (`os_name`),
  KEY `idx_pivot_os_name` (`nodename`,`os_name`)
) ENGINE=InnoDB AUTO_INCREMENT=485525 DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `nodes_import`
--

DROP TABLE IF EXISTS `nodes_import`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `nodes_import` (
  `nodename` varchar(60) NOT NULL,
  `loc_country` varchar(20) NOT NULL,
  `loc_city` varchar(50) NOT NULL,
  `loc_addr` varchar(100) NOT NULL,
  `loc_building` varchar(50) NOT NULL,
  `loc_floor` varchar(5) NOT NULL,
  `loc_room` varchar(30) DEFAULT '',
  `loc_rack` varchar(10) NOT NULL,
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `cpu_freq` varchar(10) NOT NULL,
  `cpu_cores` int(11) NOT NULL,
  `cpu_dies` int(11) NOT NULL,
  `cpu_vendor` varchar(20) NOT NULL,
  `cpu_model` varchar(50) NOT NULL,
  `mem_banks` int(11) NOT NULL,
  `mem_slots` int(11) NOT NULL,
  `mem_bytes` int(11) NOT NULL,
  `os_name` varchar(50) NOT NULL,
  `os_release` varchar(64) DEFAULT NULL,
  `os_update` varchar(10) NOT NULL,
  `os_segment` varchar(10) NOT NULL,
  `os_arch` varchar(10) NOT NULL,
  `os_vendor` varchar(20) NOT NULL,
  `os_kernel` varchar(32) DEFAULT NULL,
  `loc_zip` varchar(10) NOT NULL,
  `team_responsible` varchar(32) DEFAULT NULL,
  `serial` varchar(30) NOT NULL,
  `model` varchar(50) DEFAULT NULL,
  `type` varchar(15) NOT NULL,
  `warranty_end` datetime NOT NULL,
  `status` varchar(15) NOT NULL,
  `role` varchar(20) NOT NULL,
  `environnement` varchar(20) NOT NULL,
  `power_cabinet1` varchar(20) DEFAULT NULL,
  `power_cabinet2` varchar(20) DEFAULT NULL,
  `power_supply_nb` int(11) DEFAULT NULL,
  `power_protect` varchar(20) DEFAULT NULL,
  `power_protect_breaker` varchar(20) DEFAULT NULL,
  `power_breaker1` varchar(20) DEFAULT NULL,
  `power_breaker2` varchar(20) DEFAULT NULL,
  `blade_cabinet` varchar(20) DEFAULT NULL,
  `updated` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `team_integ` varchar(32) DEFAULT NULL,
  `project` varchar(64) DEFAULT NULL,
  `team_support` varchar(32) DEFAULT NULL,
  `host_mode` varchar(6) NOT NULL DEFAULT 'TST',
  `maintenance_end` datetime DEFAULT NULL,
  `enclosure` varchar(64) DEFAULT NULL,
  `hw_obs_warn_date` datetime DEFAULT NULL,
  `hw_obs_alert_date` datetime DEFAULT NULL,
  `os_obs_warn_date` datetime DEFAULT NULL,
  `os_obs_alert_date` datetime DEFAULT NULL,
  `fqdn` varchar(200) DEFAULT NULL,
  `listener_port` int(11) DEFAULT '1214',
  `version` varchar(20) DEFAULT NULL,
  `hvpool` varchar(64) DEFAULT NULL,
  `hv` varchar(128) DEFAULT NULL,
  `hvvdc` varchar(64) DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `nodename_1` (`nodename`),
  KEY `idx_os_name` (`os_name`),
  KEY `idx_pivot_os_name` (`nodename`,`os_name`)
) ENGINE=InnoDB AUTO_INCREMENT=1969911 DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `obsolescence`
--

DROP TABLE IF EXISTS `obsolescence`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `obsolescence` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `obs_type` varchar(30) NOT NULL,
  `obs_name` varchar(100) NOT NULL,
  `obs_warn_date` datetime DEFAULT NULL,
  `obs_alert_date` datetime DEFAULT NULL,
  `obs_warn_date_updated_by` varchar(100) NOT NULL,
  `obs_alert_date_updated_by` varchar(100) NOT NULL,
  `obs_warn_date_updated` datetime NOT NULL,
  `obs_alert_date_updated` datetime NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `obs_1` (`obs_type`,`obs_name`)
) ENGINE=InnoDB AUTO_INCREMENT=1284 DEFAULT CHARSET=latin1;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `packages`
--

DROP TABLE IF EXISTS `packages`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `packages` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `pkg_nodename` varchar(60) NOT NULL,
  `pkg_name` varchar(100) NOT NULL,
  `pkg_version` varchar(64) NOT NULL,
  `pkg_arch` varchar(8) NOT NULL,
  `pkg_updated` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `pkg_type` varchar(7) DEFAULT NULL,
  `pkg_install_date` datetime DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `idx3` (`pkg_nodename`,`pkg_name`,`pkg_arch`,`pkg_version`,`pkg_type`),
  KEY `idx1` (`pkg_nodename`),
  KEY `idx2` (`pkg_version`)
) ENGINE=InnoDB AUTO_INCREMENT=311702624 DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `patches`
--

DROP TABLE IF EXISTS `patches`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `patches` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `patch_nodename` varchar(60) NOT NULL,
  `patch_num` varchar(100) NOT NULL,
  `patch_rev` varchar(32) NOT NULL,
  `patch_updated` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `patch_install_date` datetime DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `idx3` (`patch_nodename`,`patch_num`,`patch_rev`)
) ENGINE=InnoDB AUTO_INCREMENT=293547 DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `pdns_domains`
--

DROP TABLE IF EXISTS `pdns_domains`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `pdns_domains` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(255) NOT NULL,
  `master` varchar(128) DEFAULT NULL,
  `last_check` int(11) DEFAULT NULL,
  `type` varchar(6) NOT NULL,
  `notified_serial` int(11) DEFAULT NULL,
  `account` varchar(40) DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `name_index` (`name`)
) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `pdns_records`
--

DROP TABLE IF EXISTS `pdns_records`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `pdns_records` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `domain_id` int(11) DEFAULT NULL,
  `name` varchar(255) DEFAULT NULL,
  `type` varchar(10) DEFAULT NULL,
  `content` varchar(255) DEFAULT NULL,
  `ttl` int(11) DEFAULT NULL,
  `prio` int(11) DEFAULT NULL,
  `change_date` int(11) DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `rec_name_index` (`name`),
  KEY `nametype_index` (`name`,`type`),
  KEY `domain_id` (`domain_id`)
) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `pdns_supermasters`
--

DROP TABLE IF EXISTS `pdns_supermasters`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `pdns_supermasters` (
  `ip` varchar(25) NOT NULL,
  `nameserver` varchar(255) NOT NULL,
  `account` varchar(40) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `prov_template_team_responsible`
--

DROP TABLE IF EXISTS `prov_template_team_responsible`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `prov_template_team_responsible` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `tpl_id` int(11) NOT NULL,
  `group_id` int(11) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `idx1` (`tpl_id`),
  KEY `idx2` (`group_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `prov_templates`
--

DROP TABLE IF EXISTS `prov_templates`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `prov_templates` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `tpl_name` varchar(100) NOT NULL,
  `tpl_command` text NOT NULL,
  `tpl_comment` text NOT NULL,
  `tpl_author` varchar(100) NOT NULL,
  `tpl_created` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  KEY `idx1` (`tpl_name`)
) ENGINE=InnoDB AUTO_INCREMENT=6 DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `reports`
--

DROP TABLE IF EXISTS `reports`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `reports` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `report_name` varchar(100) NOT NULL,
  `report_yaml` text,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `reports_user`
--

DROP TABLE IF EXISTS `reports_user`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `reports_user` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `report_id` int(11) NOT NULL,
  `user_id` int(11) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `report_user_uk1` (`user_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `resmon`
--

DROP TABLE IF EXISTS `resmon`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `resmon` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `svcname` varchar(60) DEFAULT NULL,
  `nodename` varchar(60) DEFAULT NULL,
  `rid` varchar(16) DEFAULT NULL,
  `res_status` enum('up','down','warn','n/a','undef','stdby up','stdby down') DEFAULT 'undef',
  `changed` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `updated` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00',
  `res_desc` varchar(200) DEFAULT NULL,
  `res_log` varchar(200) DEFAULT '',
  `vmname` varchar(60) DEFAULT '',
  PRIMARY KEY (`id`),
  UNIQUE KEY `resmon_1` (`svcname`,`nodename`,`vmname`,`rid`)
) ENGINE=InnoDB AUTO_INCREMENT=959110747 DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `san_zone`
--

DROP TABLE IF EXISTS `san_zone`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `san_zone` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `cfg` varchar(128) DEFAULT '',
  `zone` varchar(128) DEFAULT '',
  `port` varchar(16) DEFAULT '',
  `updated` datetime NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `idx1` (`cfg`,`zone`,`port`)
) ENGINE=InnoDB AUTO_INCREMENT=105858466 DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `san_zone_alias`
--

DROP TABLE IF EXISTS `san_zone_alias`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `san_zone_alias` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `cfg` varchar(128) DEFAULT '',
  `alias` varchar(128) DEFAULT '',
  `port` varchar(16) DEFAULT '',
  `updated` datetime NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `idx1` (`cfg`,`alias`,`port`)
) ENGINE=InnoDB AUTO_INCREMENT=27730416 DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `saves`
--

DROP TABLE IF EXISTS `saves`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `saves` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `save_nodename` varchar(60) NOT NULL,
  `save_svcname` varchar(60) NOT NULL,
  `save_name` varchar(200) NOT NULL,
  `save_group` varchar(100) NOT NULL,
  `save_size` bigint(20) DEFAULT NULL,
  `save_date` datetime NOT NULL,
  `save_retention` datetime NOT NULL,
  `save_volume` varchar(64) NOT NULL,
  `save_level` varchar(8) NOT NULL,
  `save_server` varchar(60) NOT NULL,
  `save_app` varchar(64) DEFAULT NULL,
  `save_id` varchar(64) DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `idx1` (`save_server`,`save_id`,`save_volume`),
  KEY `idx2` (`save_nodename`,`save_svcname`)
) ENGINE=InnoDB AUTO_INCREMENT=11191830 DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `services`
--

DROP TABLE IF EXISTS `services`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `services` (
  `svc_hostid` varchar(30) CHARACTER SET latin1 DEFAULT NULL,
  `svc_name` varchar(60) DEFAULT NULL,
  `svc_nodes` varchar(1000) CHARACTER SET latin1 DEFAULT NULL,
  `svc_drpnode` varchar(30) CHARACTER SET latin1 DEFAULT NULL,
  `svc_ipname` varchar(1000) CHARACTER SET latin1 DEFAULT NULL,
  `svc_ipdev` varchar(1000) CHARACTER SET latin1 DEFAULT NULL,
  `svc_drpipname` varchar(1000) CHARACTER SET latin1 DEFAULT NULL,
  `svc_drpipdev` varchar(1000) CHARACTER SET latin1 DEFAULT NULL,
  `svc_drptype` varchar(7) CHARACTER SET latin1 DEFAULT NULL,
  `svc_fs` varchar(2000) CHARACTER SET latin1 DEFAULT NULL,
  `svc_dev` varchar(2000) CHARACTER SET latin1 DEFAULT NULL,
  `svc_autostart` varchar(60) CHARACTER SET latin1 NOT NULL,
  `svc_mntopt` varchar(2000) CHARACTER SET latin1 DEFAULT NULL,
  `svc_scsi` varchar(10) CHARACTER SET latin1 DEFAULT NULL,
  `svc_type` varchar(10) CHARACTER SET latin1 DEFAULT NULL,
  `svc_drpnodes` varchar(1000) CHARACTER SET latin1 DEFAULT NULL,
  `svc_comment` varchar(1000) CHARACTER SET latin1 DEFAULT NULL,
  `svc_app` varchar(64) DEFAULT NULL,
  `svc_drnoaction` varchar(1) CHARACTER SET latin1 DEFAULT 'F',
  `svc_created` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `cksum` varchar(20) CHARACTER SET latin1 DEFAULT NULL,
  `svc_envdate` datetime DEFAULT NULL,
  `svc_containertype` varchar(10) CHARACTER SET latin1 DEFAULT NULL,
  `svc_metrocluster` varchar(10) CHARACTER SET latin1 DEFAULT NULL,
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `svc_hasec` varchar(512) CHARACTER SET latin1 DEFAULT NULL,
  `svc_hapri` varchar(512) CHARACTER SET latin1 DEFAULT NULL,
  `svc_hastonith` varchar(512) CHARACTER SET latin1 DEFAULT NULL,
  `svc_hastartup` varchar(512) CHARACTER SET latin1 DEFAULT NULL,
  `svc_wave` varchar(10) CHARACTER SET latin1 NOT NULL DEFAULT '3',
  `svc_envfile` varchar(20000) CHARACTER SET latin1 DEFAULT NULL,
  `svc_version` varchar(20) CHARACTER SET latin1 DEFAULT NULL,
  `svc_vmname` varchar(30) CHARACTER SET latin1 DEFAULT NULL,
  `updated` datetime NOT NULL,
  `svc_vcpus` float DEFAULT '0',
  `svc_vmem` int(11) DEFAULT '0',
  `svc_guestos` varchar(30) CHARACTER SET latin1 DEFAULT NULL,
  `svc_cluster_type` varchar(20) CHARACTER SET latin1 DEFAULT 'failover',
  `svc_flex_min_nodes` int(11) DEFAULT '1',
  `svc_flex_max_nodes` int(11) DEFAULT '0',
  `svc_flex_cpu_low_threshold` int(11) DEFAULT '10',
  `svc_flex_cpu_high_threshold` int(11) DEFAULT '70',
  `svc_status` varchar(10) CHARACTER SET latin1 DEFAULT 'undef',
  `svc_availstatus` varchar(10) CHARACTER SET latin1 DEFAULT 'undef',
  `svc_ha` tinyint(1) DEFAULT '0',
  `svc_containerpath` varchar(512) DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `i_svc_name` (`svc_name`),
  KEY `svc_hostid` (`svc_hostid`),
  KEY `svc_drpnode` (`svc_drpnode`),
  KEY `idx2` (`svc_cluster_type`)
) ENGINE=InnoDB AUTO_INCREMENT=315827 DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `services_log`
--

DROP TABLE IF EXISTS `services_log`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `services_log` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `svc_name` varchar(60) NOT NULL,
  `svc_availstatus` varchar(10) NOT NULL,
  `svc_begin` datetime NOT NULL,
  `svc_end` datetime NOT NULL,
  PRIMARY KEY (`id`),
  KEY `idx1` (`svc_name`)
) ENGINE=InnoDB AUTO_INCREMENT=386780 DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `stat_day`
--

DROP TABLE IF EXISTS `stat_day`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `stat_day` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `day` datetime NOT NULL,
  `nb_svc` int(11) NOT NULL DEFAULT '0',
  `nb_action` int(11) NOT NULL DEFAULT '0',
  `nb_action_err` int(11) NOT NULL DEFAULT '0',
  `nb_action_warn` int(11) NOT NULL DEFAULT '0',
  `nb_action_ok` int(11) NOT NULL DEFAULT '0',
  `disk_size` int(11) NOT NULL DEFAULT '0',
  `ram_size` int(11) DEFAULT '0',
  `nb_cpu_core` int(11) DEFAULT '0',
  `nb_cpu_die` int(11) DEFAULT '0',
  `watt` int(11) DEFAULT '0',
  `rackunit` int(11) DEFAULT '0',
  `nb_apps` int(11) NOT NULL DEFAULT '0',
  `nb_accounts` int(11) NOT NULL DEFAULT '0',
  `nb_svc_with_drp` int(11) NOT NULL DEFAULT '0',
  `nb_nodes` int(11) NOT NULL DEFAULT '0',
  `nb_svc_prd` int(11) DEFAULT '0',
  `nb_svc_cluster` int(11) DEFAULT '0',
  `nb_nodes_prd` int(11) DEFAULT '0',
  `fset_id` int(11) DEFAULT '0',
  `nb_vcpu` int(11) DEFAULT '0',
  `nb_vmem` int(11) DEFAULT '0',
  `nb_resp_accounts` int(11) DEFAULT '0',
  `nb_virt_nodes` int(11) DEFAULT '0',
  `local_disk_size` int(11) NOT NULL DEFAULT '0',
  PRIMARY KEY (`id`),
  UNIQUE KEY `stat_day_uk1` (`day`,`fset_id`)
) ENGINE=InnoDB AUTO_INCREMENT=53966 DEFAULT CHARSET=latin1;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `stat_day_billing`
--

DROP TABLE IF EXISTS `stat_day_billing`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `stat_day_billing` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `fset_id` int(11) NOT NULL DEFAULT '0',
  `day` datetime NOT NULL,
  `os_name` varchar(100) NOT NULL,
  `nb_svc_prd` int(11) DEFAULT '0',
  `nb_svc_nonprd` int(11) DEFAULT '0',
  `nb_agents_without_svc_prd` int(11) DEFAULT '0',
  `nb_agents_without_svc_nonprd` int(11) DEFAULT '0',
  PRIMARY KEY (`id`),
  UNIQUE KEY `new_index` (`day`,`fset_id`,`os_name`)
) ENGINE=InnoDB AUTO_INCREMENT=491731 DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `stat_day_disk_app`
--

DROP TABLE IF EXISTS `stat_day_disk_app`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `stat_day_disk_app` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `day` datetime NOT NULL,
  `app` varchar(100) NOT NULL,
  `disk_used` int(11) DEFAULT '0',
  `quota` int(11) DEFAULT '0',
  PRIMARY KEY (`id`),
  UNIQUE KEY `new_index` (`day`,`app`)
) ENGINE=InnoDB AUTO_INCREMENT=6885 DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `stat_day_disk_app_dg`
--

DROP TABLE IF EXISTS `stat_day_disk_app_dg`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `stat_day_disk_app_dg` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `day` datetime NOT NULL,
  `dg_id` int(11) NOT NULL,
  `app` varchar(100) NOT NULL,
  `disk_used` int(11) DEFAULT '0',
  `quota` int(11) DEFAULT '0',
  PRIMARY KEY (`id`),
  UNIQUE KEY `new_index` (`day`,`app`,`dg_id`)
) ENGINE=InnoDB AUTO_INCREMENT=30535 DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `stat_day_disk_array`
--

DROP TABLE IF EXISTS `stat_day_disk_array`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `stat_day_disk_array` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `day` datetime NOT NULL,
  `array_name` varchar(100) NOT NULL,
  `disk_used` int(11) DEFAULT '0',
  `disk_size` int(11) DEFAULT '0',
  `reservable` int(11) DEFAULT '0',
  `reserved` int(11) DEFAULT '0',
  PRIMARY KEY (`id`),
  UNIQUE KEY `new_index` (`day`,`array_name`)
) ENGINE=InnoDB AUTO_INCREMENT=2714 DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `stat_day_disk_array_dg`
--

DROP TABLE IF EXISTS `stat_day_disk_array_dg`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `stat_day_disk_array_dg` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `day` datetime NOT NULL,
  `array_name` varchar(100) NOT NULL,
  `array_dg` varchar(100) NOT NULL,
  `disk_used` int(11) DEFAULT '0',
  `disk_size` int(11) DEFAULT '0',
  `reserved` int(11) DEFAULT '0',
  `reservable` int(11) DEFAULT '0',
  PRIMARY KEY (`id`),
  UNIQUE KEY `new_index` (`day`,`array_name`,`array_dg`)
) ENGINE=InnoDB AUTO_INCREMENT=35551 DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `stat_day_svc`
--

DROP TABLE IF EXISTS `stat_day_svc`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `stat_day_svc` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `day` datetime NOT NULL,
  `svcname` varchar(100) NOT NULL,
  `nb_action` int(11) DEFAULT NULL,
  `nb_action_err` int(11) DEFAULT '0',
  `nb_action_warn` int(11) DEFAULT '0',
  `nb_action_ok` int(11) DEFAULT '0',
  `disk_size` int(11) DEFAULT '0',
  `ram_size` int(11) DEFAULT '0',
  `nb_cpu_core` int(11) DEFAULT '0',
  `nb_cpu_die` int(11) DEFAULT '0',
  `watt` int(11) DEFAULT '0',
  `rackunit` int(11) DEFAULT '0',
  `nb_nodes` int(11) DEFAULT '0',
  `local_disk_size` int(11) DEFAULT '0',
  PRIMARY KEY (`id`),
  UNIQUE KEY `new_index` (`day`,`svcname`)
) ENGINE=InnoDB AUTO_INCREMENT=270083 DEFAULT CHARSET=latin1;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `stats_block`
--

DROP TABLE IF EXISTS `stats_block`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `stats_block` (
  `nodename` varchar(60) NOT NULL,
  `date` datetime NOT NULL,
  `tps` float NOT NULL,
  `rtps` float NOT NULL,
  `wtps` float NOT NULL,
  `rbps` float NOT NULL,
  `wbps` float NOT NULL,
  UNIQUE KEY `index_1` (`date`,`nodename`)
) ENGINE=MyISAM DEFAULT CHARSET=latin1;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `stats_block_day`
--

DROP TABLE IF EXISTS `stats_block_day`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `stats_block_day` (
  `nodename` varchar(60) NOT NULL,
  `date` datetime NOT NULL,
  `tps` float NOT NULL,
  `rtps` float NOT NULL,
  `wtps` float NOT NULL,
  `rbps` float NOT NULL,
  `wbps` float NOT NULL,
  UNIQUE KEY `index_1` (`date`,`nodename`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `stats_block_hour`
--

DROP TABLE IF EXISTS `stats_block_hour`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `stats_block_hour` (
  `nodename` varchar(60) NOT NULL,
  `date` datetime NOT NULL,
  `tps` float NOT NULL,
  `rtps` float NOT NULL,
  `wtps` float NOT NULL,
  `rbps` float NOT NULL,
  `wbps` float NOT NULL,
  UNIQUE KEY `index_1` (`date`,`nodename`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `stats_blockdev`
--

DROP TABLE IF EXISTS `stats_blockdev`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `stats_blockdev` (
  `date` datetime NOT NULL,
  `nodename` varchar(60) NOT NULL,
  `dev` varchar(20) NOT NULL,
  `tps` float NOT NULL,
  `rsecps` float NOT NULL,
  `wsecps` float NOT NULL,
  `avgrq_sz` float NOT NULL,
  `avgqu_sz` float NOT NULL,
  `await` float NOT NULL,
  `svctm` float NOT NULL,
  `pct_util` float NOT NULL,
  UNIQUE KEY `index_1` (`date`,`nodename`,`dev`)
) ENGINE=MyISAM DEFAULT CHARSET=latin1;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `stats_blockdev_day`
--

DROP TABLE IF EXISTS `stats_blockdev_day`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `stats_blockdev_day` (
  `date` datetime NOT NULL,
  `nodename` varchar(60) NOT NULL,
  `dev` varchar(20) NOT NULL,
  `tps` float NOT NULL,
  `rsecps` float NOT NULL,
  `wsecps` float NOT NULL,
  `avgrq_sz` float NOT NULL,
  `avgqu_sz` float NOT NULL,
  `await` float NOT NULL,
  `svctm` float NOT NULL,
  `pct_util` float NOT NULL,
  UNIQUE KEY `index_1` (`date`,`nodename`,`dev`)
) ENGINE=MyISAM DEFAULT CHARSET=latin1;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `stats_blockdev_hour`
--

DROP TABLE IF EXISTS `stats_blockdev_hour`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `stats_blockdev_hour` (
  `date` datetime NOT NULL,
  `nodename` varchar(60) NOT NULL,
  `dev` varchar(20) NOT NULL,
  `tps` float NOT NULL,
  `rsecps` float NOT NULL,
  `wsecps` float NOT NULL,
  `avgrq_sz` float NOT NULL,
  `avgqu_sz` float NOT NULL,
  `await` float NOT NULL,
  `svctm` float NOT NULL,
  `pct_util` float NOT NULL,
  UNIQUE KEY `index_1` (`date`,`nodename`,`dev`)
) ENGINE=MyISAM DEFAULT CHARSET=latin1;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `stats_compare`
--

DROP TABLE IF EXISTS `stats_compare`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `stats_compare` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(60) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=7 DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `stats_compare_fset`
--

DROP TABLE IF EXISTS `stats_compare_fset`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `stats_compare_fset` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `compare_id` int(11) NOT NULL,
  `fset_id` int(11) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `stats_compare_fset_uk1` (`compare_id`,`fset_id`),
  KEY `stats_compare_fset_ibfk_1` (`fset_id`)
) ENGINE=InnoDB AUTO_INCREMENT=17 DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `stats_compare_user`
--

DROP TABLE IF EXISTS `stats_compare_user`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `stats_compare_user` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `compare_id` int(11) NOT NULL,
  `user_id` int(11) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `stats_compare_user_uk1` (`compare_id`,`user_id`),
  KEY `stats_compare_user_ibfk_1` (`user_id`)
) ENGINE=InnoDB AUTO_INCREMENT=12 DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `stats_cpu`
--

DROP TABLE IF EXISTS `stats_cpu`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `stats_cpu` (
  `date` datetime NOT NULL,
  `cpu` varchar(5) NOT NULL,
  `usr` float NOT NULL,
  `nice` float NOT NULL,
  `sys` float NOT NULL,
  `iowait` float NOT NULL,
  `steal` float DEFAULT '0',
  `irq` float DEFAULT '0',
  `soft` float DEFAULT '0',
  `guest` float DEFAULT '0',
  `idle` float NOT NULL,
  `nodename` varchar(60) NOT NULL,
  UNIQUE KEY `index_1` (`date`,`cpu`,`nodename`)
) ENGINE=MyISAM DEFAULT CHARSET=latin1;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `stats_cpu_day`
--

DROP TABLE IF EXISTS `stats_cpu_day`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `stats_cpu_day` (
  `date` datetime NOT NULL,
  `cpu` varchar(5) NOT NULL,
  `usr` float NOT NULL,
  `nice` float NOT NULL,
  `sys` float NOT NULL,
  `iowait` float NOT NULL,
  `steal` float DEFAULT '0',
  `irq` float DEFAULT '0',
  `soft` float DEFAULT '0',
  `guest` float DEFAULT '0',
  `idle` float NOT NULL,
  `nodename` varchar(60) NOT NULL,
  UNIQUE KEY `index_1` (`date`,`cpu`,`nodename`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `stats_cpu_hour`
--

DROP TABLE IF EXISTS `stats_cpu_hour`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `stats_cpu_hour` (
  `date` datetime NOT NULL,
  `cpu` varchar(5) NOT NULL,
  `usr` float NOT NULL,
  `nice` float NOT NULL,
  `sys` float NOT NULL,
  `iowait` float NOT NULL,
  `steal` float DEFAULT '0',
  `irq` float DEFAULT '0',
  `soft` float DEFAULT '0',
  `guest` float DEFAULT '0',
  `idle` float NOT NULL,
  `nodename` varchar(60) NOT NULL,
  UNIQUE KEY `index_1` (`date`,`cpu`,`nodename`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `stats_fs_u`
--

DROP TABLE IF EXISTS `stats_fs_u`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `stats_fs_u` (
  `date` datetime NOT NULL,
  `nodename` varchar(60) NOT NULL,
  `mntpt` varchar(200) NOT NULL,
  `size` bigint(20) NOT NULL,
  `used` int(11) NOT NULL,
  UNIQUE KEY `index_1` (`date`,`nodename`,`mntpt`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `stats_fs_u_day`
--

DROP TABLE IF EXISTS `stats_fs_u_day`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `stats_fs_u_day` (
  `date` datetime NOT NULL,
  `nodename` varchar(60) NOT NULL,
  `mntpt` varchar(200) NOT NULL,
  `size` bigint(20) NOT NULL,
  `used` int(11) NOT NULL,
  UNIQUE KEY `index_1` (`date`,`nodename`,`mntpt`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `stats_fs_u_diff`
--

DROP TABLE IF EXISTS `stats_fs_u_diff`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `stats_fs_u_diff` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `begin` datetime NOT NULL,
  `end` datetime NOT NULL,
  `nodename` varchar(60) NOT NULL,
  `mntpt` varchar(200) NOT NULL,
  `size` bigint(20) DEFAULT NULL,
  `used` int(11) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=7125807 DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `stats_fs_u_hour`
--

DROP TABLE IF EXISTS `stats_fs_u_hour`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `stats_fs_u_hour` (
  `date` datetime NOT NULL,
  `nodename` varchar(60) NOT NULL,
  `mntpt` varchar(200) NOT NULL,
  `size` bigint(20) NOT NULL,
  `used` int(11) NOT NULL,
  UNIQUE KEY `index_1` (`date`,`nodename`,`mntpt`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `stats_fs_u_last`
--

DROP TABLE IF EXISTS `stats_fs_u_last`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `stats_fs_u_last` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `begin` datetime NOT NULL,
  `end` datetime NOT NULL,
  `nodename` varchar(60) NOT NULL,
  `mntpt` varchar(200) NOT NULL,
  `size` bigint(20) DEFAULT NULL,
  `used` int(11) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `index_1` (`nodename`,`mntpt`)
) ENGINE=InnoDB AUTO_INCREMENT=506009459 DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `stats_mem_u`
--

DROP TABLE IF EXISTS `stats_mem_u`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `stats_mem_u` (
  `nodename` varchar(60) NOT NULL,
  `kbmemfree` int(11) NOT NULL,
  `kbmemused` int(11) NOT NULL,
  `pct_memused` float NOT NULL,
  `kbbuffers` int(11) NOT NULL,
  `kbcached` int(11) NOT NULL,
  `kbcommit` int(11) NOT NULL,
  `pct_commit` float NOT NULL,
  `date` datetime NOT NULL,
  `kbmemsys` int(11) NOT NULL DEFAULT '0',
  UNIQUE KEY `index_1` (`date`,`nodename`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `stats_mem_u_day`
--

DROP TABLE IF EXISTS `stats_mem_u_day`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `stats_mem_u_day` (
  `nodename` varchar(60) NOT NULL,
  `kbmemfree` int(11) NOT NULL,
  `kbmemused` int(11) NOT NULL,
  `pct_memused` float NOT NULL,
  `kbbuffers` int(11) NOT NULL,
  `kbcached` int(11) NOT NULL,
  `kbcommit` int(11) NOT NULL,
  `pct_commit` float NOT NULL,
  `date` datetime NOT NULL,
  `kbmemsys` int(11) NOT NULL DEFAULT '0',
  UNIQUE KEY `index_1` (`date`,`nodename`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `stats_mem_u_hour`
--

DROP TABLE IF EXISTS `stats_mem_u_hour`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `stats_mem_u_hour` (
  `nodename` varchar(60) NOT NULL,
  `kbmemfree` int(11) NOT NULL,
  `kbmemused` int(11) NOT NULL,
  `pct_memused` float NOT NULL,
  `kbbuffers` int(11) NOT NULL,
  `kbcached` int(11) NOT NULL,
  `kbcommit` int(11) NOT NULL,
  `pct_commit` float NOT NULL,
  `date` datetime NOT NULL,
  `kbmemsys` int(11) NOT NULL DEFAULT '0',
  UNIQUE KEY `index_1` (`date`,`nodename`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `stats_netdev`
--

DROP TABLE IF EXISTS `stats_netdev`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `stats_netdev` (
  `nodename` varchar(60) NOT NULL,
  `date` datetime NOT NULL,
  `dev` varchar(8) NOT NULL,
  `rxkBps` float NOT NULL,
  `txkBps` float NOT NULL,
  `rxpckps` float NOT NULL,
  `txpckps` float NOT NULL,
  UNIQUE KEY `date` (`date`,`dev`,`nodename`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `stats_netdev_day`
--

DROP TABLE IF EXISTS `stats_netdev_day`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `stats_netdev_day` (
  `nodename` varchar(60) NOT NULL,
  `date` datetime NOT NULL,
  `dev` varchar(8) NOT NULL,
  `rxkBps` float NOT NULL,
  `txkBps` float NOT NULL,
  `rxpckps` float NOT NULL,
  `txpckps` float NOT NULL,
  UNIQUE KEY `date` (`date`,`dev`,`nodename`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `stats_netdev_err`
--

DROP TABLE IF EXISTS `stats_netdev_err`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `stats_netdev_err` (
  `nodename` varchar(60) NOT NULL,
  `date` datetime NOT NULL,
  `rxerrps` float NOT NULL,
  `txerrps` float NOT NULL,
  `collps` float NOT NULL,
  `rxdropps` float NOT NULL,
  `txdropps` float NOT NULL,
  `dev` varchar(8) NOT NULL,
  KEY `stats_netdev_err_k1` (`nodename`),
  KEY `stats_netdev_err_k2` (`date`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8 ROW_FORMAT=COMPRESSED;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `stats_netdev_err_day`
--

DROP TABLE IF EXISTS `stats_netdev_err_day`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `stats_netdev_err_day` (
  `nodename` varchar(60) NOT NULL,
  `date` datetime NOT NULL,
  `rxerrps` float NOT NULL,
  `txerrps` float NOT NULL,
  `collps` float NOT NULL,
  `rxdropps` float NOT NULL,
  `txdropps` float NOT NULL,
  `dev` varchar(8) NOT NULL,
  KEY `stats_netdev_err_k1` (`nodename`),
  KEY `stats_netdev_err_k2` (`date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 ROW_FORMAT=COMPRESSED;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `stats_netdev_err_hour`
--

DROP TABLE IF EXISTS `stats_netdev_err_hour`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `stats_netdev_err_hour` (
  `nodename` varchar(60) NOT NULL,
  `date` datetime NOT NULL,
  `rxerrps` float NOT NULL,
  `txerrps` float NOT NULL,
  `collps` float NOT NULL,
  `rxdropps` float NOT NULL,
  `txdropps` float NOT NULL,
  `dev` varchar(8) NOT NULL,
  KEY `stats_netdev_err_k1` (`nodename`),
  KEY `stats_netdev_err_k2` (`date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 ROW_FORMAT=COMPRESSED;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `stats_netdev_hour`
--

DROP TABLE IF EXISTS `stats_netdev_hour`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `stats_netdev_hour` (
  `nodename` varchar(60) NOT NULL,
  `date` datetime NOT NULL,
  `dev` varchar(8) NOT NULL,
  `rxkBps` float NOT NULL,
  `txkBps` float NOT NULL,
  `rxpckps` float NOT NULL,
  `txpckps` float NOT NULL,
  UNIQUE KEY `date` (`date`,`dev`,`nodename`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `stats_proc`
--

DROP TABLE IF EXISTS `stats_proc`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `stats_proc` (
  `date` datetime NOT NULL,
  `nodename` varchar(60) NOT NULL,
  `runq_sz` int(11) NOT NULL,
  `plist_sz` int(11) NOT NULL,
  `ldavg_1` float NOT NULL,
  `ldavg_5` float NOT NULL,
  `ldavg_15` float NOT NULL,
  UNIQUE KEY `index_1` (`date`,`nodename`)
) ENGINE=MyISAM DEFAULT CHARSET=latin1;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `stats_proc_day`
--

DROP TABLE IF EXISTS `stats_proc_day`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `stats_proc_day` (
  `date` datetime NOT NULL,
  `nodename` varchar(60) NOT NULL,
  `runq_sz` int(11) NOT NULL,
  `plist_sz` int(11) NOT NULL,
  `ldavg_1` float NOT NULL,
  `ldavg_5` float NOT NULL,
  `ldavg_15` float NOT NULL,
  UNIQUE KEY `index_1` (`date`,`nodename`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `stats_proc_hour`
--

DROP TABLE IF EXISTS `stats_proc_hour`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `stats_proc_hour` (
  `date` datetime NOT NULL,
  `nodename` varchar(60) NOT NULL,
  `runq_sz` int(11) NOT NULL,
  `plist_sz` int(11) NOT NULL,
  `ldavg_1` float NOT NULL,
  `ldavg_5` float NOT NULL,
  `ldavg_15` float NOT NULL,
  UNIQUE KEY `index_1` (`date`,`nodename`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `stats_svc`
--

DROP TABLE IF EXISTS `stats_svc`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `stats_svc` (
  `date` datetime NOT NULL,
  `svcname` varchar(60) NOT NULL,
  `swap` int(11) NOT NULL,
  `rss` int(11) NOT NULL,
  `cap` float NOT NULL,
  `at` float NOT NULL,
  `avgat` float NOT NULL,
  `pg` float NOT NULL,
  `avgpg` float NOT NULL,
  `nproc` float NOT NULL,
  `mem` float NOT NULL,
  `cpu` float NOT NULL,
  `nodename` varchar(60) NOT NULL,
  `cap_cpu` float DEFAULT '1',
  UNIQUE KEY `index_1` (`date`,`svcname`,`nodename`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `stats_svc_day`
--

DROP TABLE IF EXISTS `stats_svc_day`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `stats_svc_day` (
  `date` datetime NOT NULL,
  `svcname` varchar(60) NOT NULL,
  `swap` int(11) NOT NULL,
  `rss` int(11) NOT NULL,
  `cap` float NOT NULL,
  `at` float NOT NULL,
  `avgat` float NOT NULL,
  `pg` float NOT NULL,
  `avgpg` float NOT NULL,
  `nproc` float NOT NULL,
  `mem` float NOT NULL,
  `cpu` float NOT NULL,
  `nodename` varchar(60) NOT NULL,
  `cap_cpu` float DEFAULT '1',
  UNIQUE KEY `index_1` (`date`,`svcname`,`nodename`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `stats_svc_hour`
--

DROP TABLE IF EXISTS `stats_svc_hour`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `stats_svc_hour` (
  `date` datetime NOT NULL,
  `svcname` varchar(60) NOT NULL,
  `swap` int(11) NOT NULL,
  `rss` int(11) NOT NULL,
  `cap` float NOT NULL,
  `at` float NOT NULL,
  `avgat` float NOT NULL,
  `pg` float NOT NULL,
  `avgpg` float NOT NULL,
  `nproc` float NOT NULL,
  `mem` float NOT NULL,
  `cpu` float NOT NULL,
  `nodename` varchar(60) NOT NULL,
  `cap_cpu` float DEFAULT '1',
  UNIQUE KEY `index_1` (`date`,`svcname`,`nodename`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `stats_swap`
--

DROP TABLE IF EXISTS `stats_swap`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `stats_swap` (
  `nodename` varchar(60) NOT NULL,
  `date` datetime NOT NULL,
  `kbswpfree` int(11) NOT NULL,
  `kbswpused` int(11) NOT NULL,
  `pct_swpused` float NOT NULL,
  `kbswpcad` int(11) NOT NULL,
  `pct_swpcad` float NOT NULL,
  UNIQUE KEY `index_1` (`date`,`nodename`)
) ENGINE=MyISAM DEFAULT CHARSET=latin1;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `stats_swap_day`
--

DROP TABLE IF EXISTS `stats_swap_day`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `stats_swap_day` (
  `nodename` varchar(60) NOT NULL,
  `date` datetime NOT NULL,
  `kbswpfree` int(11) NOT NULL,
  `kbswpused` int(11) NOT NULL,
  `pct_swpused` float NOT NULL,
  `kbswpcad` int(11) NOT NULL,
  `pct_swpcad` float NOT NULL,
  UNIQUE KEY `index_1` (`date`,`nodename`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `stats_swap_hour`
--

DROP TABLE IF EXISTS `stats_swap_hour`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `stats_swap_hour` (
  `nodename` varchar(60) NOT NULL,
  `date` datetime NOT NULL,
  `kbswpfree` int(11) NOT NULL,
  `kbswpused` int(11) NOT NULL,
  `pct_swpused` float NOT NULL,
  `kbswpcad` int(11) NOT NULL,
  `pct_swpcad` float NOT NULL,
  UNIQUE KEY `index_1` (`date`,`nodename`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `stor_array`
--

DROP TABLE IF EXISTS `stor_array`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `stor_array` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `array_name` varchar(300) DEFAULT NULL,
  `array_model` varchar(30) NOT NULL,
  `array_cache` int(11) DEFAULT NULL,
  `array_firmware` varchar(60) DEFAULT NULL,
  `array_updated` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `array_level` int(11) NOT NULL DEFAULT '0',
  PRIMARY KEY (`id`),
  UNIQUE KEY `index_1` (`array_name`)
) ENGINE=MyISAM AUTO_INCREMENT=371 DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `stor_array_dg`
--

DROP TABLE IF EXISTS `stor_array_dg`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `stor_array_dg` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `array_id` varchar(60) NOT NULL,
  `dg_name` varchar(60) NOT NULL,
  `dg_free` int(11) NOT NULL,
  `dg_updated` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `dg_size` int(11) DEFAULT NULL,
  `dg_used` int(11) DEFAULT NULL,
  `dg_reserved` int(11) DEFAULT '0',
  PRIMARY KEY (`id`),
  UNIQUE KEY `index_1` (`array_id`,`dg_name`)
) ENGINE=InnoDB AUTO_INCREMENT=97852 DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `stor_array_dg_quota`
--

DROP TABLE IF EXISTS `stor_array_dg_quota`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `stor_array_dg_quota` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `dg_id` int(11) NOT NULL,
  `app_id` int(11) NOT NULL,
  `quota` int(11) DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `index_1` (`dg_id`,`app_id`),
  KEY `stor_array_dg_quota_ibfk_2` (`app_id`)
) ENGINE=InnoDB AUTO_INCREMENT=1545 DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `stor_array_proxy`
--

DROP TABLE IF EXISTS `stor_array_proxy`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `stor_array_proxy` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `array_id` int(11) NOT NULL,
  `nodename` varchar(60) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `index_1` (`array_id`,`nodename`)
) ENGINE=InnoDB AUTO_INCREMENT=2428 DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `stor_array_tgtid`
--

DROP TABLE IF EXISTS `stor_array_tgtid`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `stor_array_tgtid` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `array_id` varchar(60) NOT NULL,
  `array_tgtid` varchar(60) NOT NULL,
  `updated` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  UNIQUE KEY `index_1` (`array_id`,`array_tgtid`)
) ENGINE=InnoDB AUTO_INCREMENT=213004 DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `stor_zone`
--

DROP TABLE IF EXISTS `stor_zone`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `stor_zone` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `tgt_id` varchar(60) NOT NULL,
  `hba_id` varchar(60) NOT NULL,
  `nodename` varchar(60) DEFAULT NULL,
  `updated` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  UNIQUE KEY `index_1` (`tgt_id`,`hba_id`)
) ENGINE=InnoDB AUTO_INCREMENT=1190887 DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `svc_res_fs`
--

DROP TABLE IF EXISTS `svc_res_fs`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `svc_res_fs` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `fs_svcname` varchar(60) NOT NULL,
  `fs_dev` varchar(60) NOT NULL,
  `fs_mnt` varchar(200) NOT NULL,
  `fs_mntopt` varchar(100) NOT NULL,
  `fs_type` varchar(20) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `new_index` (`fs_svcname`,`fs_mnt`)
) ENGINE=InnoDB AUTO_INCREMENT=5369 DEFAULT CHARSET=latin1;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `svc_res_ip`
--

DROP TABLE IF EXISTS `svc_res_ip`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `svc_res_ip` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `ip_svcname` varchar(60) NOT NULL,
  `ip_name` varchar(60) NOT NULL,
  `ip_dev` varchar(60) NOT NULL,
  `ip_node` varchar(100) NOT NULL,
  `ip_netmask` varchar(60) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `new_index` (`ip_svcname`,`ip_node`,`ip_name`,`ip_dev`,`ip_netmask`)
) ENGINE=InnoDB AUTO_INCREMENT=14925 DEFAULT CHARSET=latin1;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `svc_res_sync`
--

DROP TABLE IF EXISTS `svc_res_sync`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `svc_res_sync` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `sync_svcname` varchar(60) NOT NULL,
  `sync_src` varchar(200) NOT NULL,
  `sync_dst` varchar(100) NOT NULL,
  `sync_exclude` varchar(200) DEFAULT NULL,
  `sync_dstfs` varchar(100) DEFAULT NULL,
  `sync_prdtarget` varchar(100) DEFAULT '',
  `sync_bwlimit` varchar(20) DEFAULT NULL,
  `sync_snap` varchar(10) DEFAULT NULL,
  `sync_drptarget` varchar(100) DEFAULT '',
  PRIMARY KEY (`id`),
  UNIQUE KEY `new_index` (`sync_svcname`,`sync_src`,`sync_dst`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `svcdisks`
--

DROP TABLE IF EXISTS `svcdisks`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `svcdisks` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `disk_id` varchar(120) DEFAULT NULL,
  `disk_svcname` varchar(60) DEFAULT NULL,
  `disk_nodename` varchar(60) DEFAULT NULL,
  `disk_size` int(11) NOT NULL DEFAULT '0',
  `disk_vendor` varchar(60) DEFAULT NULL,
  `disk_model` varchar(60) DEFAULT NULL,
  `disk_dg` varchar(60) DEFAULT NULL,
  `disk_updated` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `disk_local` varchar(1) DEFAULT 'T',
  `disk_used` int(11) NOT NULL DEFAULT '0',
  `disk_region` varchar(32) DEFAULT '0',
  PRIMARY KEY (`id`),
  UNIQUE KEY `new_index` (`disk_id`,`disk_svcname`,`disk_nodename`,`disk_dg`) USING BTREE,
  KEY `svcdisks_k1` (`disk_nodename`,`disk_svcname`)
) ENGINE=InnoDB AUTO_INCREMENT=7339651 DEFAULT CHARSET=utf8 COMMENT='disks used by services';
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `svcmon`
--

DROP TABLE IF EXISTS `svcmon`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `svcmon` (
  `mon_svcname` varchar(30) DEFAULT NULL,
  `mon_svctype` varchar(10) DEFAULT NULL,
  `mon_drptype` varchar(10) DEFAULT NULL,
  `mon_nodname` varchar(50) DEFAULT NULL,
  `mon_nodtype` varchar(10) DEFAULT NULL,
  `mon_nodmode` varchar(10) DEFAULT NULL,
  `mon_ipstatus` varchar(10) DEFAULT 'undef',
  `mon_fsstatus` varchar(10) DEFAULT 'undef',
  `mon_prinodes` varchar(255) DEFAULT NULL,
  `mon_updated` datetime DEFAULT NULL,
  `mon_hostid` varchar(30) DEFAULT NULL,
  `ID` int(11) NOT NULL AUTO_INCREMENT,
  `mon_frozen` int(11) DEFAULT NULL,
  `mon_frozentxt` varchar(255) DEFAULT NULL,
  `mon_ipdetail` varchar(5000) DEFAULT NULL,
  `mon_changed` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `mon_diskstatus` varchar(10) DEFAULT 'undef',
  `mon_containerstatus` varchar(10) DEFAULT 'undef',
  `mon_overallstatus` varchar(10) DEFAULT 'undef',
  `mon_syncstatus` varchar(10) DEFAULT 'undef',
  `mon_appstatus` varchar(10) DEFAULT 'undef',
  `mon_hbstatus` varchar(10) DEFAULT NULL,
  `mon_availstatus` varchar(10) DEFAULT 'undef',
  `mon_vmname` varchar(50) DEFAULT '',
  `mon_guestos` varchar(30) DEFAULT NULL,
  `mon_vmem` int(11) DEFAULT '0',
  `mon_vcpus` float DEFAULT '0',
  `mon_containerpath` varchar(512) DEFAULT NULL,
  `mon_vmtype` varchar(10) DEFAULT NULL,
  `mon_sharestatus` varchar(10) DEFAULT 'undef',
  PRIMARY KEY (`ID`),
  UNIQUE KEY `mon_svcname_5` (`mon_svcname`,`mon_nodname`,`mon_vmname`),
  KEY `mon_nodname` (`mon_nodname`),
  KEY `mon_svcname` (`mon_svcname`)
) ENGINE=InnoDB AUTO_INCREMENT=253504100 DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `svcmon_log`
--

DROP TABLE IF EXISTS `svcmon_log`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `svcmon_log` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `mon_svcname` varchar(60) DEFAULT NULL,
  `mon_nodname` varchar(60) DEFAULT NULL,
  `mon_overallstatus` enum('up','down','warn','n/a','undef','stdby up','stdby down') DEFAULT 'undef',
  `mon_ipstatus` enum('up','down','warn','n/a','undef','stdby up','stdby down') DEFAULT 'undef',
  `mon_fsstatus` enum('up','down','warn','n/a','undef','stdby up','stdby down') DEFAULT 'undef',
  `mon_diskstatus` enum('up','down','warn','n/a','undef','stdby up','stdby down') DEFAULT 'undef',
  `mon_containerstatus` enum('up','down','warn','n/a','undef','stdby up','stdby down') DEFAULT 'undef',
  `mon_syncstatus` enum('up','down','warn','n/a','undef','stdby up','stdby down') DEFAULT 'undef',
  `mon_appstatus` enum('up','down','warn','n/a','undef','stdby up','stdby down') DEFAULT 'undef',
  `mon_begin` datetime NOT NULL,
  `mon_end` datetime NOT NULL,
  `mon_hbstatus` enum('up','down','warn','n/a','undef','stdby up','stdby down') DEFAULT 'undef',
  `mon_availstatus` enum('up','down','warn','n/a','undef','stdby up','stdby down') DEFAULT 'undef',
  `mon_sharestatus` varchar(10) DEFAULT 'undef',
  PRIMARY KEY (`id`),
  KEY `mon_svcname` (`mon_svcname`),
  KEY `mon_nodname` (`mon_nodname`),
  KEY `mon_overallstatus` (`mon_overallstatus`)
) ENGINE=InnoDB AUTO_INCREMENT=3324868 DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `svcmon_log_ack`
--

DROP TABLE IF EXISTS `svcmon_log_ack`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `svcmon_log_ack` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `mon_svcname` varchar(60) NOT NULL,
  `mon_nodname` varchar(50) NOT NULL,
  `mon_begin` datetime NOT NULL,
  `mon_end` datetime NOT NULL,
  `mon_comment` text NOT NULL,
  `mon_acked_by` varchar(100) NOT NULL,
  `mon_acked_on` datetime NOT NULL,
  `mon_account` tinyint(1) NOT NULL DEFAULT '1',
  PRIMARY KEY (`id`),
  UNIQUE KEY `key_1` (`mon_svcname`,`mon_nodname`,`mon_begin`,`mon_end`),
  KEY `mon_svcname` (`mon_svcname`),
  KEY `mon_nodname` (`mon_nodname`),
  KEY `mon_begin` (`mon_begin`),
  KEY `mon_end` (`mon_end`)
) ENGINE=InnoDB AUTO_INCREMENT=393 DEFAULT CHARSET=latin1;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `svcmon_log_ack_periodic`
--

DROP TABLE IF EXISTS `svcmon_log_ack_periodic`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `svcmon_log_ack_periodic` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `mon_svcname` varchar(60) NOT NULL,
  `mon_begin` datetime NOT NULL,
  `mon_end` datetime NOT NULL,
  `mon_period` varchar(10) DEFAULT '',
  `mon_comment` text NOT NULL,
  `mon_acked_by` varchar(100) NOT NULL,
  `mon_acked_on` datetime NOT NULL,
  `mon_account` int(11) NOT NULL DEFAULT '1',
  PRIMARY KEY (`id`),
  UNIQUE KEY `key_1` (`mon_svcname`,`mon_begin`,`mon_end`),
  KEY `mon_svcname` (`mon_svcname`),
  KEY `mon_begin` (`mon_begin`),
  KEY `mon_end` (`mon_end`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `switches`
--

DROP TABLE IF EXISTS `switches`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `switches` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `sw_name` varchar(64) NOT NULL,
  `sw_slot` int(11) DEFAULT NULL,
  `sw_port` int(11) DEFAULT NULL,
  `sw_portspeed` int(11) DEFAULT NULL,
  `sw_portnego` varchar(1) DEFAULT '',
  `sw_porttype` varchar(16) DEFAULT '',
  `sw_portstate` varchar(16) DEFAULT '',
  `sw_portname` varchar(16) DEFAULT '',
  `sw_rportname` varchar(16) DEFAULT '',
  `sw_updated` datetime NOT NULL,
  `sw_fabric` varchar(128) DEFAULT NULL,
  `sw_index` int(11) DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `idx1` (`sw_name`,`sw_slot`,`sw_port`,`sw_rportname`),
  KEY `idx2` (`sw_portname`,`sw_rportname`)
) ENGINE=InnoDB AUTO_INCREMENT=1674407 DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `sym_upload`
--

DROP TABLE IF EXISTS `sym_upload`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `sym_upload` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `archive` varchar(512) DEFAULT NULL,
  `added` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `batched` int(11) DEFAULT '0',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `tmp`
--

DROP TABLE IF EXISTS `tmp`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `tmp` (
  `id` int(11) NOT NULL DEFAULT '0'
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `tmp_comp_log`
--

DROP TABLE IF EXISTS `tmp_comp_log`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `tmp_comp_log` (
  `run_date` datetime,
  `run_nodename` varchar(64) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `tmpmd5`
--

DROP TABLE IF EXISTS `tmpmd5`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `tmpmd5` (
  `rset_md5` varchar(32) DEFAULT NULL,
  KEY `idx1` (`rset_md5`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `u_inc`
--

DROP TABLE IF EXISTS `u_inc`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `u_inc` (
  `inc` double DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `upc_dashboard`
--

DROP TABLE IF EXISTS `upc_dashboard`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `upc_dashboard` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `upc_user_id` int(11) NOT NULL,
  `upc_dashboard` varchar(100) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `index_1` (`upc_user_id`,`upc_dashboard`)
) ENGINE=InnoDB AUTO_INCREMENT=115 DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `user_prefs_columns`
--

DROP TABLE IF EXISTS `user_prefs_columns`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `user_prefs_columns` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `upc_user_id` int(11) NOT NULL,
  `upc_table` varchar(30) NOT NULL,
  `upc_field` varchar(30) NOT NULL,
  `upc_visible` tinyint(1) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `idx1` (`upc_user_id`,`upc_table`,`upc_field`)
) ENGINE=InnoDB AUTO_INCREMENT=2857 DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Temporary table structure for view `v_action_queue`
--

DROP TABLE IF EXISTS `v_action_queue`;
/*!50001 DROP VIEW IF EXISTS `v_action_queue`*/;
/*!50001 CREATE TABLE `v_action_queue` (
  `id` int(11),
  `status` varchar(1),
  `command` text,
  `date_queued` timestamp,
  `date_dequeued` timestamp,
  `ret` int(11),
  `stdout` text,
  `stderr` text,
  `nodename` varchar(128),
  `svcname` varchar(128),
  `action_type` varchar(8),
  `user_id` int(11),
  `form_id` int(11),
  `username` varchar(257)
) ENGINE=MyISAM */;

--
-- Temporary table structure for view `v_apps`
--

DROP TABLE IF EXISTS `v_apps`;
/*!50001 DROP VIEW IF EXISTS `v_apps`*/;
/*!50001 CREATE TABLE `v_apps` (
  `id` int(11),
  `app` varchar(64),
  `roles` text,
  `responsibles` text,
  `mailto` text
) ENGINE=MyISAM */;

--
-- Temporary table structure for view `v_apps_flat`
--

DROP TABLE IF EXISTS `v_apps_flat`;
/*!50001 DROP VIEW IF EXISTS `v_apps_flat`*/;
/*!50001 CREATE TABLE `v_apps_flat` (
  `id` int(11),
  `app` varchar(64),
  `role` varchar(512),
  `responsible` varchar(257),
  `email` varchar(512)
) ENGINE=MyISAM */;

--
-- Temporary table structure for view `v_billing`
--

DROP TABLE IF EXISTS `v_billing`;
/*!50001 DROP VIEW IF EXISTS `v_billing`*/;
/*!50001 CREATE TABLE `v_billing` (
  `id` int(11),
  `svc_name` varchar(60),
  `os_name` varchar(50),
  `svc_app` varchar(64),
  `bill_cost` float
) ENGINE=MyISAM */;

--
-- Temporary table structure for view `v_billing_per_app`
--

DROP TABLE IF EXISTS `v_billing_per_app`;
/*!50001 DROP VIEW IF EXISTS `v_billing_per_app`*/;
/*!50001 CREATE TABLE `v_billing_per_app` (
  `id` int(11),
  `nb` bigint(21),
  `cost` double,
  `svc_app` varchar(64),
  `os_list` text,
  `svc_list` text
) ENGINE=MyISAM */;

--
-- Temporary table structure for view `v_billing_per_os`
--

DROP TABLE IF EXISTS `v_billing_per_os`;
/*!50001 DROP VIEW IF EXISTS `v_billing_per_os`*/;
/*!50001 CREATE TABLE `v_billing_per_os` (
  `id` int(11),
  `nb` bigint(21),
  `cost` double,
  `os_name` varchar(50),
  `app_list` text,
  `svc_list` text
) ENGINE=MyISAM */;

--
-- Temporary table structure for view `v_checks`
--

DROP TABLE IF EXISTS `v_checks`;
/*!50001 DROP VIEW IF EXISTS `v_checks`*/;
/*!50001 CREATE TABLE `v_checks` (
  `id` int(11),
  `chk_nodename` varchar(50),
  `chk_svcname` varchar(50),
  `chk_type` varchar(10),
  `chk_updated` timestamp,
  `chk_value` int(11),
  `chk_created` timestamp,
  `chk_instance` varchar(100),
  `chk_low` bigint(11),
  `chk_high` bigint(11)
) ENGINE=MyISAM */;

--
-- Temporary table structure for view `v_checks_nodes`
--

DROP TABLE IF EXISTS `v_checks_nodes`;
/*!50001 DROP VIEW IF EXISTS `v_checks_nodes`*/;
/*!50001 CREATE TABLE `v_checks_nodes` (
  `id` int(11),
  `chk_nodename` varchar(50),
  `chk_svcname` varchar(50),
  `chk_type` varchar(10),
  `chk_updated` timestamp,
  `chk_value` int(11),
  `chk_created` timestamp,
  `chk_instance` varchar(100),
  `chk_low` bigint(11),
  `chk_high` bigint(11),
  `nodename` varchar(60),
  `loc_country` varchar(20),
  `loc_city` varchar(50),
  `loc_addr` varchar(100),
  `loc_building` varchar(50),
  `loc_floor` varchar(5),
  `loc_room` varchar(30),
  `loc_rack` varchar(10),
  `cpu_freq` varchar(10),
  `cpu_cores` int(11),
  `cpu_dies` int(11),
  `cpu_vendor` varchar(20),
  `cpu_model` varchar(50),
  `mem_banks` int(11),
  `mem_slots` int(11),
  `mem_bytes` int(11),
  `os_name` varchar(50),
  `os_release` varchar(64),
  `os_update` varchar(10),
  `os_segment` varchar(10),
  `os_arch` varchar(10),
  `os_vendor` varchar(20),
  `os_kernel` varchar(32),
  `loc_zip` varchar(10),
  `team_responsible` varchar(32),
  `serial` varchar(30),
  `model` varchar(50),
  `type` varchar(15),
  `warranty_end` datetime,
  `status` varchar(15),
  `role` varchar(20),
  `environnement` varchar(20),
  `power_cabinet1` varchar(20),
  `power_cabinet2` varchar(20),
  `power_supply_nb` int(11),
  `power_protect` varchar(20),
  `power_protect_breaker` varchar(20),
  `power_breaker1` varchar(20),
  `power_breaker2` varchar(20),
  `os_concat` varchar(147)
) ENGINE=MyISAM */;

--
-- Temporary table structure for view `v_comp_explicit_rulesets`
--

DROP TABLE IF EXISTS `v_comp_explicit_rulesets`;
/*!50001 DROP VIEW IF EXISTS `v_comp_explicit_rulesets`*/;
/*!50001 CREATE TABLE `v_comp_explicit_rulesets` (
  `id` int(11),
  `ruleset_name` varchar(100),
  `variables` text
) ENGINE=MyISAM */;

--
-- Temporary table structure for view `v_comp_module_status_current_week`
--

DROP TABLE IF EXISTS `v_comp_module_status_current_week`;
/*!50001 DROP VIEW IF EXISTS `v_comp_module_status_current_week`*/;
/*!50001 CREATE TABLE `v_comp_module_status_current_week` (
  `id` int(11),
  `year` int(4),
  `week` int(2),
  `run_module` varchar(64),
  `nb_ok` decimal(23,0),
  `nb_nok` decimal(23,0),
  `nb_na` decimal(23,0)
) ENGINE=MyISAM */;

--
-- Temporary table structure for view `v_comp_module_status_weekly`
--

DROP TABLE IF EXISTS `v_comp_module_status_weekly`;
/*!50001 DROP VIEW IF EXISTS `v_comp_module_status_weekly`*/;
/*!50001 CREATE TABLE `v_comp_module_status_weekly` (
  `id` int(11),
  `year` int(4),
  `week` int(2),
  `run_module` varchar(64),
  `nb_ok` decimal(23,0),
  `nb_nok` decimal(23,0),
  `nb_na` decimal(23,0)
) ENGINE=MyISAM */;

--
-- Temporary table structure for view `v_comp_moduleset_teams_responsible`
--

DROP TABLE IF EXISTS `v_comp_moduleset_teams_responsible`;
/*!50001 DROP VIEW IF EXISTS `v_comp_moduleset_teams_responsible`*/;
/*!50001 CREATE TABLE `v_comp_moduleset_teams_responsible` (
  `modset_id` int(11),
  `teams_responsible` text
) ENGINE=MyISAM */;

--
-- Temporary table structure for view `v_comp_node_status_current_week`
--

DROP TABLE IF EXISTS `v_comp_node_status_current_week`;
/*!50001 DROP VIEW IF EXISTS `v_comp_node_status_current_week`*/;
/*!50001 CREATE TABLE `v_comp_node_status_current_week` (
  `id` int(11),
  `year` int(4),
  `week` int(2),
  `run_nodename` varchar(64),
  `nb_ok` decimal(23,0),
  `nb_nok` decimal(23,0),
  `nb_na` decimal(23,0)
) ENGINE=MyISAM */;

--
-- Temporary table structure for view `v_comp_node_status_weekly`
--

DROP TABLE IF EXISTS `v_comp_node_status_weekly`;
/*!50001 DROP VIEW IF EXISTS `v_comp_node_status_weekly`*/;
/*!50001 CREATE TABLE `v_comp_node_status_weekly` (
  `id` int(11),
  `year` int(4),
  `week` int(2),
  `run_nodename` varchar(64),
  `nb_ok` decimal(23,0),
  `nb_nok` decimal(23,0),
  `nb_na` decimal(23,0)
) ENGINE=MyISAM */;

--
-- Temporary table structure for view `v_comp_nodes`
--

DROP TABLE IF EXISTS `v_comp_nodes`;
/*!50001 DROP VIEW IF EXISTS `v_comp_nodes`*/;
/*!50001 CREATE TABLE `v_comp_nodes` (
  `nodename` varchar(60),
  `fqdn` varchar(200),
  `loc_country` varchar(20),
  `loc_city` varchar(50),
  `loc_addr` varchar(100),
  `loc_building` varchar(50),
  `loc_floor` varchar(5),
  `loc_room` varchar(30),
  `loc_rack` varchar(10),
  `id` int(11),
  `cpu_freq` varchar(10),
  `cpu_cores` int(11),
  `cpu_dies` int(11),
  `cpu_vendor` varchar(20),
  `cpu_model` varchar(50),
  `mem_banks` int(11),
  `mem_slots` int(11),
  `mem_bytes` int(11),
  `os_name` varchar(50),
  `os_release` varchar(64),
  `os_update` varchar(10),
  `os_segment` varchar(10),
  `os_arch` varchar(10),
  `os_vendor` varchar(20),
  `os_kernel` varchar(32),
  `loc_zip` varchar(10),
  `version` varchar(20),
  `listener_port` int(11),
  `team_responsible` varchar(32),
  `team_integ` varchar(32),
  `team_support` varchar(32),
  `project` varchar(64),
  `serial` varchar(30),
  `model` varchar(50),
  `type` varchar(15),
  `warranty_end` datetime,
  `maintenance_end` datetime,
  `status` varchar(15),
  `role` varchar(20),
  `environnement` varchar(20),
  `host_mode` varchar(6),
  `power_cabinet1` varchar(20),
  `power_cabinet2` varchar(20),
  `power_supply_nb` int(11),
  `power_protect` varchar(20),
  `power_protect_breaker` varchar(20),
  `power_breaker1` varchar(20),
  `power_breaker2` varchar(20),
  `os_concat` varchar(147),
  `updated` timestamp,
  `enclosure` varchar(64),
  `hw_obs_warn_date` datetime,
  `hw_obs_alert_date` datetime,
  `os_obs_warn_date` datetime,
  `os_obs_alert_date` datetime,
  `hvpool` varchar(64),
  `hv` varchar(128),
  `hvvdc` varchar(64),
  `rulesets` text,
  `modulesets` text
) ENGINE=MyISAM */;

--
-- Temporary table structure for view `v_comp_rulesets`
--

DROP TABLE IF EXISTS `v_comp_rulesets`;
/*!50001 DROP VIEW IF EXISTS `v_comp_rulesets`*/;
/*!50001 CREATE TABLE `v_comp_rulesets` (
  `ruleset_id` int(11),
  `ruleset_name` varchar(100),
  `ruleset_type` varchar(10),
  `ruleset_public` varchar(1),
  `teams_responsible` text,
  `encap_rset` varchar(100),
  `encap_rset_id` int(11),
  `id` int(11),
  `var_name` varchar(60),
  `var_class` varchar(60),
  `var_value` text,
  `var_author` varchar(100),
  `var_updated` timestamp,
  `fset_id` int(11),
  `fset_name` varchar(100)
) ENGINE=MyISAM */;

--
-- Temporary table structure for view `v_comp_status_weekly`
--

DROP TABLE IF EXISTS `v_comp_status_weekly`;
/*!50001 DROP VIEW IF EXISTS `v_comp_status_weekly`*/;
/*!50001 CREATE TABLE `v_comp_status_weekly` (
  `id` int(11),
  `run_nodename` varchar(64),
  `run_module` varchar(64),
  `run_status` int(11),
  `year` int(4),
  `week` int(2)
) ENGINE=MyISAM */;

--
-- Temporary table structure for view `v_disk_app`
--

DROP TABLE IF EXISTS `v_disk_app`;
/*!50001 DROP VIEW IF EXISTS `v_disk_app`*/;
/*!50001 CREATE TABLE `v_disk_app` (
  `id` int(11),
  `disk_id` varchar(120),
  `disk_region` varchar(32),
  `disk_svcname` varchar(60),
  `disk_nodename` varchar(60),
  `disk_vendor` varchar(60),
  `disk_model` varchar(60),
  `disk_dg` varchar(60),
  `svcdisk_updated` timestamp,
  `svcdisk_id` int(11),
  `disk_local` varchar(1),
  `app` varchar(64),
  `disk_used` int(11),
  `disk_size` int(11),
  `disk_arrayid` varchar(300),
  `disk_group` varchar(60),
  `disk_devid` varchar(60),
  `disk_name` varchar(120),
  `disk_alloc` int(11),
  `disk_updated` timestamp,
  `disk_raid` varchar(24),
  `disk_level` int(11)
) ENGINE=MyISAM */;

--
-- Temporary table structure for view `v_disk_app_dedup`
--

DROP TABLE IF EXISTS `v_disk_app_dedup`;
/*!50001 DROP VIEW IF EXISTS `v_disk_app_dedup`*/;
/*!50001 CREATE TABLE `v_disk_app_dedup` (
  `app` varchar(64),
  `disk_used` int(11),
  `disk_size` int(11),
  `disk_arrayid` varchar(300),
  `disk_group` varchar(60)
) ENGINE=MyISAM */;

--
-- Temporary table structure for view `v_disk_quota`
--

DROP TABLE IF EXISTS `v_disk_quota`;
/*!50001 DROP VIEW IF EXISTS `v_disk_quota`*/;
/*!50001 CREATE TABLE `v_disk_quota` (
  `id` int(11),
  `array_id` int(11),
  `dg_id` int(11),
  `app_id` int(11),
  `array_name` varchar(300),
  `dg_name` varchar(60),
  `dg_free` int(11),
  `dg_size` int(11),
  `dg_used` int(11),
  `dg_reserved` int(11),
  `dg_reservable` bigint(20),
  `array_model` varchar(30),
  `app` varchar(64),
  `quota` decimal(32,0),
  `quota_used` decimal(32,0)
) ENGINE=MyISAM */;

--
-- Temporary table structure for view `v_disks_app`
--

DROP TABLE IF EXISTS `v_disks_app`;
/*!50001 DROP VIEW IF EXISTS `v_disks_app`*/;
/*!50001 CREATE TABLE `v_disks_app` (
  `app` varchar(64),
  `disk_used` decimal(32,0),
  `disk_arrayid` varchar(300),
  `disk_group` varchar(60)
) ENGINE=MyISAM */;

--
-- Temporary table structure for view `v_flex_status`
--

DROP TABLE IF EXISTS `v_flex_status`;
/*!50001 DROP VIEW IF EXISTS `v_flex_status`*/;
/*!50001 CREATE TABLE `v_flex_status` (
  `id` int(11),
  `svc_name` varchar(30),
  `svc_flex_min_nodes` int(11),
  `svc_flex_max_nodes` int(11),
  `svc_flex_cpu_low_threshold` int(11),
  `svc_flex_cpu_high_threshold` int(11),
  `n` bigint(21),
  `up` bigint(21),
  `cpu` double
) ENGINE=MyISAM */;

--
-- Temporary table structure for view `v_forms`
--

DROP TABLE IF EXISTS `v_forms`;
/*!50001 DROP VIEW IF EXISTS `v_forms`*/;
/*!50001 CREATE TABLE `v_forms` (
  `id` int(11),
  `form_name` varchar(100),
  `form_yaml` text,
  `form_author` varchar(100),
  `form_created` timestamp,
  `form_type` enum('obj','custo','folder','generic'),
  `form_folder` varchar(200),
  `form_team_publication` text,
  `form_team_responsible` text
) ENGINE=MyISAM */;

--
-- Temporary table structure for view `v_gen_filterset_teams_responsible`
--

DROP TABLE IF EXISTS `v_gen_filterset_teams_responsible`;
/*!50001 DROP VIEW IF EXISTS `v_gen_filterset_teams_responsible`*/;
/*!50001 CREATE TABLE `v_gen_filterset_teams_responsible` (
  `fset_id` int(11),
  `teams_responsible` text
) ENGINE=MyISAM */;

--
-- Temporary table structure for view `v_gen_filtersets`
--

DROP TABLE IF EXISTS `v_gen_filtersets`;
/*!50001 DROP VIEW IF EXISTS `v_gen_filtersets`*/;
/*!50001 CREATE TABLE `v_gen_filtersets` (
  `fset_name` varchar(100),
  `fset_updated` timestamp,
  `fset_author` varchar(100),
  `fset_id` int(11),
  `join_id` int(11),
  `f_order` int(11),
  `f_id` int(11),
  `encap_fset_id` int(11),
  `encap_fset_name` varchar(100),
  `f_log_op` varchar(8),
  `id` int(11),
  `f_table` varchar(30),
  `f_field` varchar(30),
  `f_value` varchar(256),
  `f_updated` timestamp,
  `f_author` varchar(100),
  `f_op` varchar(8)
) ENGINE=MyISAM */;

--
-- Temporary table structure for view `v_lifecycle_os_name`
--

DROP TABLE IF EXISTS `v_lifecycle_os_name`;
/*!50001 DROP VIEW IF EXISTS `v_lifecycle_os_name`*/;
/*!50001 CREATE TABLE `v_lifecycle_os_name` (
  `id` int(11),
  `fset_id` int(11),
  `lc_date` date,
  `lc_count` decimal(32,0),
  `lc_os_name` varchar(60)
) ENGINE=MyISAM */;

--
-- Temporary table structure for view `v_nb_services`
--

DROP TABLE IF EXISTS `v_nb_services`;
/*!50001 DROP VIEW IF EXISTS `v_nb_services`*/;
/*!50001 CREATE TABLE `v_nb_services` (
  `nb_svc` bigint(21)
) ENGINE=MyISAM */;

--
-- Temporary table structure for view `v_network_segments`
--

DROP TABLE IF EXISTS `v_network_segments`;
/*!50001 DROP VIEW IF EXISTS `v_network_segments`*/;
/*!50001 CREATE TABLE `v_network_segments` (
  `id` int(11),
  `net_id` int(11),
  `seg_type` enum('dynamic','static'),
  `seg_begin` varchar(40),
  `seg_end` varchar(40),
  `teams_responsible` text
) ENGINE=MyISAM */;

--
-- Temporary table structure for view `v_nodes`
--

DROP TABLE IF EXISTS `v_nodes`;
/*!50001 DROP VIEW IF EXISTS `v_nodes`*/;
/*!50001 CREATE TABLE `v_nodes` (
  `nodename` varchar(60),
  `fqdn` varchar(200),
  `loc_country` varchar(20),
  `loc_city` varchar(50),
  `loc_addr` varchar(100),
  `loc_building` varchar(50),
  `loc_floor` varchar(5),
  `loc_room` varchar(30),
  `loc_rack` varchar(10),
  `id` int(11),
  `cpu_freq` varchar(10),
  `cpu_cores` int(11),
  `cpu_dies` int(11),
  `cpu_vendor` varchar(20),
  `cpu_model` varchar(50),
  `mem_banks` int(11),
  `mem_slots` int(11),
  `mem_bytes` int(11),
  `os_name` varchar(50),
  `os_release` varchar(64),
  `os_update` varchar(10),
  `os_segment` varchar(10),
  `os_arch` varchar(10),
  `os_vendor` varchar(20),
  `os_kernel` varchar(32),
  `loc_zip` varchar(10),
  `version` varchar(20),
  `listener_port` int(11),
  `team_responsible` varchar(32),
  `team_integ` varchar(32),
  `team_support` varchar(32),
  `project` varchar(64),
  `serial` varchar(30),
  `model` varchar(50),
  `type` varchar(15),
  `warranty_end` datetime,
  `maintenance_end` datetime,
  `status` varchar(15),
  `role` varchar(20),
  `environnement` varchar(20),
  `host_mode` varchar(6),
  `power_cabinet1` varchar(20),
  `power_cabinet2` varchar(20),
  `power_supply_nb` int(11),
  `power_protect` varchar(20),
  `power_protect_breaker` varchar(20),
  `power_breaker1` varchar(20),
  `power_breaker2` varchar(20),
  `os_concat` varchar(147),
  `updated` timestamp,
  `enclosure` varchar(64),
  `hw_obs_warn_date` datetime,
  `hw_obs_alert_date` datetime,
  `os_obs_warn_date` datetime,
  `os_obs_alert_date` datetime,
  `hvpool` varchar(64),
  `hv` varchar(128),
  `hvvdc` varchar(64)
) ENGINE=MyISAM */;

--
-- Temporary table structure for view `v_outdated_services`
--

DROP TABLE IF EXISTS `v_outdated_services`;
/*!50001 DROP VIEW IF EXISTS `v_outdated_services`*/;
/*!50001 CREATE TABLE `v_outdated_services` (
  `svcname` varchar(30),
  `uptodate` decimal(23,0)
) ENGINE=MyISAM */;

--
-- Temporary table structure for view `v_packages_nodes`
--

DROP TABLE IF EXISTS `v_packages_nodes`;
/*!50001 DROP VIEW IF EXISTS `v_packages_nodes`*/;
/*!50001 CREATE TABLE `v_packages_nodes` (
  `id` int(11),
  `pkg_nodename` varchar(60),
  `pkg_name` varchar(100),
  `pkg_version` varchar(64),
  `pkg_arch` varchar(8),
  `pkg_updated` timestamp,
  `nodename` varchar(60),
  `loc_country` varchar(20),
  `loc_city` varchar(50),
  `loc_addr` varchar(100),
  `loc_building` varchar(50),
  `loc_floor` varchar(5),
  `loc_room` varchar(30),
  `loc_rack` varchar(10),
  `cpu_freq` varchar(10),
  `cpu_cores` int(11),
  `cpu_dies` int(11),
  `cpu_vendor` varchar(20),
  `cpu_model` varchar(50),
  `mem_banks` int(11),
  `mem_slots` int(11),
  `mem_bytes` int(11),
  `os_name` varchar(50),
  `os_release` varchar(64),
  `os_update` varchar(10),
  `os_segment` varchar(10),
  `os_arch` varchar(10),
  `os_vendor` varchar(20),
  `os_kernel` varchar(32),
  `loc_zip` varchar(10),
  `team_responsible` varchar(32),
  `serial` varchar(30),
  `model` varchar(50),
  `type` varchar(15),
  `warranty_end` datetime,
  `status` varchar(15),
  `role` varchar(20),
  `environnement` varchar(20),
  `power_cabinet1` varchar(20),
  `power_cabinet2` varchar(20),
  `power_supply_nb` int(11),
  `power_protect` varchar(20),
  `power_protect_breaker` varchar(20),
  `power_breaker1` varchar(20),
  `power_breaker2` varchar(20),
  `os_concat` varchar(147)
) ENGINE=MyISAM */;

--
-- Temporary table structure for view `v_services`
--

DROP TABLE IF EXISTS `v_services`;
/*!50001 DROP VIEW IF EXISTS `v_services`*/;
/*!50001 CREATE TABLE `v_services` (
  `svc_ha` tinyint(1),
  `svc_status` varchar(10),
  `svc_availstatus` varchar(10),
  `svc_cluster_type` varchar(20),
  `svc_flex_min_nodes` int(11),
  `svc_flex_max_nodes` int(11),
  `svc_flex_cpu_low_threshold` int(11),
  `svc_flex_cpu_high_threshold` int(11),
  `svc_hostid` varchar(30),
  `svc_name` varchar(60),
  `svc_nodes` varchar(1000),
  `svc_drpnode` varchar(30),
  `svc_ipname` varchar(1000),
  `svc_ipdev` varchar(1000),
  `svc_drpipname` varchar(1000),
  `svc_drpipdev` varchar(1000),
  `svc_drptype` varchar(7),
  `svc_fs` varchar(2000),
  `svc_dev` varchar(2000),
  `svc_autostart` varchar(60),
  `svc_mntopt` varchar(2000),
  `svc_scsi` varchar(10),
  `svc_type` varchar(10),
  `svc_drpnodes` varchar(1000),
  `svc_comment` varchar(1000),
  `svc_app` varchar(64),
  `svc_drnoaction` varchar(1),
  `svc_created` timestamp,
  `updated` datetime,
  `cksum` varchar(20),
  `svc_envdate` datetime,
  `svc_containertype` varchar(10),
  `svc_metrocluster` varchar(10),
  `id` int(11),
  `svc_hasec` varchar(512),
  `svc_hapri` varchar(512),
  `svc_hastonith` varchar(512),
  `svc_hastartup` varchar(512),
  `svc_wave` varchar(10),
  `app` varchar(64),
  `responsibles` text,
  `mailto` text
) ENGINE=MyISAM */;

--
-- Temporary table structure for view `v_svc_group_status`
--

DROP TABLE IF EXISTS `v_svc_group_status`;
/*!50001 DROP VIEW IF EXISTS `v_svc_group_status`*/;
/*!50001 CREATE TABLE `v_svc_group_status` (
  `id` int(11),
  `svcname` varchar(30),
  `svctype` varchar(10),
  `groupstatus` text,
  `nodes` text
) ENGINE=MyISAM */;

--
-- Temporary table structure for view `v_svcactions`
--

DROP TABLE IF EXISTS `v_svcactions`;
/*!50001 DROP VIEW IF EXISTS `v_svcactions`*/;
/*!50001 CREATE TABLE `v_svcactions` (
  `cron` tinyint(1),
  `time` datetime,
  `version` varchar(20),
  `svcname` varchar(60),
  `action` varchar(30),
  `status` enum('err','ok','warn'),
  `begin` datetime,
  `end` datetime,
  `hostname` varchar(50),
  `hostid` varchar(30),
  `status_log` text,
  `pid` varchar(32),
  `ID` int(11),
  `ack` tinyint(4),
  `alert` tinyint(1),
  `acked_by` varchar(50),
  `acked_comment` text,
  `acked_date` datetime,
  `svc_ha` tinyint(1),
  `app` varchar(64),
  `mailto` varchar(342),
  `responsibles` varchar(342),
  `nodename` varchar(60),
  `loc_country` varchar(20),
  `loc_city` varchar(50),
  `loc_addr` varchar(100),
  `loc_building` varchar(50),
  `loc_floor` varchar(5),
  `loc_room` varchar(30),
  `loc_rack` varchar(10),
  `cpu_freq` varchar(10),
  `cpu_cores` int(11),
  `cpu_dies` int(11),
  `cpu_vendor` varchar(20),
  `cpu_model` varchar(50),
  `mem_banks` int(11),
  `mem_slots` int(11),
  `mem_bytes` int(11),
  `os_name` varchar(50),
  `os_release` varchar(64),
  `os_update` varchar(10),
  `os_segment` varchar(10),
  `os_arch` varchar(10),
  `os_vendor` varchar(20),
  `os_kernel` varchar(32),
  `loc_zip` varchar(10),
  `team_responsible` varchar(32),
  `team_integ` varchar(32),
  `team_support` varchar(32),
  `project` varchar(64),
  `serial` varchar(30),
  `model` varchar(50),
  `type` varchar(15),
  `warranty_end` datetime,
  `maintenance_end` datetime,
  `asset_status` varchar(15),
  `role` varchar(20),
  `environnement` varchar(20),
  `host_mode` varchar(6),
  `power_supply_nb` int(11),
  `power_cabinet1` varchar(20),
  `power_cabinet2` varchar(20),
  `power_protect` varchar(20),
  `power_protect_breaker` varchar(20),
  `power_breaker1` varchar(20),
  `power_breaker2` varchar(20)
) ENGINE=MyISAM */;

--
-- Temporary table structure for view `v_svcdisks`
--

DROP TABLE IF EXISTS `v_svcdisks`;
/*!50001 DROP VIEW IF EXISTS `v_svcdisks`*/;
/*!50001 CREATE TABLE `v_svcdisks` (
  `id` int(11),
  `disk_id` varchar(120),
  `disk_svcname` varchar(60),
  `disk_nodename` varchar(60),
  `disk_size` int(11),
  `disk_used` int(11),
  `disk_vendor` varchar(60),
  `disk_model` varchar(60),
  `disk_dg` varchar(60),
  `disk_updated` timestamp,
  `disk_devid` varchar(60),
  `disk_name` varchar(120),
  `disk_alloc` int(11),
  `disk_arrayid` varchar(300)
) ENGINE=MyISAM */;

--
-- Temporary table structure for view `v_svcmon`
--

DROP TABLE IF EXISTS `v_svcmon`;
/*!50001 DROP VIEW IF EXISTS `v_svcmon`*/;
/*!50001 CREATE TABLE `v_svcmon` (
  `err` int(11),
  `svc_ha` tinyint(1),
  `svc_cluster_type` varchar(20),
  `svc_status` varchar(10),
  `svc_availstatus` varchar(10),
  `svc_flex_min_nodes` int(11),
  `svc_flex_max_nodes` int(11),
  `svc_flex_cpu_low_threshold` int(11),
  `svc_flex_cpu_high_threshold` int(11),
  `mon_vmname` varchar(50),
  `mon_vmtype` varchar(10),
  `mon_guestos` varchar(30),
  `svc_name` varchar(60),
  `svc_nodes` varchar(1000),
  `svc_drpnode` varchar(30),
  `svc_drpnodes` varchar(1000),
  `svc_drptype` varchar(7),
  `svc_autostart` varchar(60),
  `svc_type` varchar(10),
  `svc_comment` varchar(1000),
  `svc_app` varchar(64),
  `svc_drnoaction` varchar(1),
  `svc_created` timestamp,
  `svc_updated` datetime,
  `svc_envdate` datetime,
  `svc_containertype` varchar(10),
  `svc_metrocluster` varchar(10),
  `mon_vcpus` float,
  `mon_vmem` int(11),
  `mon_svcname` varchar(30),
  `mon_svctype` varchar(10),
  `mon_drptype` varchar(10),
  `mon_nodname` varchar(50),
  `mon_nodtype` varchar(10),
  `mon_nodmode` varchar(10),
  `mon_ipstatus` varchar(10),
  `mon_fsstatus` varchar(10),
  `mon_prinodes` varchar(255),
  `mon_hostid` varchar(30),
  `ID` int(11),
  `mon_frozen` int(11),
  `mon_frozentxt` varchar(255),
  `mon_changed` timestamp,
  `mon_updated` datetime,
  `mon_sharestatus` varchar(10),
  `mon_diskstatus` varchar(10),
  `mon_containerstatus` varchar(10),
  `mon_overallstatus` varchar(10),
  `nodename` varchar(60),
  `listener_port` int(11),
  `version` varchar(20),
  `node_updated` timestamp,
  `loc_country` varchar(20),
  `loc_city` varchar(50),
  `loc_addr` varchar(100),
  `loc_building` varchar(50),
  `loc_floor` varchar(5),
  `loc_room` varchar(30),
  `loc_rack` varchar(10),
  `cpu_freq` varchar(10),
  `cpu_cores` int(11),
  `cpu_dies` int(11),
  `cpu_vendor` varchar(20),
  `cpu_model` varchar(50),
  `mem_banks` int(11),
  `mem_slots` int(11),
  `mem_bytes` int(11),
  `os_name` varchar(50),
  `os_release` varchar(64),
  `os_update` varchar(10),
  `os_segment` varchar(10),
  `os_arch` varchar(10),
  `os_vendor` varchar(20),
  `os_kernel` varchar(32),
  `loc_zip` varchar(10),
  `team_responsible` varchar(32),
  `team_integ` varchar(32),
  `team_support` varchar(32),
  `project` varchar(64),
  `serial` varchar(30),
  `model` varchar(50),
  `type` varchar(15),
  `warranty_end` datetime,
  `maintenance_end` datetime,
  `status` varchar(15),
  `role` varchar(20),
  `environnement` varchar(20),
  `host_mode` varchar(6),
  `power_supply_nb` int(11),
  `power_cabinet1` varchar(20),
  `power_cabinet2` varchar(20),
  `power_protect` varchar(20),
  `power_protect_breaker` varchar(20),
  `power_breaker1` varchar(20),
  `power_breaker2` varchar(20),
  `mon_syncstatus` varchar(10),
  `mon_hbstatus` varchar(10),
  `mon_availstatus` varchar(10),
  `mon_appstatus` varchar(10),
  `responsibles` varchar(342),
  `mailto` varchar(342),
  `enclosure` varchar(64)
) ENGINE=MyISAM */;

--
-- Temporary table structure for view `v_users`
--

DROP TABLE IF EXISTS `v_users`;
/*!50001 DROP VIEW IF EXISTS `v_users`*/;
/*!50001 CREATE TABLE `v_users` (
  `last` datetime,
  `id` int(11),
  `fullname` varchar(257),
  `email` varchar(512),
  `domains` text,
  `manager` decimal(42,0),
  `groups` text,
  `primary_group` varchar(512),
  `lock_filter` varchar(1),
  `fset_name` varchar(100),
  `phone_work` varchar(16)
) ENGINE=MyISAM */;

--
-- Table structure for table `wiki_pages`
--

DROP TABLE IF EXISTS `wiki_pages`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `wiki_pages` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(100) DEFAULT NULL,
  `author` varchar(100) DEFAULT NULL,
  `saved_on` datetime DEFAULT NULL,
  `title` varchar(100) DEFAULT NULL,
  `body` text,
  `change_note` varchar(200) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=44 DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `workflows`
--

DROP TABLE IF EXISTS `workflows`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `workflows` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `form_head_id` int(11) NOT NULL,
  `status` varchar(10) NOT NULL,
  `steps` int(11) NOT NULL,
  `creator` varchar(200) NOT NULL,
  `create_date` datetime NOT NULL,
  `last_assignee` varchar(200) NOT NULL,
  `last_update` datetime NOT NULL,
  `form_md5` varchar(32) DEFAULT NULL,
  `last_form_id` int(11) DEFAULT NULL,
  `last_form_name` varchar(100) DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `idx1` (`form_head_id`)
) ENGINE=InnoDB AUTO_INCREMENT=58 DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client;

--
-- Final view structure for view `v_action_queue`
--

/*!50001 DROP TABLE `v_action_queue`*/;
/*!50001 DROP VIEW IF EXISTS `v_action_queue`*/;
/*!50001 CREATE ALGORITHM=UNDEFINED */
/*!50013 DEFINER=`opensvc`@`%` SQL SECURITY DEFINER */
/*!50001 VIEW `v_action_queue` AS select `a`.`id` AS `id`,`a`.`status` AS `status`,`a`.`command` AS `command`,`a`.`date_queued` AS `date_queued`,`a`.`date_dequeued` AS `date_dequeued`,`a`.`ret` AS `ret`,`a`.`stdout` AS `stdout`,`a`.`stderr` AS `stderr`,`a`.`nodename` AS `nodename`,`a`.`svcname` AS `svcname`,`a`.`action_type` AS `action_type`,`a`.`user_id` AS `user_id`,`a`.`form_id` AS `form_id`,concat(`u`.`first_name`,' ',`u`.`last_name`) AS `username` from (`action_queue` `a` left join `auth_user` `u` on((`a`.`user_id` = `u`.`id`))) */;

--
-- Final view structure for view `v_apps`
--

/*!50001 DROP TABLE `v_apps`*/;
/*!50001 DROP VIEW IF EXISTS `v_apps`*/;
/*!50001 CREATE ALGORITHM=UNDEFINED */
/*!50013 DEFINER=`opensvc`@`%` SQL SECURITY DEFINER */
/*!50001 VIEW `v_apps` AS (select `v_apps_flat`.`id` AS `id`,`v_apps_flat`.`app` AS `app`,group_concat(distinct `v_apps_flat`.`role` separator ', ') AS `roles`,group_concat(distinct `v_apps_flat`.`responsible` separator ', ') AS `responsibles`,group_concat(distinct `v_apps_flat`.`email` separator ', ') AS `mailto` from `v_apps_flat` group by `v_apps_flat`.`app`) */;

--
-- Final view structure for view `v_apps_flat`
--

/*!50001 DROP TABLE `v_apps_flat`*/;
/*!50001 DROP VIEW IF EXISTS `v_apps_flat`*/;
/*!50001 CREATE ALGORITHM=UNDEFINED */
/*!50013 DEFINER=`opensvc`@`%` SQL SECURITY DEFINER */
/*!50001 VIEW `v_apps_flat` AS (select `a`.`id` AS `id`,`a`.`app` AS `app`,`g`.`role` AS `role`,concat_ws(' ',`u`.`first_name`,`u`.`last_name`) AS `responsible`,`u`.`email` AS `email` from ((((`apps` `a` left join `apps_responsibles` `ar` on((`ar`.`app_id` = `a`.`id`))) left join `auth_group` `g` on((`g`.`id` = `ar`.`group_id`))) left join `auth_membership` `am` on((`am`.`group_id` = `g`.`id`))) left join `auth_user` `u` on((`u`.`id` = `am`.`user_id`))) order by `a`.`app`) */;

--
-- Final view structure for view `v_billing`
--

/*!50001 DROP TABLE `v_billing`*/;
/*!50001 DROP VIEW IF EXISTS `v_billing`*/;
/*!50001 CREATE ALGORITHM=UNDEFINED */
/*!50013 DEFINER=`opensvc`@`%` SQL SECURITY DEFINER */
/*!50001 VIEW `v_billing` AS select `m`.`ID` AS `id`,`m`.`svc_name` AS `svc_name`,`m`.`os_name` AS `os_name`,`m`.`svc_app` AS `svc_app`,`b`.`bill_cost` AS `bill_cost` from ((`v_svcmon` `m` join `v_nb_services` `n`) join `billing` `b` on(((convert(`m`.`os_name` using utf8) = `b`.`bill_os_name`) and (`n`.`nb_svc` >= `b`.`bill_min_svc`) and (`n`.`nb_svc` <= `b`.`bill_max_svc`)))) group by `m`.`svc_name` order by `m`.`svc_name` */;

--
-- Final view structure for view `v_billing_per_app`
--

/*!50001 DROP TABLE `v_billing_per_app`*/;
/*!50001 DROP VIEW IF EXISTS `v_billing_per_app`*/;
/*!50001 CREATE ALGORITHM=UNDEFINED */
/*!50013 DEFINER=`opensvc`@`%` SQL SECURITY DEFINER */
/*!50001 VIEW `v_billing_per_app` AS select `v_billing`.`id` AS `id`,count(`v_billing`.`svc_app`) AS `nb`,sum(`v_billing`.`bill_cost`) AS `cost`,`v_billing`.`svc_app` AS `svc_app`,group_concat(distinct `v_billing`.`os_name` separator ',') AS `os_list`,group_concat(`v_billing`.`svc_name` separator ',') AS `svc_list` from `v_billing` group by `v_billing`.`svc_app` order by `v_billing`.`svc_app` */;

--
-- Final view structure for view `v_billing_per_os`
--

/*!50001 DROP TABLE `v_billing_per_os`*/;
/*!50001 DROP VIEW IF EXISTS `v_billing_per_os`*/;
/*!50001 CREATE ALGORITHM=UNDEFINED */
/*!50013 DEFINER=`opensvc`@`%` SQL SECURITY DEFINER */
/*!50001 VIEW `v_billing_per_os` AS select `v_billing`.`id` AS `id`,count(`v_billing`.`os_name`) AS `nb`,sum(`v_billing`.`bill_cost`) AS `cost`,`v_billing`.`os_name` AS `os_name`,group_concat(distinct `v_billing`.`svc_app` separator ',') AS `app_list`,group_concat(`v_billing`.`svc_name` separator ',') AS `svc_list` from `v_billing` group by `v_billing`.`os_name` order by `v_billing`.`os_name` */;

--
-- Final view structure for view `v_checks`
--

/*!50001 DROP TABLE `v_checks`*/;
/*!50001 DROP VIEW IF EXISTS `v_checks`*/;
/*!50001 CREATE ALGORITHM=UNDEFINED */
/*!50013 DEFINER=`opensvc`@`%` SQL SECURITY DEFINER */
/*!50001 VIEW `v_checks` AS select `cl`.`id` AS `id`,`cl`.`chk_nodename` AS `chk_nodename`,`cl`.`chk_svcname` AS `chk_svcname`,`cl`.`chk_type` AS `chk_type`,`cl`.`chk_updated` AS `chk_updated`,`cl`.`chk_value` AS `chk_value`,`cl`.`chk_created` AS `chk_created`,`cl`.`chk_instance` AS `chk_instance`,if((`cs`.`chk_low` is not null),`cs`.`chk_low`,`cd`.`chk_low`) AS `chk_low`,if((`cs`.`chk_high` is not null),`cs`.`chk_high`,`cd`.`chk_high`) AS `chk_high` from ((`checks_live` `cl` left join `checks_settings` `cs` on(((`cl`.`chk_nodename` = `cs`.`chk_nodename`) and (`cl`.`chk_svcname` = `cs`.`chk_svcname`) and (`cl`.`chk_type` = `cs`.`chk_type`) and (`cl`.`chk_instance` = `cs`.`chk_instance`)))) left join `checks_defaults` `cd` on((`cl`.`chk_type` = `cd`.`chk_type`))) */;

--
-- Final view structure for view `v_checks_nodes`
--

/*!50001 DROP TABLE `v_checks_nodes`*/;
/*!50001 DROP VIEW IF EXISTS `v_checks_nodes`*/;
/*!50001 CREATE ALGORITHM=UNDEFINED */
/*!50013 DEFINER=`opensvc`@`%` SQL SECURITY DEFINER */
/*!50001 VIEW `v_checks_nodes` AS select `cl`.`id` AS `id`,`cl`.`chk_nodename` AS `chk_nodename`,`cl`.`chk_svcname` AS `chk_svcname`,`cl`.`chk_type` AS `chk_type`,`cl`.`chk_updated` AS `chk_updated`,`cl`.`chk_value` AS `chk_value`,`cl`.`chk_created` AS `chk_created`,`cl`.`chk_instance` AS `chk_instance`,if((`cs`.`chk_low` is not null),`cs`.`chk_low`,`cd`.`chk_low`) AS `chk_low`,if((`cs`.`chk_high` is not null),`cs`.`chk_high`,`cd`.`chk_high`) AS `chk_high`,`n`.`nodename` AS `nodename`,`n`.`loc_country` AS `loc_country`,`n`.`loc_city` AS `loc_city`,`n`.`loc_addr` AS `loc_addr`,`n`.`loc_building` AS `loc_building`,`n`.`loc_floor` AS `loc_floor`,`n`.`loc_room` AS `loc_room`,`n`.`loc_rack` AS `loc_rack`,`n`.`cpu_freq` AS `cpu_freq`,`n`.`cpu_cores` AS `cpu_cores`,`n`.`cpu_dies` AS `cpu_dies`,`n`.`cpu_vendor` AS `cpu_vendor`,`n`.`cpu_model` AS `cpu_model`,`n`.`mem_banks` AS `mem_banks`,`n`.`mem_slots` AS `mem_slots`,`n`.`mem_bytes` AS `mem_bytes`,`n`.`os_name` AS `os_name`,`n`.`os_release` AS `os_release`,`n`.`os_update` AS `os_update`,`n`.`os_segment` AS `os_segment`,`n`.`os_arch` AS `os_arch`,`n`.`os_vendor` AS `os_vendor`,`n`.`os_kernel` AS `os_kernel`,`n`.`loc_zip` AS `loc_zip`,`n`.`team_responsible` AS `team_responsible`,`n`.`serial` AS `serial`,`n`.`model` AS `model`,`n`.`type` AS `type`,`n`.`warranty_end` AS `warranty_end`,`n`.`status` AS `status`,`n`.`role` AS `role`,`n`.`environnement` AS `environnement`,`n`.`power_cabinet1` AS `power_cabinet1`,`n`.`power_cabinet2` AS `power_cabinet2`,`n`.`power_supply_nb` AS `power_supply_nb`,`n`.`power_protect` AS `power_protect`,`n`.`power_protect_breaker` AS `power_protect_breaker`,`n`.`power_breaker1` AS `power_breaker1`,`n`.`power_breaker2` AS `power_breaker2`,`n`.`os_concat` AS `os_concat` from (((`checks_live` `cl` left join `checks_settings` `cs` on(((`cl`.`chk_nodename` = `cs`.`chk_nodename`) and (`cl`.`chk_svcname` = `cs`.`chk_svcname`) and (`cl`.`chk_type` = `cs`.`chk_type`) and (`cl`.`chk_instance` = `cs`.`chk_instance`)))) join `v_nodes` `n` on((convert(`n`.`nodename` using utf8) = `cl`.`chk_nodename`))) left join `checks_defaults` `cd` on((`cl`.`chk_type` = `cd`.`chk_type`))) */;

--
-- Final view structure for view `v_comp_explicit_rulesets`
--

/*!50001 DROP TABLE `v_comp_explicit_rulesets`*/;
/*!50001 DROP VIEW IF EXISTS `v_comp_explicit_rulesets`*/;
/*!50001 CREATE ALGORITHM=UNDEFINED */
/*!50013 DEFINER=`opensvc`@`%` SQL SECURITY DEFINER */
/*!50001 VIEW `v_comp_explicit_rulesets` AS (select `r`.`id` AS `id`,`r`.`ruleset_name` AS `ruleset_name`,group_concat(distinct concat(`v`.`var_name`,'=',`v`.`var_value`) separator '|') AS `variables` from (`comp_rulesets` `r` left join `comp_rulesets_variables` `v` on((`r`.`id` = `v`.`ruleset_id`))) where (`r`.`ruleset_type` = 'explicit') group by `r`.`id` order by `r`.`ruleset_name`) */;

--
-- Final view structure for view `v_comp_module_status_current_week`
--

/*!50001 DROP TABLE `v_comp_module_status_current_week`*/;
/*!50001 DROP VIEW IF EXISTS `v_comp_module_status_current_week`*/;
/*!50001 CREATE ALGORITHM=UNDEFINED */
/*!50013 DEFINER=`opensvc`@`%` SQL SECURITY DEFINER */
/*!50001 VIEW `v_comp_module_status_current_week` AS (select `v_comp_status_weekly`.`id` AS `id`,`v_comp_status_weekly`.`year` AS `year`,`v_comp_status_weekly`.`week` AS `week`,`v_comp_status_weekly`.`run_module` AS `run_module`,sum(if((`v_comp_status_weekly`.`run_status` = 0),1,0)) AS `nb_ok`,sum(if((`v_comp_status_weekly`.`run_status` = 1),1,0)) AS `nb_nok`,sum(if((`v_comp_status_weekly`.`run_status` = 2),1,0)) AS `nb_na` from `v_comp_status_weekly` where ((`v_comp_status_weekly`.`year` = year(now())) and (`v_comp_status_weekly`.`week` = week(now(),0))) group by `v_comp_status_weekly`.`year`,`v_comp_status_weekly`.`week`,`v_comp_status_weekly`.`run_module`) */;

--
-- Final view structure for view `v_comp_module_status_weekly`
--

/*!50001 DROP TABLE `v_comp_module_status_weekly`*/;
/*!50001 DROP VIEW IF EXISTS `v_comp_module_status_weekly`*/;
/*!50001 CREATE ALGORITHM=UNDEFINED */
/*!50013 DEFINER=`opensvc`@`%` SQL SECURITY DEFINER */
/*!50001 VIEW `v_comp_module_status_weekly` AS (select `v_comp_status_weekly`.`id` AS `id`,`v_comp_status_weekly`.`year` AS `year`,`v_comp_status_weekly`.`week` AS `week`,`v_comp_status_weekly`.`run_module` AS `run_module`,sum(if((`v_comp_status_weekly`.`run_status` = 0),1,0)) AS `nb_ok`,sum(if((`v_comp_status_weekly`.`run_status` = 1),1,0)) AS `nb_nok`,sum(if((`v_comp_status_weekly`.`run_status` = 2),1,0)) AS `nb_na` from `v_comp_status_weekly` group by `v_comp_status_weekly`.`year`,`v_comp_status_weekly`.`week`,`v_comp_status_weekly`.`run_module`) */;

--
-- Final view structure for view `v_comp_moduleset_teams_responsible`
--

/*!50001 DROP TABLE `v_comp_moduleset_teams_responsible`*/;
/*!50001 DROP VIEW IF EXISTS `v_comp_moduleset_teams_responsible`*/;
/*!50001 CREATE ALGORITHM=UNDEFINED */
/*!50013 DEFINER=`opensvc`@`%` SQL SECURITY DEFINER */
/*!50001 VIEW `v_comp_moduleset_teams_responsible` AS (select `m`.`id` AS `modset_id`,group_concat(`g`.`role` separator ', ') AS `teams_responsible` from ((`comp_moduleset` `m` left join `comp_moduleset_team_responsible` `j` on((`m`.`id` = `j`.`modset_id`))) left join `auth_group` `g` on((`j`.`group_id` = `g`.`id`))) group by `m`.`id`) */;

--
-- Final view structure for view `v_comp_node_status_current_week`
--

/*!50001 DROP TABLE `v_comp_node_status_current_week`*/;
/*!50001 DROP VIEW IF EXISTS `v_comp_node_status_current_week`*/;
/*!50001 CREATE ALGORITHM=UNDEFINED */
/*!50013 DEFINER=`opensvc`@`%` SQL SECURITY DEFINER */
/*!50001 VIEW `v_comp_node_status_current_week` AS (select `v_comp_status_weekly`.`id` AS `id`,`v_comp_status_weekly`.`year` AS `year`,`v_comp_status_weekly`.`week` AS `week`,`v_comp_status_weekly`.`run_nodename` AS `run_nodename`,sum(if((`v_comp_status_weekly`.`run_status` = 0),1,0)) AS `nb_ok`,sum(if((`v_comp_status_weekly`.`run_status` = 1),1,0)) AS `nb_nok`,sum(if((`v_comp_status_weekly`.`run_status` = 2),1,0)) AS `nb_na` from `v_comp_status_weekly` where ((`v_comp_status_weekly`.`year` = year(now())) and (`v_comp_status_weekly`.`week` = week(now(),0))) group by `v_comp_status_weekly`.`year`,`v_comp_status_weekly`.`week`,`v_comp_status_weekly`.`run_nodename`) */;

--
-- Final view structure for view `v_comp_node_status_weekly`
--

/*!50001 DROP TABLE `v_comp_node_status_weekly`*/;
/*!50001 DROP VIEW IF EXISTS `v_comp_node_status_weekly`*/;
/*!50001 CREATE ALGORITHM=UNDEFINED */
/*!50013 DEFINER=`opensvc`@`%` SQL SECURITY DEFINER */
/*!50001 VIEW `v_comp_node_status_weekly` AS (select `v_comp_status_weekly`.`id` AS `id`,`v_comp_status_weekly`.`year` AS `year`,`v_comp_status_weekly`.`week` AS `week`,`v_comp_status_weekly`.`run_nodename` AS `run_nodename`,sum(if((`v_comp_status_weekly`.`run_status` = 0),1,0)) AS `nb_ok`,sum(if((`v_comp_status_weekly`.`run_status` = 1),1,0)) AS `nb_nok`,sum(if((`v_comp_status_weekly`.`run_status` = 2),1,0)) AS `nb_na` from `v_comp_status_weekly` group by `v_comp_status_weekly`.`year`,`v_comp_status_weekly`.`week`,`v_comp_status_weekly`.`run_nodename`) */;

--
-- Final view structure for view `v_comp_nodes`
--

/*!50001 DROP TABLE `v_comp_nodes`*/;
/*!50001 DROP VIEW IF EXISTS `v_comp_nodes`*/;
/*!50001 CREATE ALGORITHM=UNDEFINED */
/*!50013 DEFINER=`opensvc`@`%` SQL SECURITY DEFINER */
/*!50001 VIEW `v_comp_nodes` AS (select `n`.`nodename` AS `nodename`,`n`.`fqdn` AS `fqdn`,`n`.`loc_country` AS `loc_country`,`n`.`loc_city` AS `loc_city`,`n`.`loc_addr` AS `loc_addr`,`n`.`loc_building` AS `loc_building`,`n`.`loc_floor` AS `loc_floor`,`n`.`loc_room` AS `loc_room`,`n`.`loc_rack` AS `loc_rack`,`n`.`id` AS `id`,`n`.`cpu_freq` AS `cpu_freq`,`n`.`cpu_cores` AS `cpu_cores`,`n`.`cpu_dies` AS `cpu_dies`,`n`.`cpu_vendor` AS `cpu_vendor`,`n`.`cpu_model` AS `cpu_model`,`n`.`mem_banks` AS `mem_banks`,`n`.`mem_slots` AS `mem_slots`,`n`.`mem_bytes` AS `mem_bytes`,`n`.`os_name` AS `os_name`,`n`.`os_release` AS `os_release`,`n`.`os_update` AS `os_update`,`n`.`os_segment` AS `os_segment`,`n`.`os_arch` AS `os_arch`,`n`.`os_vendor` AS `os_vendor`,`n`.`os_kernel` AS `os_kernel`,`n`.`loc_zip` AS `loc_zip`,`n`.`version` AS `version`,`n`.`listener_port` AS `listener_port`,`n`.`team_responsible` AS `team_responsible`,`n`.`team_integ` AS `team_integ`,`n`.`team_support` AS `team_support`,`n`.`project` AS `project`,`n`.`serial` AS `serial`,`n`.`model` AS `model`,`n`.`type` AS `type`,`n`.`warranty_end` AS `warranty_end`,`n`.`maintenance_end` AS `maintenance_end`,`n`.`status` AS `status`,`n`.`role` AS `role`,`n`.`environnement` AS `environnement`,`n`.`host_mode` AS `host_mode`,`n`.`power_cabinet1` AS `power_cabinet1`,`n`.`power_cabinet2` AS `power_cabinet2`,`n`.`power_supply_nb` AS `power_supply_nb`,`n`.`power_protect` AS `power_protect`,`n`.`power_protect_breaker` AS `power_protect_breaker`,`n`.`power_breaker1` AS `power_breaker1`,`n`.`power_breaker2` AS `power_breaker2`,`n`.`os_concat` AS `os_concat`,`n`.`updated` AS `updated`,`n`.`enclosure` AS `enclosure`,`n`.`hw_obs_warn_date` AS `hw_obs_warn_date`,`n`.`hw_obs_alert_date` AS `hw_obs_alert_date`,`n`.`os_obs_warn_date` AS `os_obs_warn_date`,`n`.`os_obs_alert_date` AS `os_obs_alert_date`,`n`.`hvpool` AS `hvpool`,`n`.`hv` AS `hv`,`n`.`hvvdc` AS `hvvdc`,group_concat(distinct `r`.`ruleset_name` separator ', ') AS `rulesets`,group_concat(distinct `m`.`modset_name` separator ', ') AS `modulesets` from ((((`v_nodes` `n` left join `comp_rulesets_nodes` `rn` on((`n`.`nodename` = `rn`.`nodename`))) left join `comp_rulesets` `r` on((`r`.`id` = `rn`.`ruleset_id`))) left join `comp_node_moduleset` `mn` on((`mn`.`modset_node` = `n`.`nodename`))) left join `comp_moduleset` `m` on((`m`.`id` = `mn`.`modset_id`))) group by `n`.`nodename`) */;

--
-- Final view structure for view `v_comp_rulesets`
--

/*!50001 DROP TABLE `v_comp_rulesets`*/;
/*!50001 DROP VIEW IF EXISTS `v_comp_rulesets`*/;
/*!50001 CREATE ALGORITHM=UNDEFINED */
/*!50013 DEFINER=`opensvc`@`%` SQL SECURITY DEFINER */
/*!50001 VIEW `v_comp_rulesets` AS (select `r`.`id` AS `ruleset_id`,`r`.`ruleset_name` AS `ruleset_name`,`r`.`ruleset_type` AS `ruleset_type`,`r`.`ruleset_public` AS `ruleset_public`,group_concat(distinct `g`.`role` separator ', ') AS `teams_responsible`,(select `comp_rulesets`.`ruleset_name` from `comp_rulesets` where (`comp_rulesets`.`id` = `rr`.`child_rset_id`)) AS `encap_rset`,`rr`.`child_rset_id` AS `encap_rset_id`,`rv`.`id` AS `id`,`rv`.`var_name` AS `var_name`,`rv`.`var_class` AS `var_class`,`rv`.`var_value` AS `var_value`,`rv`.`var_author` AS `var_author`,`rv`.`var_updated` AS `var_updated`,`rf`.`fset_id` AS `fset_id`,`fs`.`fset_name` AS `fset_name` from ((((((`comp_rulesets` `r` left join `comp_rulesets_rulesets` `rr` on((`r`.`id` = `rr`.`parent_rset_id`))) left join `comp_rulesets_variables` `rv` on((((`rv`.`ruleset_id` = `r`.`id`) and isnull(`rr`.`child_rset_id`)) or (`rv`.`ruleset_id` = `rr`.`child_rset_id`)))) left join `comp_rulesets_filtersets` `rf` on((`r`.`id` = `rf`.`ruleset_id`))) left join `gen_filtersets` `fs` on((`fs`.`id` = `rf`.`fset_id`))) left join `comp_ruleset_team_responsible` `rt` on((`r`.`id` = `rt`.`ruleset_id`))) left join `auth_group` `g` on((`rt`.`group_id` = `g`.`id`))) group by `r`.`id`,`rv`.`id`,`rr`.`id`) */;

--
-- Final view structure for view `v_comp_status_weekly`
--

/*!50001 DROP TABLE `v_comp_status_weekly`*/;
/*!50001 DROP VIEW IF EXISTS `v_comp_status_weekly`*/;
/*!50001 CREATE ALGORITHM=UNDEFINED */
/*!50013 DEFINER=`opensvc`@`%` SQL SECURITY DEFINER */
/*!50001 VIEW `v_comp_status_weekly` AS (select `l`.`id` AS `id`,`l`.`run_nodename` AS `run_nodename`,`l`.`run_module` AS `run_module`,max(`l`.`run_status`) AS `run_status`,year(`l`.`run_date`) AS `year`,week(`l`.`run_date`,0) AS `week` from `comp_log` `l` where (`l`.`run_action` = 'check') group by `l`.`run_nodename`,`l`.`run_module`,year(`l`.`run_date`),week(`l`.`run_date`,0) order by `l`.`run_date`) */;

--
-- Final view structure for view `v_disk_app`
--

/*!50001 DROP TABLE `v_disk_app`*/;
/*!50001 DROP VIEW IF EXISTS `v_disk_app`*/;
/*!50001 CREATE ALGORITHM=UNDEFINED */
/*!50013 DEFINER=`opensvc`@`%` SQL SECURITY DEFINER */
/*!50001 VIEW `v_disk_app` AS select `diskinfo`.`id` AS `id`,`diskinfo`.`disk_id` AS `disk_id`,`svcdisks`.`disk_region` AS `disk_region`,`svcdisks`.`disk_svcname` AS `disk_svcname`,`svcdisks`.`disk_nodename` AS `disk_nodename`,`svcdisks`.`disk_vendor` AS `disk_vendor`,`svcdisks`.`disk_model` AS `disk_model`,`svcdisks`.`disk_dg` AS `disk_dg`,`svcdisks`.`disk_updated` AS `svcdisk_updated`,`svcdisks`.`id` AS `svcdisk_id`,`svcdisks`.`disk_local` AS `disk_local`,`services`.`svc_app` AS `app`,`svcdisks`.`disk_used` AS `disk_used`,`diskinfo`.`disk_size` AS `disk_size`,`diskinfo`.`disk_arrayid` AS `disk_arrayid`,`diskinfo`.`disk_group` AS `disk_group`,`diskinfo`.`disk_devid` AS `disk_devid`,`diskinfo`.`disk_name` AS `disk_name`,`diskinfo`.`disk_alloc` AS `disk_alloc`,`diskinfo`.`disk_updated` AS `disk_updated`,`diskinfo`.`disk_raid` AS `disk_raid`,`diskinfo`.`disk_level` AS `disk_level` from ((`diskinfo` left join `svcdisks` on((convert(`diskinfo`.`disk_id` using utf8) = `svcdisks`.`disk_id`))) left join `services` on((`svcdisks`.`disk_svcname` = `services`.`svc_name`))) where (`svcdisks`.`disk_svcname` <> '') union all select `diskinfo`.`id` AS `id`,`diskinfo`.`disk_id` AS `disk_id`,`svcdisks`.`disk_region` AS `disk_region`,`svcdisks`.`disk_svcname` AS `disk_svcname`,`svcdisks`.`disk_nodename` AS `disk_nodename`,`svcdisks`.`disk_vendor` AS `disk_vendor`,`svcdisks`.`disk_model` AS `disk_model`,`svcdisks`.`disk_dg` AS `disk_dg`,`svcdisks`.`disk_updated` AS `svcdisk_updated`,`svcdisks`.`id` AS `svcdisk_id`,`svcdisks`.`disk_local` AS `disk_local`,`nodes`.`project` AS `app`,`svcdisks`.`disk_used` AS `disk_used`,`diskinfo`.`disk_size` AS `disk_size`,`diskinfo`.`disk_arrayid` AS `disk_arrayid`,`diskinfo`.`disk_group` AS `disk_group`,`diskinfo`.`disk_devid` AS `disk_devid`,`diskinfo`.`disk_name` AS `disk_name`,`diskinfo`.`disk_alloc` AS `disk_alloc`,`diskinfo`.`disk_updated` AS `disk_updated`,`diskinfo`.`disk_raid` AS `disk_raid`,`diskinfo`.`disk_level` AS `disk_level` from ((`diskinfo` left join `svcdisks` on((convert(`diskinfo`.`disk_id` using utf8) = `svcdisks`.`disk_id`))) left join `nodes` on((`svcdisks`.`disk_nodename` = `nodes`.`nodename`))) where ((`svcdisks`.`disk_svcname` = '') or isnull(`svcdisks`.`disk_svcname`)) */;

--
-- Final view structure for view `v_disk_app_dedup`
--

/*!50001 DROP TABLE `v_disk_app_dedup`*/;
/*!50001 DROP VIEW IF EXISTS `v_disk_app_dedup`*/;
/*!50001 CREATE ALGORITHM=UNDEFINED */
/*!50013 DEFINER=`opensvc`@`%` SQL SECURITY DEFINER */
/*!50001 VIEW `v_disk_app_dedup` AS select `b_disk_app`.`app` AS `app`,max(`b_disk_app`.`disk_used`) AS `disk_used`,`b_disk_app`.`disk_size` AS `disk_size`,`b_disk_app`.`disk_arrayid` AS `disk_arrayid`,`b_disk_app`.`disk_group` AS `disk_group` from `b_disk_app` group by `b_disk_app`.`disk_id`,`b_disk_app`.`disk_region`,`b_disk_app`.`disk_arrayid`,`b_disk_app`.`disk_group` */;

--
-- Final view structure for view `v_disk_quota`
--

/*!50001 DROP TABLE `v_disk_quota`*/;
/*!50001 DROP VIEW IF EXISTS `v_disk_quota`*/;
/*!50001 CREATE ALGORITHM=UNDEFINED */
/*!50013 DEFINER=`opensvc`@`%` SQL SECURITY DEFINER */
/*!50001 VIEW `v_disk_quota` AS select `stor_array_dg_quota`.`id` AS `id`,`stor_array`.`id` AS `array_id`,`stor_array_dg`.`id` AS `dg_id`,`apps`.`id` AS `app_id`,`stor_array`.`array_name` AS `array_name`,`stor_array_dg`.`dg_name` AS `dg_name`,`stor_array_dg`.`dg_free` AS `dg_free`,`stor_array_dg`.`dg_size` AS `dg_size`,`stor_array_dg`.`dg_used` AS `dg_used`,`stor_array_dg`.`dg_reserved` AS `dg_reserved`,(`stor_array_dg`.`dg_size` - `stor_array_dg`.`dg_reserved`) AS `dg_reservable`,`stor_array`.`array_model` AS `array_model`,`apps`.`app` AS `app`,`stor_array_dg_quota`.`quota` AS `quota`,`v_disks_app`.`disk_used` AS `quota_used` from ((((`stor_array` join `stor_array_dg` on((`stor_array_dg`.`array_id` = `stor_array`.`id`))) left join `v_disks_app` on(((convert(`v_disks_app`.`disk_arrayid` using utf8) = `stor_array`.`array_name`) and (convert(`v_disks_app`.`disk_group` using utf8) = `stor_array_dg`.`dg_name`)))) left join `apps` on((`apps`.`app` = `v_disks_app`.`app`))) left join `stor_array_dg_quota` on(((`stor_array_dg`.`id` = `stor_array_dg_quota`.`dg_id`) and (`apps`.`id` = `stor_array_dg_quota`.`app_id`)))) where (`apps`.`id` is not null) group by `apps`.`id`,`stor_array`.`id`,`stor_array_dg`.`id` union all select `stor_array_dg_quota`.`id` AS `id`,`stor_array`.`id` AS `array_id`,`stor_array_dg`.`id` AS `dg_id`,NULL AS `app_id`,`stor_array`.`array_name` AS `array_name`,`stor_array_dg`.`dg_name` AS `dg_name`,`stor_array_dg`.`dg_free` AS `dg_free`,`stor_array_dg`.`dg_size` AS `dg_size`,`stor_array_dg`.`dg_used` AS `dg_used`,`stor_array_dg`.`dg_reserved` AS `dg_reserved`,(`stor_array_dg`.`dg_size` - `stor_array_dg`.`dg_reserved`) AS `dg_reservable`,`stor_array`.`array_model` AS `array_model`,'unknown' AS `unknown`,`v_disks_app`.`disk_used` AS `quota`,`v_disks_app`.`disk_used` AS `quota_used` from (((`stor_array` join `stor_array_dg` on((`stor_array_dg`.`array_id` = `stor_array`.`id`))) left join `stor_array_dg_quota` on((`stor_array_dg`.`id` = `stor_array_dg_quota`.`dg_id`))) left join `v_disks_app` on(((convert(`v_disks_app`.`disk_arrayid` using utf8) = `stor_array`.`array_name`) and (convert(`v_disks_app`.`disk_group` using utf8) = `stor_array_dg`.`dg_name`)))) where isnull(`v_disks_app`.`app`) group by `stor_array`.`id`,`stor_array_dg`.`id` */;

--
-- Final view structure for view `v_disks_app`
--

/*!50001 DROP TABLE `v_disks_app`*/;
/*!50001 DROP VIEW IF EXISTS `v_disks_app`*/;
/*!50001 CREATE ALGORITHM=UNDEFINED */
/*!50013 DEFINER=`opensvc`@`%` SQL SECURITY DEFINER */
/*!50001 VIEW `v_disks_app` AS select `v_disk_app_dedup`.`app` AS `app`,sum(if(((`v_disk_app_dedup`.`disk_used` is not null) and (`v_disk_app_dedup`.`disk_used` > 0)),`v_disk_app_dedup`.`disk_used`,`v_disk_app_dedup`.`disk_size`)) AS `disk_used`,`v_disk_app_dedup`.`disk_arrayid` AS `disk_arrayid`,`v_disk_app_dedup`.`disk_group` AS `disk_group` from `v_disk_app_dedup` group by `v_disk_app_dedup`.`app`,`v_disk_app_dedup`.`disk_arrayid`,`v_disk_app_dedup`.`disk_group` */;

--
-- Final view structure for view `v_flex_status`
--

/*!50001 DROP TABLE `v_flex_status`*/;
/*!50001 DROP VIEW IF EXISTS `v_flex_status`*/;
/*!50001 CREATE ALGORITHM=UNDEFINED */
/*!50013 DEFINER=`opensvc`@`%` SQL SECURITY DEFINER */
/*!50001 VIEW `v_flex_status` AS (select `p`.`ID` AS `id`,`p`.`mon_svcname` AS `svc_name`,`p`.`svc_flex_min_nodes` AS `svc_flex_min_nodes`,`p`.`svc_flex_max_nodes` AS `svc_flex_max_nodes`,`p`.`svc_flex_cpu_low_threshold` AS `svc_flex_cpu_low_threshold`,`p`.`svc_flex_cpu_high_threshold` AS `svc_flex_cpu_high_threshold`,count(1) AS `n`,(select count(1) AS `count(1)` from `svcmon` `c` where ((`c`.`mon_svcname` = `p`.`mon_svcname`) and (`c`.`mon_availstatus` = 'up'))) AS `up`,(select (100 - `c`.`idle`) AS `100-c.idle` from (`stats_cpu` `c` join `svcmon` `m`) where ((convert(`c`.`nodename` using utf8) = `m`.`mon_nodname`) and (`m`.`mon_svcname` = `p`.`mon_svcname`) and (`c`.`date` > (now() + interval -(15) minute)) and (`c`.`cpu` = 'all') and (`m`.`mon_overallstatus` = 'up')) group by `p`.`mon_svcname`) AS `cpu` from `v_svcmon` `p` where (`p`.`svc_cluster_type` in ('flex','autoflex')) group by `p`.`mon_svcname`) */;

--
-- Final view structure for view `v_forms`
--

/*!50001 DROP TABLE `v_forms`*/;
/*!50001 DROP VIEW IF EXISTS `v_forms`*/;
/*!50001 CREATE ALGORITHM=UNDEFINED */
/*!50013 DEFINER=`opensvc`@`%` SQL SECURITY DEFINER */
/*!50001 VIEW `v_forms` AS (select `f`.`id` AS `id`,`f`.`form_name` AS `form_name`,`f`.`form_yaml` AS `form_yaml`,`f`.`form_author` AS `form_author`,`f`.`form_created` AS `form_created`,`f`.`form_type` AS `form_type`,`f`.`form_folder` AS `form_folder`,group_concat(distinct `gg`.`role` order by `gg`.`role` ASC separator ', ') AS `form_team_publication`,group_concat(distinct `g`.`role` order by `g`.`role` ASC separator ', ') AS `form_team_responsible` from ((((`forms` `f` left join `forms_team_responsible` `fr` on((`f`.`id` = `fr`.`form_id`))) left join `auth_group` `g` on((`fr`.`group_id` = `g`.`id`))) left join `forms_team_publication` `fp` on((`f`.`id` = `fp`.`form_id`))) left join `auth_group` `gg` on((`fp`.`group_id` = `gg`.`id`))) group by `f`.`id`) */;

--
-- Final view structure for view `v_gen_filterset_teams_responsible`
--

/*!50001 DROP TABLE `v_gen_filterset_teams_responsible`*/;
/*!50001 DROP VIEW IF EXISTS `v_gen_filterset_teams_responsible`*/;
/*!50001 CREATE ALGORITHM=UNDEFINED */
/*!50013 DEFINER=`opensvc`@`%` SQL SECURITY DEFINER */
/*!50001 VIEW `v_gen_filterset_teams_responsible` AS (select `m`.`id` AS `fset_id`,group_concat(`g`.`role` separator ', ') AS `teams_responsible` from ((`gen_filtersets` `m` left join `gen_filterset_team_responsible` `j` on((`m`.`id` = `j`.`fset_id`))) left join `auth_group` `g` on((`j`.`group_id` = `g`.`id`))) group by `m`.`id`) */;

--
-- Final view structure for view `v_gen_filtersets`
--

/*!50001 DROP TABLE `v_gen_filtersets`*/;
/*!50001 DROP VIEW IF EXISTS `v_gen_filtersets`*/;
/*!50001 CREATE ALGORITHM=UNDEFINED */
/*!50013 DEFINER=`opensvc`@`%` SQL SECURITY DEFINER */
/*!50001 VIEW `v_gen_filtersets` AS (select `fs`.`fset_name` AS `fset_name`,`fs`.`fset_updated` AS `fset_updated`,`fs`.`fset_author` AS `fset_author`,`fs`.`id` AS `fset_id`,`g`.`id` AS `join_id`,`g`.`f_order` AS `f_order`,`f`.`id` AS `f_id`,`g`.`encap_fset_id` AS `encap_fset_id`,(select `gen_filtersets`.`fset_name` AS `fset_name` from `gen_filtersets` where (`gen_filtersets`.`id` = `g`.`encap_fset_id`)) AS `encap_fset_name`,`g`.`f_log_op` AS `f_log_op`,`f`.`id` AS `id`,`f`.`f_table` AS `f_table`,`f`.`f_field` AS `f_field`,`f`.`f_value` AS `f_value`,`f`.`f_updated` AS `f_updated`,`f`.`f_author` AS `f_author`,`f`.`f_op` AS `f_op` from ((`gen_filtersets` `fs` left join `gen_filtersets_filters` `g` on((`g`.`fset_id` = `fs`.`id`))) left join `gen_filters` `f` on((`g`.`f_id` = `f`.`id`))) order by `fs`.`id`,`g`.`f_order`) */;

--
-- Final view structure for view `v_lifecycle_os_name`
--

/*!50001 DROP TABLE `v_lifecycle_os_name`*/;
/*!50001 DROP VIEW IF EXISTS `v_lifecycle_os_name`*/;
/*!50001 CREATE ALGORITHM=UNDEFINED */
/*!50013 DEFINER=`opensvc`@`%` SQL SECURITY DEFINER */
/*!50001 VIEW `v_lifecycle_os_name` AS select `lifecycle_os`.`id` AS `id`,`lifecycle_os`.`fset_id` AS `fset_id`,`lifecycle_os`.`lc_date` AS `lc_date`,sum(`lifecycle_os`.`lc_count`) AS `lc_count`,`lifecycle_os`.`lc_os_name` AS `lc_os_name` from `lifecycle_os` group by `lifecycle_os`.`lc_date`,`lifecycle_os`.`lc_os_name`,`lifecycle_os`.`fset_id` order by `lifecycle_os`.`lc_date`,`lifecycle_os`.`lc_os_name` */;

--
-- Final view structure for view `v_nb_services`
--

/*!50001 DROP TABLE `v_nb_services`*/;
/*!50001 DROP VIEW IF EXISTS `v_nb_services`*/;
/*!50001 CREATE ALGORITHM=UNDEFINED */
/*!50013 DEFINER=`opensvc`@`%` SQL SECURITY DEFINER */
/*!50001 VIEW `v_nb_services` AS select count(`services`.`id`) AS `nb_svc` from `services` */;

--
-- Final view structure for view `v_network_segments`
--

/*!50001 DROP TABLE `v_network_segments`*/;
/*!50001 DROP VIEW IF EXISTS `v_network_segments`*/;
/*!50001 CREATE ALGORITHM=UNDEFINED */
/*!50013 DEFINER=`opensvc`@`%` SQL SECURITY DEFINER */
/*!50001 VIEW `v_network_segments` AS (select `s`.`id` AS `id`,`s`.`net_id` AS `net_id`,`s`.`seg_type` AS `seg_type`,`s`.`seg_begin` AS `seg_begin`,`s`.`seg_end` AS `seg_end`,group_concat(`g`.`role` separator ', ') AS `teams_responsible` from ((`network_segments` `s` left join `network_segment_responsibles` `sr` on((`s`.`id` = `sr`.`seg_id`))) left join `auth_group` `g` on((`sr`.`group_id` = `g`.`id`))) group by `s`.`id`) */;

--
-- Final view structure for view `v_nodes`
--

/*!50001 DROP TABLE `v_nodes`*/;
/*!50001 DROP VIEW IF EXISTS `v_nodes`*/;
/*!50001 CREATE ALGORITHM=UNDEFINED */
/*!50013 DEFINER=`opensvc`@`%` SQL SECURITY DEFINER */
/*!50001 VIEW `v_nodes` AS (select `n`.`nodename` AS `nodename`,`n`.`fqdn` AS `fqdn`,`n`.`loc_country` AS `loc_country`,`n`.`loc_city` AS `loc_city`,`n`.`loc_addr` AS `loc_addr`,`n`.`loc_building` AS `loc_building`,`n`.`loc_floor` AS `loc_floor`,`n`.`loc_room` AS `loc_room`,`n`.`loc_rack` AS `loc_rack`,`n`.`id` AS `id`,`n`.`cpu_freq` AS `cpu_freq`,`n`.`cpu_cores` AS `cpu_cores`,`n`.`cpu_dies` AS `cpu_dies`,`n`.`cpu_vendor` AS `cpu_vendor`,`n`.`cpu_model` AS `cpu_model`,`n`.`mem_banks` AS `mem_banks`,`n`.`mem_slots` AS `mem_slots`,`n`.`mem_bytes` AS `mem_bytes`,`n`.`os_name` AS `os_name`,`n`.`os_release` AS `os_release`,`n`.`os_update` AS `os_update`,`n`.`os_segment` AS `os_segment`,`n`.`os_arch` AS `os_arch`,`n`.`os_vendor` AS `os_vendor`,`n`.`os_kernel` AS `os_kernel`,`n`.`loc_zip` AS `loc_zip`,`n`.`version` AS `version`,`n`.`listener_port` AS `listener_port`,`n`.`team_responsible` AS `team_responsible`,`n`.`team_integ` AS `team_integ`,`n`.`team_support` AS `team_support`,`n`.`project` AS `project`,`n`.`serial` AS `serial`,`n`.`model` AS `model`,`n`.`type` AS `type`,`n`.`warranty_end` AS `warranty_end`,`n`.`maintenance_end` AS `maintenance_end`,`n`.`status` AS `status`,`n`.`role` AS `role`,`n`.`environnement` AS `environnement`,`n`.`host_mode` AS `host_mode`,`n`.`power_cabinet1` AS `power_cabinet1`,`n`.`power_cabinet2` AS `power_cabinet2`,`n`.`power_supply_nb` AS `power_supply_nb`,`n`.`power_protect` AS `power_protect`,`n`.`power_protect_breaker` AS `power_protect_breaker`,`n`.`power_breaker1` AS `power_breaker1`,`n`.`power_breaker2` AS `power_breaker2`,concat_ws(' ',`n`.`os_name`,`n`.`os_vendor`,`n`.`os_release`,`n`.`os_update`) AS `os_concat`,`n`.`updated` AS `updated`,`n`.`enclosure` AS `enclosure`,`n`.`hw_obs_warn_date` AS `hw_obs_warn_date`,`n`.`hw_obs_alert_date` AS `hw_obs_alert_date`,`n`.`os_obs_warn_date` AS `os_obs_warn_date`,`n`.`os_obs_alert_date` AS `os_obs_alert_date`,`n`.`hvpool` AS `hvpool`,`n`.`hv` AS `hv`,`n`.`hvvdc` AS `hvvdc` from `nodes` `n`) */;

--
-- Final view structure for view `v_outdated_services`
--

/*!50001 DROP TABLE `v_outdated_services`*/;
/*!50001 DROP VIEW IF EXISTS `v_outdated_services`*/;
/*!50001 CREATE ALGORITHM=UNDEFINED */
/*!50013 DEFINER=`opensvc`@`%` SQL SECURITY DEFINER */
/*!50001 VIEW `v_outdated_services` AS (select `svcmon`.`mon_svcname` AS `svcname`,sum(if((`svcmon`.`mon_updated` >= (now() - interval 15 minute)),1,0)) AS `uptodate` from `svcmon` group by `svcmon`.`mon_svcname`) */;

--
-- Final view structure for view `v_packages_nodes`
--

/*!50001 DROP TABLE `v_packages_nodes`*/;
/*!50001 DROP VIEW IF EXISTS `v_packages_nodes`*/;
/*!50001 CREATE ALGORITHM=UNDEFINED */
/*!50013 DEFINER=`opensvc`@`%` SQL SECURITY DEFINER */
/*!50001 VIEW `v_packages_nodes` AS select `p`.`id` AS `id`,`p`.`pkg_nodename` AS `pkg_nodename`,`p`.`pkg_name` AS `pkg_name`,`p`.`pkg_version` AS `pkg_version`,`p`.`pkg_arch` AS `pkg_arch`,`p`.`pkg_updated` AS `pkg_updated`,`n`.`nodename` AS `nodename`,`n`.`loc_country` AS `loc_country`,`n`.`loc_city` AS `loc_city`,`n`.`loc_addr` AS `loc_addr`,`n`.`loc_building` AS `loc_building`,`n`.`loc_floor` AS `loc_floor`,`n`.`loc_room` AS `loc_room`,`n`.`loc_rack` AS `loc_rack`,`n`.`cpu_freq` AS `cpu_freq`,`n`.`cpu_cores` AS `cpu_cores`,`n`.`cpu_dies` AS `cpu_dies`,`n`.`cpu_vendor` AS `cpu_vendor`,`n`.`cpu_model` AS `cpu_model`,`n`.`mem_banks` AS `mem_banks`,`n`.`mem_slots` AS `mem_slots`,`n`.`mem_bytes` AS `mem_bytes`,`n`.`os_name` AS `os_name`,`n`.`os_release` AS `os_release`,`n`.`os_update` AS `os_update`,`n`.`os_segment` AS `os_segment`,`n`.`os_arch` AS `os_arch`,`n`.`os_vendor` AS `os_vendor`,`n`.`os_kernel` AS `os_kernel`,`n`.`loc_zip` AS `loc_zip`,`n`.`team_responsible` AS `team_responsible`,`n`.`serial` AS `serial`,`n`.`model` AS `model`,`n`.`type` AS `type`,`n`.`warranty_end` AS `warranty_end`,`n`.`status` AS `status`,`n`.`role` AS `role`,`n`.`environnement` AS `environnement`,`n`.`power_cabinet1` AS `power_cabinet1`,`n`.`power_cabinet2` AS `power_cabinet2`,`n`.`power_supply_nb` AS `power_supply_nb`,`n`.`power_protect` AS `power_protect`,`n`.`power_protect_breaker` AS `power_protect_breaker`,`n`.`power_breaker1` AS `power_breaker1`,`n`.`power_breaker2` AS `power_breaker2`,`n`.`os_concat` AS `os_concat` from (`packages` `p` join `v_nodes` `n` on((convert(`n`.`nodename` using utf8) = `p`.`pkg_nodename`))) */;

--
-- Final view structure for view `v_services`
--

/*!50001 DROP TABLE `v_services`*/;
/*!50001 DROP VIEW IF EXISTS `v_services`*/;
/*!50001 CREATE ALGORITHM=UNDEFINED */
/*!50013 DEFINER=`opensvc`@`%` SQL SECURITY DEFINER */
/*!50001 VIEW `v_services` AS select `s`.`svc_ha` AS `svc_ha`,`s`.`svc_status` AS `svc_status`,`s`.`svc_availstatus` AS `svc_availstatus`,`s`.`svc_cluster_type` AS `svc_cluster_type`,`s`.`svc_flex_min_nodes` AS `svc_flex_min_nodes`,`s`.`svc_flex_max_nodes` AS `svc_flex_max_nodes`,`s`.`svc_flex_cpu_low_threshold` AS `svc_flex_cpu_low_threshold`,`s`.`svc_flex_cpu_high_threshold` AS `svc_flex_cpu_high_threshold`,`s`.`svc_hostid` AS `svc_hostid`,`s`.`svc_name` AS `svc_name`,`s`.`svc_nodes` AS `svc_nodes`,`s`.`svc_drpnode` AS `svc_drpnode`,`s`.`svc_ipname` AS `svc_ipname`,`s`.`svc_ipdev` AS `svc_ipdev`,`s`.`svc_drpipname` AS `svc_drpipname`,`s`.`svc_drpipdev` AS `svc_drpipdev`,`s`.`svc_drptype` AS `svc_drptype`,`s`.`svc_fs` AS `svc_fs`,`s`.`svc_dev` AS `svc_dev`,`s`.`svc_autostart` AS `svc_autostart`,`s`.`svc_mntopt` AS `svc_mntopt`,`s`.`svc_scsi` AS `svc_scsi`,`s`.`svc_type` AS `svc_type`,`s`.`svc_drpnodes` AS `svc_drpnodes`,`s`.`svc_comment` AS `svc_comment`,`s`.`svc_app` AS `svc_app`,`s`.`svc_drnoaction` AS `svc_drnoaction`,`s`.`svc_created` AS `svc_created`,`s`.`updated` AS `updated`,`s`.`cksum` AS `cksum`,`s`.`svc_envdate` AS `svc_envdate`,`s`.`svc_containertype` AS `svc_containertype`,`s`.`svc_metrocluster` AS `svc_metrocluster`,`s`.`id` AS `id`,`s`.`svc_hasec` AS `svc_hasec`,`s`.`svc_hapri` AS `svc_hapri`,`s`.`svc_hastonith` AS `svc_hastonith`,`s`.`svc_hastartup` AS `svc_hastartup`,`s`.`svc_wave` AS `svc_wave`,`a`.`app` AS `app`,`a`.`responsibles` AS `responsibles`,`a`.`mailto` AS `mailto` from (`services` `s` left join `v_apps` `a` on((`a`.`app` = `s`.`svc_app`))) */;

--
-- Final view structure for view `v_svc_group_status`
--

/*!50001 DROP TABLE `v_svc_group_status`*/;
/*!50001 DROP VIEW IF EXISTS `v_svc_group_status`*/;
/*!50001 CREATE ALGORITHM=UNDEFINED */
/*!50013 DEFINER=`opensvc`@`%` SQL SECURITY DEFINER */
/*!50001 VIEW `v_svc_group_status` AS (select `svcmon`.`ID` AS `id`,`svcmon`.`mon_svcname` AS `svcname`,`svcmon`.`mon_svctype` AS `svctype`,group_concat(`trusted_status`(`svcmon`.`mon_availstatus`,`svcmon`.`mon_updated`) separator ',') AS `groupstatus`,group_concat(`svcmon`.`mon_nodname` separator ',') AS `nodes` from `svcmon` group by `svcmon`.`mon_svcname`) */;

--
-- Final view structure for view `v_svcactions`
--

/*!50001 DROP TABLE `v_svcactions`*/;
/*!50001 DROP VIEW IF EXISTS `v_svcactions`*/;
/*!50001 CREATE ALGORITHM=UNDEFINED */
/*!50013 DEFINER=`opensvc`@`u64lmwbie5b.erp.sncf.fr` SQL SECURITY DEFINER */
/*!50001 VIEW `v_svcactions` AS select `ac`.`cron` AS `cron`,`ac`.`time` AS `time`,`ac`.`version` AS `version`,`ac`.`svcname` AS `svcname`,`ac`.`action` AS `action`,`ac`.`status` AS `status`,`ac`.`begin` AS `begin`,`ac`.`end` AS `end`,`ac`.`hostname` AS `hostname`,`ac`.`hostid` AS `hostid`,`ac`.`status_log` AS `status_log`,`ac`.`pid` AS `pid`,`ac`.`ID` AS `ID`,`ac`.`ack` AS `ack`,`ac`.`alert` AS `alert`,`ac`.`acked_by` AS `acked_by`,`ac`.`acked_comment` AS `acked_comment`,`ac`.`acked_date` AS `acked_date`,`s`.`svc_ha` AS `svc_ha`,`s`.`svc_app` AS `app`,`a`.`mailto` AS `mailto`,`a`.`responsibles` AS `responsibles`,`n`.`nodename` AS `nodename`,`n`.`loc_country` AS `loc_country`,`n`.`loc_city` AS `loc_city`,`n`.`loc_addr` AS `loc_addr`,`n`.`loc_building` AS `loc_building`,`n`.`loc_floor` AS `loc_floor`,`n`.`loc_room` AS `loc_room`,`n`.`loc_rack` AS `loc_rack`,`n`.`cpu_freq` AS `cpu_freq`,`n`.`cpu_cores` AS `cpu_cores`,`n`.`cpu_dies` AS `cpu_dies`,`n`.`cpu_vendor` AS `cpu_vendor`,`n`.`cpu_model` AS `cpu_model`,`n`.`mem_banks` AS `mem_banks`,`n`.`mem_slots` AS `mem_slots`,`n`.`mem_bytes` AS `mem_bytes`,`n`.`os_name` AS `os_name`,`n`.`os_release` AS `os_release`,`n`.`os_update` AS `os_update`,`n`.`os_segment` AS `os_segment`,`n`.`os_arch` AS `os_arch`,`n`.`os_vendor` AS `os_vendor`,`n`.`os_kernel` AS `os_kernel`,`n`.`loc_zip` AS `loc_zip`,`n`.`team_responsible` AS `team_responsible`,`n`.`team_integ` AS `team_integ`,`n`.`team_support` AS `team_support`,`n`.`project` AS `project`,`n`.`serial` AS `serial`,`n`.`model` AS `model`,`n`.`type` AS `type`,`n`.`warranty_end` AS `warranty_end`,`n`.`maintenance_end` AS `maintenance_end`,`n`.`status` AS `asset_status`,`n`.`role` AS `role`,`n`.`environnement` AS `environnement`,`n`.`host_mode` AS `host_mode`,`n`.`power_supply_nb` AS `power_supply_nb`,`n`.`power_cabinet1` AS `power_cabinet1`,`n`.`power_cabinet2` AS `power_cabinet2`,`n`.`power_protect` AS `power_protect`,`n`.`power_protect_breaker` AS `power_protect_breaker`,`n`.`power_breaker1` AS `power_breaker1`,`n`.`power_breaker2` AS `power_breaker2` from (((`SVCactions` `ac` join `services` `s` on((`s`.`svc_name` = `ac`.`svcname`))) join `nodes` `n` on((`ac`.`hostname` = `n`.`nodename`))) left join `b_apps` `a` on((convert(`a`.`app` using utf8) = `s`.`svc_app`))) */;

--
-- Final view structure for view `v_svcdisks`
--

/*!50001 DROP TABLE `v_svcdisks`*/;
/*!50001 DROP VIEW IF EXISTS `v_svcdisks`*/;
/*!50001 CREATE ALGORITHM=UNDEFINED */
/*!50013 DEFINER=`opensvc`@`%` SQL SECURITY DEFINER */
/*!50001 VIEW `v_svcdisks` AS select `s`.`id` AS `id`,`s`.`disk_id` AS `disk_id`,`s`.`disk_svcname` AS `disk_svcname`,`s`.`disk_nodename` AS `disk_nodename`,`s`.`disk_size` AS `disk_size`,`s`.`disk_used` AS `disk_used`,`s`.`disk_vendor` AS `disk_vendor`,`s`.`disk_model` AS `disk_model`,`s`.`disk_dg` AS `disk_dg`,`s`.`disk_updated` AS `disk_updated`,`i`.`disk_devid` AS `disk_devid`,`i`.`disk_name` AS `disk_name`,`i`.`disk_alloc` AS `disk_alloc`,`i`.`disk_arrayid` AS `disk_arrayid` from (`svcdisks` `s` left join `diskinfo` `i` on((`s`.`disk_id` = convert(`i`.`disk_id` using utf8)))) */;

--
-- Final view structure for view `v_svcmon`
--

/*!50001 DROP TABLE `v_svcmon`*/;
/*!50001 DROP VIEW IF EXISTS `v_svcmon`*/;
/*!50001 CREATE ALGORITHM=UNDEFINED */
/*!50013 DEFINER=`opensvc`@`%` SQL SECURITY DEFINER */
/*!50001 VIEW `v_svcmon` AS select `e`.`err` AS `err`,`s`.`svc_ha` AS `svc_ha`,`s`.`svc_cluster_type` AS `svc_cluster_type`,`s`.`svc_status` AS `svc_status`,`s`.`svc_availstatus` AS `svc_availstatus`,`s`.`svc_flex_min_nodes` AS `svc_flex_min_nodes`,`s`.`svc_flex_max_nodes` AS `svc_flex_max_nodes`,`s`.`svc_flex_cpu_low_threshold` AS `svc_flex_cpu_low_threshold`,`s`.`svc_flex_cpu_high_threshold` AS `svc_flex_cpu_high_threshold`,`m`.`mon_vmname` AS `mon_vmname`,`m`.`mon_vmtype` AS `mon_vmtype`,`m`.`mon_guestos` AS `mon_guestos`,`s`.`svc_name` AS `svc_name`,`s`.`svc_nodes` AS `svc_nodes`,`s`.`svc_drpnode` AS `svc_drpnode`,`s`.`svc_drpnodes` AS `svc_drpnodes`,`s`.`svc_drptype` AS `svc_drptype`,`s`.`svc_autostart` AS `svc_autostart`,`s`.`svc_type` AS `svc_type`,`s`.`svc_comment` AS `svc_comment`,`s`.`svc_app` AS `svc_app`,`s`.`svc_drnoaction` AS `svc_drnoaction`,`s`.`svc_created` AS `svc_created`,`s`.`updated` AS `svc_updated`,`s`.`svc_envdate` AS `svc_envdate`,`s`.`svc_containertype` AS `svc_containertype`,`s`.`svc_metrocluster` AS `svc_metrocluster`,`m`.`mon_vcpus` AS `mon_vcpus`,`m`.`mon_vmem` AS `mon_vmem`,`m`.`mon_svcname` AS `mon_svcname`,`m`.`mon_svctype` AS `mon_svctype`,`m`.`mon_drptype` AS `mon_drptype`,`m`.`mon_nodname` AS `mon_nodname`,`m`.`mon_nodtype` AS `mon_nodtype`,`m`.`mon_nodmode` AS `mon_nodmode`,`m`.`mon_ipstatus` AS `mon_ipstatus`,`m`.`mon_fsstatus` AS `mon_fsstatus`,`m`.`mon_prinodes` AS `mon_prinodes`,`m`.`mon_hostid` AS `mon_hostid`,`m`.`ID` AS `ID`,`m`.`mon_frozen` AS `mon_frozen`,`m`.`mon_frozentxt` AS `mon_frozentxt`,`m`.`mon_changed` AS `mon_changed`,`m`.`mon_updated` AS `mon_updated`,`m`.`mon_sharestatus` AS `mon_sharestatus`,`m`.`mon_diskstatus` AS `mon_diskstatus`,`m`.`mon_containerstatus` AS `mon_containerstatus`,`m`.`mon_overallstatus` AS `mon_overallstatus`,`n`.`nodename` AS `nodename`,`n`.`listener_port` AS `listener_port`,`n`.`version` AS `version`,`n`.`updated` AS `node_updated`,`n`.`loc_country` AS `loc_country`,`n`.`loc_city` AS `loc_city`,`n`.`loc_addr` AS `loc_addr`,`n`.`loc_building` AS `loc_building`,`n`.`loc_floor` AS `loc_floor`,`n`.`loc_room` AS `loc_room`,`n`.`loc_rack` AS `loc_rack`,`n`.`cpu_freq` AS `cpu_freq`,`n`.`cpu_cores` AS `cpu_cores`,`n`.`cpu_dies` AS `cpu_dies`,`n`.`cpu_vendor` AS `cpu_vendor`,`n`.`cpu_model` AS `cpu_model`,`n`.`mem_banks` AS `mem_banks`,`n`.`mem_slots` AS `mem_slots`,`n`.`mem_bytes` AS `mem_bytes`,`n`.`os_name` AS `os_name`,`n`.`os_release` AS `os_release`,`n`.`os_update` AS `os_update`,`n`.`os_segment` AS `os_segment`,`n`.`os_arch` AS `os_arch`,`n`.`os_vendor` AS `os_vendor`,`n`.`os_kernel` AS `os_kernel`,`n`.`loc_zip` AS `loc_zip`,`n`.`team_responsible` AS `team_responsible`,`n`.`team_integ` AS `team_integ`,`n`.`team_support` AS `team_support`,`n`.`project` AS `project`,`n`.`serial` AS `serial`,`n`.`model` AS `model`,`n`.`type` AS `type`,`n`.`warranty_end` AS `warranty_end`,`n`.`maintenance_end` AS `maintenance_end`,`n`.`status` AS `status`,`n`.`role` AS `role`,`n`.`environnement` AS `environnement`,`n`.`host_mode` AS `host_mode`,`n`.`power_supply_nb` AS `power_supply_nb`,`n`.`power_cabinet1` AS `power_cabinet1`,`n`.`power_cabinet2` AS `power_cabinet2`,`n`.`power_protect` AS `power_protect`,`n`.`power_protect_breaker` AS `power_protect_breaker`,`n`.`power_breaker1` AS `power_breaker1`,`n`.`power_breaker2` AS `power_breaker2`,`m`.`mon_syncstatus` AS `mon_syncstatus`,`m`.`mon_hbstatus` AS `mon_hbstatus`,`m`.`mon_availstatus` AS `mon_availstatus`,`m`.`mon_appstatus` AS `mon_appstatus`,`ap`.`responsibles` AS `responsibles`,`ap`.`mailto` AS `mailto`,`n`.`enclosure` AS `enclosure` from ((((`svcmon` `m` left join `services` `s` on((`s`.`svc_name` = `m`.`mon_svcname`))) left join `nodes` `n` on((`m`.`mon_nodname` = `n`.`nodename`))) left join `b_apps` `ap` on((`ap`.`app` = `s`.`svc_app`))) left join `b_action_errors` `e` on(((`e`.`svcname` = `s`.`svc_name`) and (`e`.`nodename` = `m`.`mon_nodname`)))) */;

--
-- Final view structure for view `v_users`
--

/*!50001 DROP TABLE `v_users`*/;
/*!50001 DROP VIEW IF EXISTS `v_users`*/;
/*!50001 CREATE ALGORITHM=UNDEFINED */
/*!50013 DEFINER=`opensvc`@`%` SQL SECURITY DEFINER */
/*!50001 VIEW `v_users` AS (select (select `e`.`time_stamp` AS `time_stamp` from `auth_event` `e` where (`e`.`user_id` = `u`.`id`) order by `e`.`time_stamp` desc limit 1) AS `last`,`u`.`id` AS `id`,concat_ws(' ',`u`.`first_name`,`u`.`last_name`) AS `fullname`,`u`.`email` AS `email`,group_concat(`d`.`domains` separator ', ') AS `domains`,sum((select count(0) AS `count(*)` from `auth_group` `gg` where ((`gg`.`role` = 'Manager') and (`gg`.`id` = `g`.`id`)))) AS `manager`,group_concat(`g`.`role` separator ', ') AS `groups`,`gg`.`role` AS `primary_group`,`u`.`lock_filter` AS `lock_filter`,`fs`.`fset_name` AS `fset_name`,`u`.`phone_work` AS `phone_work` from (((((((`auth_user` `u` left join `auth_membership` `mm` on(((`u`.`id` = `mm`.`user_id`) and (`mm`.`primary_group` = 'T')))) left join `auth_group` `gg` on((`mm`.`group_id` = `gg`.`id`))) left join `auth_membership` `m` on((`u`.`id` = `m`.`user_id`))) left join `auth_group` `g` on(((`m`.`group_id` = `g`.`id`) and (not((`g`.`role` like 'user_%')))))) left join `domain_permissions` `d` on((`m`.`group_id` = `d`.`group_id`))) left join `gen_filterset_user` `fsu` on((`fsu`.`user_id` = `u`.`id`))) left join `gen_filtersets` `fs` on((`fs`.`id` = `fsu`.`fset_id`))) group by `u`.`id`) */;
/*!40103 SET TIME_ZONE=@OLD_TIME_ZONE */;

/*!40101 SET SQL_MODE=@OLD_SQL_MODE */;
/*!40014 SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS */;
/*!40014 SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS */;
/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
/*!40111 SET SQL_NOTES=@OLD_SQL_NOTES */;

-- Dump completed on 2013-08-27  8:40:40
