
create database opensvc;
create user opensvc;
use opensvc;
grant all on opensvc to opensvc;
flush privileges;

create database pdns;
create user pdns;
use pdns;
grant all on pdns to pdns;
flush privileges;

-- MySQL dump 10.14  Distrib 5.5.33a-MariaDB, for Linux (x86_64)
--
-- Host: localhost    Database: opensvc
-- ------------------------------------------------------
-- Server version	5.5.36-MariaDB-log

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8 */;
/*!40103 SET @OLD_TIME_ZONE=@@TIME_ZONE */;
/*!40103 SET TIME_ZONE='+00:00' */;
/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;

--
-- Current Database: `opensvc`
--

CREATE DATABASE /*!32312 IF NOT EXISTS*/ `opensvc` /*!40100 DEFAULT CHARACTER SET utf8 */;

USE `opensvc`;

--
-- Table structure for table `action_queue`
--

DROP TABLE IF EXISTS `action_queue`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `action_queue` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `status` varchar(1) DEFAULT 'W',
  `command` text NOT NULL,
  `date_queued` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `date_dequeued` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00',
  `ret` int(11) DEFAULT '0',
  `stdout` text,
  `stderr` text,
  `action_type` varchar(8) DEFAULT NULL,
  `user_id` int(11) DEFAULT NULL,
  `form_id` int(11) DEFAULT NULL,
  `connect_to` varchar(128) DEFAULT NULL,
  `node_id` char(36) CHARACTER SET ascii DEFAULT '',
  `svc_id` char(36) CHARACTER SET ascii DEFAULT '',
  PRIMARY KEY (`id`),
  KEY `idx1` (`status`),
  KEY `idx_ret` (`ret`),
  KEY `idx2` (`status`,`ret`),
  KEY `k_node_id` (`node_id`),
  KEY `k_svc_id` (`svc_id`)
) ENGINE=InnoDB AUTO_INCREMENT=19 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `alerts`
--

DROP TABLE IF EXISTS `alerts`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `alerts` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `sent_at` datetime DEFAULT NULL,
  `sent_to` text NOT NULL,
  `body` mediumtext,
  `subject` varchar(150) NOT NULL,
  `send_at` datetime NOT NULL,
  `created_at` datetime NOT NULL,
  `action_id` int(11) DEFAULT NULL,
  `app_id` int(11) DEFAULT NULL,
  `domain` varchar(100) DEFAULT NULL,
  `action_ids` varchar(1000) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM AUTO_INCREMENT=13833 DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `apps`
--

DROP TABLE IF EXISTS `apps`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `apps` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `app` varchar(64) DEFAULT NULL,
  `updated` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `app_domain` varchar(64) DEFAULT NULL,
  `app_team_ops` varchar(64) DEFAULT NULL,
  `description` text NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `i_app` (`app`),
  KEY `idx_app_team_ops` (`app_team_ops`)
) ENGINE=InnoDB AUTO_INCREMENT=4563 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `apps_import`
--

DROP TABLE IF EXISTS `apps_import`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `apps_import` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `app` varchar(64) DEFAULT NULL,
  `desc` mediumtext NOT NULL,
  `updated` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `app_domain` varchar(64) DEFAULT NULL,
  `app_team_ops` varchar(64) DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `i_app` (`app`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `apps_publications`
--

DROP TABLE IF EXISTS `apps_publications`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `apps_publications` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `group_id` int(11) NOT NULL,
  `app_id` int(11) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `apps_publications_fk2` (`group_id`),
  KEY `apps_publications_fk1` (`app_id`)
) ENGINE=InnoDB AUTO_INCREMENT=97 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `apps_responsibles`
--

DROP TABLE IF EXISTS `apps_responsibles`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `apps_responsibles` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `group_id` int(11) NOT NULL,
  `app_id` int(11) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `apps_responsibles_fk2` (`group_id`),
  KEY `apps_responsibles_fk1` (`app_id`)
) ENGINE=InnoDB AUTO_INCREMENT=2209 DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `auth_event`
--

DROP TABLE IF EXISTS `auth_event`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `auth_event` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `time_stamp` datetime DEFAULT NULL,
  `client_ip` varchar(512) DEFAULT NULL,
  `user_id` int(11) DEFAULT NULL,
  `origin` varchar(512) DEFAULT NULL,
  `description` longtext,
  PRIMARY KEY (`id`),
  KEY `user_id__idx` (`user_id`)
) ENGINE=InnoDB AUTO_INCREMENT=5721 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `auth_filters`
--

DROP TABLE IF EXISTS `auth_filters`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `auth_filters` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `fil_uid` int(11) NOT NULL,
  `fil_id` int(11) DEFAULT NULL,
  `fil_value` varchar(200) NOT NULL,
  `fil_active` tinyint(1) DEFAULT '1',
  PRIMARY KEY (`id`),
  UNIQUE KEY `index1` (`fil_uid`,`fil_id`)
) ENGINE=InnoDB AUTO_INCREMENT=508 DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `auth_group`
--

DROP TABLE IF EXISTS `auth_group`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `auth_group` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `role` varchar(255) DEFAULT NULL,
  `description` longtext,
  `privilege` varchar(1) DEFAULT 'F',
  PRIMARY KEY (`id`),
  UNIQUE KEY `idx2` (`role`),
  KEY `idx1` (`privilege`)
) ENGINE=InnoDB AUTO_INCREMENT=276 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `auth_membership`
--

DROP TABLE IF EXISTS `auth_membership`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `auth_membership` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `user_id` int(11) DEFAULT NULL,
  `group_id` int(11) DEFAULT NULL,
  `primary_group` varchar(1) DEFAULT 'F',
  PRIMARY KEY (`id`),
  UNIQUE KEY `user_id` (`user_id`,`group_id`),
  KEY `user_id__idx` (`user_id`),
  KEY `group_id__idx` (`group_id`)
) ENGINE=InnoDB AUTO_INCREMENT=1057 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `auth_node`
--

DROP TABLE IF EXISTS `auth_node`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `auth_node` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `nodename` varchar(60) NOT NULL,
  `uuid` varchar(36) NOT NULL,
  `updated` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `node_id` char(36) CHARACTER SET ascii DEFAULT '',
  PRIMARY KEY (`id`),
  UNIQUE KEY `k_node_id` (`node_id`),
  KEY `idx1` (`nodename`)
) ENGINE=InnoDB AUTO_INCREMENT=3762 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `auth_permission`
--

DROP TABLE IF EXISTS `auth_permission`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `auth_permission` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `group_id` int(11) DEFAULT NULL,
  `name` varchar(512) DEFAULT NULL,
  `table_name` varchar(512) DEFAULT NULL,
  `record_id` int(11) DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `group_id__idx` (`group_id`)
) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `auth_user`
--

DROP TABLE IF EXISTS `auth_user`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `auth_user` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `first_name` varchar(128) DEFAULT NULL,
  `last_name` varchar(128) DEFAULT NULL,
  `email` varchar(512) DEFAULT NULL,
  `password` varchar(512) DEFAULT NULL,
  `registration_key` varchar(512) DEFAULT NULL,
  `reset_password_key` varchar(512) DEFAULT '',
  `email_notifications` varchar(1) DEFAULT 'T',
  `perpage` int(11) DEFAULT '20',
  `im_notifications` varchar(1) DEFAULT 'T',
  `im_type` int(11) DEFAULT NULL,
  `im_username` varchar(100) DEFAULT NULL,
  `email_log_level` enum('debug','info','warning','error','critical') DEFAULT 'warning',
  `im_log_level` enum('debug','info','warning','error','critical') DEFAULT 'warning',
  `lock_filter` varchar(1) DEFAULT 'F',
  `phone_work` varchar(16) DEFAULT NULL,
  `registration_id` varchar(512) DEFAULT '',
  `quota_app` int(11) DEFAULT NULL,
  `quota_org_group` int(11) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=107 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = '' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`localhost`*/ /*!50003 trigger user_add_evt after insert on auth_user for each row
begin
 insert ignore into auth_membership (user_id, group_id) values (new.id, (select(id) from auth_group where role="Everybody")) ;
end */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Table structure for table `b_action_errors`
--

DROP TABLE IF EXISTS `b_action_errors`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `b_action_errors` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `svc_id` char(36) CHARACTER SET ascii DEFAULT '',
  `node_id` char(36) CHARACTER SET ascii DEFAULT '',
  `err` int(11) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `i_svcname` (`svc_id`,`node_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `b_apps_old`
--

DROP TABLE IF EXISTS `b_apps_old`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `b_apps_old` (
  `id` int(11) NOT NULL DEFAULT '0',
  `app` varchar(64) DEFAULT NULL,
  `roles` text,
  `responsibles` text,
  `mailto` text,
  `app_domain` varchar(64) DEFAULT NULL,
  `app_team_ops` varchar(64) DEFAULT NULL,
  KEY `idx1` (`app`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `billing`
--

DROP TABLE IF EXISTS `billing`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `billing` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `bill_min_svc` int(11) NOT NULL,
  `bill_os_name` varchar(50) NOT NULL,
  `bill_cost` float NOT NULL,
  `bill_max_svc` int(11) NOT NULL,
  `bill_env` enum('prd','nonprd') NOT NULL DEFAULT 'prd',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=45 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `billing_agent`
--

DROP TABLE IF EXISTS `billing_agent`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `billing_agent` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `bill_min_agt` int(11) NOT NULL,
  `bill_os_name` varchar(50) NOT NULL,
  `bill_cost` float NOT NULL,
  `bill_max_agt` int(11) NOT NULL,
  `bill_env` enum('prd','nonprd') NOT NULL DEFAULT 'prd',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=63 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `charts`
--

DROP TABLE IF EXISTS `charts`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `charts` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `chart_name` varchar(100) NOT NULL,
  `chart_yaml` text,
  PRIMARY KEY (`id`),
  UNIQUE KEY `chart_name` (`chart_name`)
) ENGINE=InnoDB AUTO_INCREMENT=160 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `checks_defaults`
--

DROP TABLE IF EXISTS `checks_defaults`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `checks_defaults` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `chk_type` varchar(10) NOT NULL,
  `chk_low` int(11) NOT NULL,
  `chk_high` int(11) NOT NULL,
  `chk_inst` varchar(128) DEFAULT NULL,
  `chk_prio` int(11) DEFAULT '0',
  PRIMARY KEY (`id`),
  UNIQUE KEY `idx1` (`chk_type`,`chk_inst`)
) ENGINE=InnoDB AUTO_INCREMENT=55 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `checks_live`
--

DROP TABLE IF EXISTS `checks_live`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `checks_live` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `chk_type` varchar(10) NOT NULL,
  `chk_updated` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00',
  `chk_value` int(11) NOT NULL,
  `chk_created` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `chk_instance` varchar(180) DEFAULT NULL,
  `chk_low` int(11) DEFAULT NULL,
  `chk_high` int(11) DEFAULT NULL,
  `chk_threshold_provider` varchar(60) DEFAULT NULL,
  `chk_err` tinyint(4) AS (if(chk_value<chk_low, 1, if(chk_value>chk_high, 2, 0))) PERSISTENT,
  `node_id` char(36) CHARACTER SET ascii DEFAULT '',
  `svc_id` char(36) CHARACTER SET ascii DEFAULT '',
  PRIMARY KEY (`id`),
  UNIQUE KEY `idx1` (`node_id`,`svc_id`,`chk_type`,`chk_instance`),
  KEY `idx_purge` (`chk_type`,`chk_updated`),
  KEY `idx_purge_cluster_saves` (`chk_instance`),
  KEY `idx_chk_instance` (`chk_instance`),
  KEY `k_node_id` (`node_id`),
  KEY `k_svc_id` (`svc_id`)
) ENGINE=InnoDB AUTO_INCREMENT=292050 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `checks_settings`
--

DROP TABLE IF EXISTS `checks_settings`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `checks_settings` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `chk_type` varchar(10) NOT NULL,
  `chk_low` int(11) NOT NULL,
  `chk_high` int(11) NOT NULL,
  `chk_changed` datetime NOT NULL,
  `chk_changed_by` varchar(60) NOT NULL,
  `chk_instance` varchar(180) DEFAULT NULL,
  `node_id` char(36) CHARACTER SET ascii DEFAULT '',
  `svc_id` char(36) CHARACTER SET ascii DEFAULT '',
  PRIMARY KEY (`id`),
  UNIQUE KEY `idx1` (`node_id`,`svc_id`,`chk_type`,`chk_instance`),
  KEY `k_node_id` (`node_id`),
  KEY `k_svc_id` (`svc_id`)
) ENGINE=InnoDB AUTO_INCREMENT=14520 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `column_filters`
--

DROP TABLE IF EXISTS `column_filters`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `column_filters` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `user_id` int(11) NOT NULL,
  `col_tableid` varchar(30) DEFAULT '',
  `col_name` varchar(60) DEFAULT '',
  `col_filter` text,
  `bookmark` varchar(100) DEFAULT 'current',
  PRIMARY KEY (`id`),
  UNIQUE KEY `idx1` (`user_id`,`col_tableid`,`col_name`,`bookmark`),
  KEY `user_id` (`user_id`)
) ENGINE=InnoDB AUTO_INCREMENT=46886 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `comp_log`
--

DROP TABLE IF EXISTS `comp_log`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `comp_log` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `run_module` varchar(64) NOT NULL,
  `run_status` int(11) NOT NULL DEFAULT '1',
  `run_log` text NOT NULL,
  `run_date` datetime NOT NULL,
  `run_action` varchar(7) DEFAULT '',
  `rset_md5` varchar(32) DEFAULT NULL,
  `node_id` char(36) CHARACTER SET ascii DEFAULT '',
  `svc_id` char(36) CHARACTER SET ascii DEFAULT '',
  PRIMARY KEY (`id`),
  KEY `idx0` (`run_date`),
  KEY `idx2` (`run_action`),
  KEY `idx3` (`run_module`),
  KEY `k_node_id` (`node_id`),
  KEY `k_svc_id` (`svc_id`)
) ENGINE=InnoDB AUTO_INCREMENT=2008 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `comp_log_daily`
--

DROP TABLE IF EXISTS `comp_log_daily`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `comp_log_daily` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `run_module` varchar(64) NOT NULL,
  `run_status` int(11) NOT NULL DEFAULT '1',
  `run_date` date NOT NULL,
  `node_id` char(36) CHARACTER SET ascii DEFAULT '',
  `svc_id` char(36) CHARACTER SET ascii DEFAULT '',
  PRIMARY KEY (`id`,`run_date`),
  UNIQUE KEY `idx2` (`run_date`,`node_id`,`svc_id`,`run_module`),
  KEY `idx3` (`run_module`),
  KEY `k_node_id` (`node_id`),
  KEY `k_svc_id` (`svc_id`)
) ENGINE=InnoDB AUTO_INCREMENT=634 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `comp_mod_status`
--

DROP TABLE IF EXISTS `comp_mod_status`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `comp_mod_status` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `total` int(11) DEFAULT NULL,
  `ok` int(11) DEFAULT NULL,
  `nok` int(11) DEFAULT NULL,
  `na` int(11) DEFAULT NULL,
  `obs` int(11) DEFAULT NULL,
  `pct` int(11) DEFAULT NULL,
  `mod_name` varchar(255) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `comp_moduleset`
--

DROP TABLE IF EXISTS `comp_moduleset`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `comp_moduleset` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `modset_name` varchar(60) NOT NULL,
  `modset_author` varchar(100) DEFAULT '',
  `modset_updated` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  UNIQUE KEY `idx1` (`modset_name`)
) ENGINE=InnoDB AUTO_INCREMENT=333 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `comp_moduleset_modules`
--

DROP TABLE IF EXISTS `comp_moduleset_modules`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `comp_moduleset_modules` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `modset_id` int(11) DEFAULT NULL,
  `modset_mod_name` varchar(60) NOT NULL,
  `modset_mod_author` varchar(100) DEFAULT '',
  `modset_mod_updated` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `autofix` varchar(1) DEFAULT 'F',
  PRIMARY KEY (`id`),
  UNIQUE KEY `idx1` (`modset_mod_name`,`modset_id`),
  KEY `comp_moduleset_modules_fk1` (`modset_id`)
) ENGINE=InnoDB AUTO_INCREMENT=902 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `comp_moduleset_moduleset`
--

DROP TABLE IF EXISTS `comp_moduleset_moduleset`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `comp_moduleset_moduleset` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `parent_modset_id` int(11) NOT NULL,
  `child_modset_id` int(11) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `index_1` (`parent_modset_id`,`child_modset_id`)
) ENGINE=InnoDB AUTO_INCREMENT=60 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `comp_moduleset_ruleset`
--

DROP TABLE IF EXISTS `comp_moduleset_ruleset`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `comp_moduleset_ruleset` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `modset_id` int(11) NOT NULL,
  `ruleset_id` int(11) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `index_1` (`modset_id`,`ruleset_id`)
) ENGINE=InnoDB AUTO_INCREMENT=235 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `comp_moduleset_team_publication`
--

DROP TABLE IF EXISTS `comp_moduleset_team_publication`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `comp_moduleset_team_publication` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `modset_id` int(11) NOT NULL,
  `group_id` int(11) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `idx1` (`modset_id`),
  KEY `comp_moduleset_team_responsible_fk2` (`group_id`)
) ENGINE=InnoDB AUTO_INCREMENT=886 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `comp_moduleset_team_responsible`
--

DROP TABLE IF EXISTS `comp_moduleset_team_responsible`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `comp_moduleset_team_responsible` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `modset_id` int(11) NOT NULL,
  `group_id` int(11) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `idx1` (`modset_id`),
  KEY `comp_moduleset_team_responsible_fk2` (`group_id`)
) ENGINE=InnoDB AUTO_INCREMENT=1785 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `comp_modulesets_services`
--

DROP TABLE IF EXISTS `comp_modulesets_services`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `comp_modulesets_services` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `modset_id` int(11) NOT NULL,
  `modset_mod_author` varchar(100) DEFAULT '',
  `modset_updated` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `slave` varchar(1) DEFAULT 'F',
  `svc_id` char(36) CHARACTER SET ascii DEFAULT '',
  PRIMARY KEY (`id`),
  UNIQUE KEY `idx1` (`svc_id`,`modset_id`,`slave`),
  KEY `comp_modulesets_services_fk1` (`modset_id`),
  KEY `k_svc_id` (`svc_id`)
) ENGINE=InnoDB AUTO_INCREMENT=785 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `comp_node_moduleset`
--

DROP TABLE IF EXISTS `comp_node_moduleset`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `comp_node_moduleset` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `modset_id` int(11) NOT NULL,
  `modset_mod_author` varchar(100) DEFAULT '',
  `modset_updated` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `node_id` char(36) CHARACTER SET ascii DEFAULT '',
  PRIMARY KEY (`id`),
  UNIQUE KEY `idx1` (`modset_id`),
  KEY `comp_node_moduleset_fk1` (`modset_id`),
  KEY `k_node_id` (`node_id`)
) ENGINE=InnoDB AUTO_INCREMENT=6 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `comp_node_status`
--

DROP TABLE IF EXISTS `comp_node_status`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `comp_node_status` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `total` int(11) DEFAULT NULL,
  `ok` int(11) DEFAULT NULL,
  `nok` int(11) DEFAULT NULL,
  `na` int(11) DEFAULT NULL,
  `obs` int(11) DEFAULT NULL,
  `pct` int(11) DEFAULT NULL,
  `node_name` varchar(255) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `comp_ruleset_team_publication`
--

DROP TABLE IF EXISTS `comp_ruleset_team_publication`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `comp_ruleset_team_publication` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `ruleset_id` int(11) NOT NULL,
  `group_id` int(11) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `idx1` (`ruleset_id`),
  KEY `comp_ruleset_team_responsible_fk2` (`group_id`)
) ENGINE=InnoDB AUTO_INCREMENT=3301 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `comp_ruleset_team_responsible`
--

DROP TABLE IF EXISTS `comp_ruleset_team_responsible`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `comp_ruleset_team_responsible` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `ruleset_id` int(11) NOT NULL,
  `group_id` int(11) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `idx1` (`ruleset_id`),
  KEY `comp_ruleset_team_responsible_fk2` (`group_id`)
) ENGINE=InnoDB AUTO_INCREMENT=4308 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `comp_rulesets`
--

DROP TABLE IF EXISTS `comp_rulesets`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `comp_rulesets` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `ruleset_name` varchar(100) DEFAULT '',
  `ruleset_type` varchar(10) DEFAULT 'explicit',
  `ruleset_public` varchar(1) DEFAULT 'T',
  PRIMARY KEY (`id`),
  UNIQUE KEY `idx1` (`ruleset_name`)
) ENGINE=InnoDB AUTO_INCREMENT=953 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `comp_rulesets_chains`
--

DROP TABLE IF EXISTS `comp_rulesets_chains`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `comp_rulesets_chains` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `head_rset_id` int(11) NOT NULL,
  `tail_rset_id` int(11) NOT NULL,
  `chain_len` int(11) NOT NULL,
  `chain` text NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `index_1` (`head_rset_id`,`tail_rset_id`)
) ENGINE=InnoDB AUTO_INCREMENT=1238 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `comp_rulesets_filtersets`
--

DROP TABLE IF EXISTS `comp_rulesets_filtersets`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `comp_rulesets_filtersets` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `ruleset_id` int(11) NOT NULL,
  `fset_id` int(11) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `idx1` (`ruleset_id`),
  KEY `comp_rulesets_filtersets_fk2` (`fset_id`)
) ENGINE=InnoDB AUTO_INCREMENT=678 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `comp_rulesets_nodes`
--

DROP TABLE IF EXISTS `comp_rulesets_nodes`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `comp_rulesets_nodes` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `ruleset_id` int(11) NOT NULL,
  `node_id` char(36) CHARACTER SET ascii DEFAULT '',
  PRIMARY KEY (`id`),
  UNIQUE KEY `idx1` (`ruleset_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `comp_rulesets_rulesets`
--

DROP TABLE IF EXISTS `comp_rulesets_rulesets`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `comp_rulesets_rulesets` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `parent_rset_id` int(11) NOT NULL,
  `child_rset_id` int(11) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `comp_rulesets_rulesets_uk1` (`parent_rset_id`,`child_rset_id`),
  KEY `comp_rulesets_rulesets_fk2` (`child_rset_id`)
) ENGINE=InnoDB AUTO_INCREMENT=968 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `comp_rulesets_services`
--

DROP TABLE IF EXISTS `comp_rulesets_services`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `comp_rulesets_services` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `ruleset_id` int(11) NOT NULL,
  `slave` varchar(1) DEFAULT 'F',
  `svc_id` char(36) CHARACTER SET ascii DEFAULT '',
  PRIMARY KEY (`id`),
  KEY `k_svc_id` (`svc_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `comp_rulesets_variables`
--

DROP TABLE IF EXISTS `comp_rulesets_variables`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `comp_rulesets_variables` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `ruleset_id` int(11) NOT NULL,
  `var_name` varchar(60) NOT NULL,
  `var_value` text NOT NULL,
  `var_author` varchar(100) NOT NULL,
  `var_updated` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `var_class` varchar(60) NOT NULL DEFAULT 'raw',
  PRIMARY KEY (`id`),
  KEY `comp_rulesets_variables_fk1` (`ruleset_id`)
) ENGINE=InnoDB AUTO_INCREMENT=5528 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `comp_run_ruleset`
--

DROP TABLE IF EXISTS `comp_run_ruleset`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `comp_run_ruleset` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `rset_md5` varchar(32) NOT NULL,
  `rset` longblob NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `new_index` (`rset_md5`)
) ENGINE=InnoDB AUTO_INCREMENT=435644 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `comp_status`
--

DROP TABLE IF EXISTS `comp_status`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `comp_status` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `run_module` varchar(64) NOT NULL,
  `run_status` int(11) NOT NULL DEFAULT '1',
  `run_log` text NOT NULL,
  `run_date` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `run_action` varchar(7) DEFAULT '',
  `rset_md5` varchar(32) DEFAULT NULL,
  `node_id` char(36) CHARACTER SET ascii DEFAULT '',
  `svc_id` char(36) CHARACTER SET ascii DEFAULT '',
  PRIMARY KEY (`id`),
  UNIQUE KEY `uk_comp_status_1` (`node_id`,`svc_id`,`run_module`),
  KEY `idx3` (`run_date`),
  KEY `k_node_id` (`node_id`),
  KEY `k_svc_id` (`svc_id`)
) ENGINE=InnoDB AUTO_INCREMENT=42 DEFAULT CHARSET=utf8 ROW_FORMAT=DYNAMIC;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `comp_svc_status`
--

DROP TABLE IF EXISTS `comp_svc_status`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `comp_svc_status` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `total` int(11) DEFAULT NULL,
  `ok` int(11) DEFAULT NULL,
  `nok` int(11) DEFAULT NULL,
  `na` int(11) DEFAULT NULL,
  `obs` int(11) DEFAULT NULL,
  `pct` int(11) DEFAULT NULL,
  `svc_name` varchar(255) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `dashboard`
--

DROP TABLE IF EXISTS `dashboard`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `dashboard` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `dash_type` varchar(60) NOT NULL DEFAULT '',
  `svc_id` char(36) CHARACTER SET ascii DEFAULT '',
  `dash_severity` tinyint(4) NOT NULL,
  `dash_fmt` varchar(100) DEFAULT '',
  `dash_dict` varchar(200) DEFAULT '',
  `dash_created` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `dash_dict_md5` varchar(32) DEFAULT '',
  `dash_env` enum('PRD','PPRD','REC','INT','DEV','TST','TMP','DRP','FOR','PRA','PRJ','') DEFAULT NULL,
  `dash_updated` datetime DEFAULT NULL,
  `node_id` char(36) CHARACTER SET ascii DEFAULT '',
  `dash_md5` varchar(32) AS (md5(concat(dash_type, dash_fmt, dash_dict))) PERSISTENT,
  PRIMARY KEY (`id`),
  UNIQUE KEY `idx1` (`dash_type`,`svc_id`,`node_id`,`dash_dict_md5`),
  KEY `i_dash_type` (`dash_type`),
  KEY `k_node_id` (`node_id`),
  KEY `k_svc_id` (`svc_id`),
  KEY `k_dash_janitor` (`dash_type`,`node_id`,`svc_id`)
) ENGINE=InnoDB AUTO_INCREMENT=337254 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = '' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`opensvc`@`%`*/ /*!50003 trigger dash_add_evt after insert on dashboard for each row
begin
 insert ignore into dashboard_ref (dash_md5, dash_fmt, dash_dict, dash_type) values (new.dash_md5, new.dash_fmt, new.dash_dict, new.dash_type) ;
 insert into dashboard_events (dash_md5, node_id, svc_id, dash_begin) values (new.dash_md5, new.node_id, new.svc_id, now()) ;
end */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = '' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`opensvc`@`%`*/ /*!50003 trigger dash_del_evt before delete on dashboard for each row begin update dashboard_events set dash_end=now() where dash_md5=old.dash_md5 and node_id=old.node_id and svc_id=old.svc_id and dash_end is null ; end */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Table structure for table `dashboard_events`
--

DROP TABLE IF EXISTS `dashboard_events`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `dashboard_events` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `svc_id` char(36) CHARACTER SET ascii DEFAULT '',
  `dash_md5` varchar(32) DEFAULT NULL,
  `dash_begin` datetime NOT NULL,
  `dash_end` datetime NOT NULL,
  `node_id` char(36) CHARACTER SET ascii DEFAULT '',
  PRIMARY KEY (`id`),
  KEY `idx1` (`dash_md5`),
  KEY `idx2` (`dash_begin`,`dash_end`),
  KEY `k_node_id` (`node_id`),
  KEY `k_svc_id` (`svc_id`),
  KEY `idx3` (`node_id`,`svc_id`,`dash_md5`)
) ENGINE=InnoDB AUTO_INCREMENT=403826 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `dashboard_log`
--

DROP TABLE IF EXISTS `dashboard_log`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `dashboard_log` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `dash_type` varchar(60) NOT NULL,
  `dash_filters_md5` varchar(32) NOT NULL,
  `dash_alerts` int(11) DEFAULT NULL,
  `dash_date` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  KEY `idx1` (`dash_type`,`dash_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `dashboard_ref`
--

DROP TABLE IF EXISTS `dashboard_ref`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `dashboard_ref` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `dash_md5` varchar(32) DEFAULT NULL,
  `dash_type` varchar(60) DEFAULT NULL,
  `dash_fmt` varchar(100) DEFAULT NULL,
  `dash_dict` varchar(200) DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `idx1` (`dash_md5`)
) ENGINE=InnoDB AUTO_INCREMENT=15439249 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `digit`
--

DROP TABLE IF EXISTS `digit`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `digit` (
  `i` int(11) NOT NULL,
  PRIMARY KEY (`i`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `disk_blacklist`
--

DROP TABLE IF EXISTS `disk_blacklist`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `disk_blacklist` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `disk_id` varchar(120) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `idx1` (`disk_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `diskinfo`
--

DROP TABLE IF EXISTS `diskinfo`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `diskinfo` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `disk_id` varchar(120) DEFAULT NULL,
  `disk_devid` varchar(60) DEFAULT '',
  `disk_arrayid` varchar(100) DEFAULT NULL,
  `disk_updated` datetime DEFAULT NULL,
  `disk_raid` varchar(128) DEFAULT NULL,
  `disk_size` int(11) DEFAULT NULL,
  `disk_group` varchar(60) DEFAULT '',
  `disk_level` int(11) NOT NULL DEFAULT '0',
  `disk_controller` varchar(32) DEFAULT NULL,
  `disk_name` varchar(120) DEFAULT '',
  `disk_alloc` int(11) DEFAULT NULL,
  `disk_created` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  UNIQUE KEY `new_index` (`disk_id`,`disk_group`)
) ENGINE=InnoDB AUTO_INCREMENT=23721820 DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `drpprojects`
--

DROP TABLE IF EXISTS `drpprojects`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `drpprojects` (
  `drp_project` varchar(30) CHARACTER SET latin1 NOT NULL,
  `drp_project_id` int(11) NOT NULL AUTO_INCREMENT,
  PRIMARY KEY (`drp_project_id`),
  UNIQUE KEY `uniq_key` (`drp_project`)
) ENGINE=InnoDB AUTO_INCREMENT=19 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `drpservices`
--

DROP TABLE IF EXISTS `drpservices`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `drpservices` (
  `drp_wave` varchar(10) DEFAULT NULL,
  `drp_project_id` int(11) NOT NULL,
  `svc_id` char(36) CHARACTER SET ascii DEFAULT '',
  UNIQUE KEY `idx1` (`svc_id`,`drp_project_id`),
  KEY `drpservices_fk1` (`drp_project_id`),
  KEY `k_svc_id` (`svc_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `feed_queue`
--

DROP TABLE IF EXISTS `feed_queue`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `feed_queue` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `q_fn` varchar(60) NOT NULL,
  `q_args` longblob NOT NULL,
  `created` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `feed_queue_stats`
--

DROP TABLE IF EXISTS `feed_queue_stats`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `feed_queue_stats` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `q_start` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `q_end` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00',
  `q_fn` varchar(60) NOT NULL,
  `q_count` int(11) NOT NULL,
  `q_avg` float NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `filters`
--

DROP TABLE IF EXISTS `filters`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `filters` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `fil_name` varchar(30) NOT NULL,
  `fil_column` varchar(30) NOT NULL,
  `fil_need_value` tinyint(1) NOT NULL DEFAULT '1',
  `fil_pos` int(11) NOT NULL DEFAULT '1',
  `fil_table` varchar(30) NOT NULL,
  `fil_img` varchar(30) NOT NULL,
  `fil_search_table` varchar(30) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=118 DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `forms`
--

DROP TABLE IF EXISTS `forms`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `forms` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `form_name` varchar(100) DEFAULT NULL,
  `form_yaml` text,
  `form_author` varchar(100) DEFAULT NULL,
  `form_created` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `form_type` enum('obj','custo','folder','generic') DEFAULT 'custo',
  `form_folder` varchar(200) DEFAULT '/',
  PRIMARY KEY (`id`),
  UNIQUE KEY `idx1` (`form_name`)
) ENGINE=InnoDB AUTO_INCREMENT=78 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `forms_revisions`
--

DROP TABLE IF EXISTS `forms_revisions`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `forms_revisions` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `form_yaml` text NOT NULL,
  `form_md5` varchar(32) NOT NULL,
  `form_date` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `form_id` int(11) DEFAULT NULL,
  `form_folder` varchar(200) DEFAULT NULL,
  `form_name` varchar(100) DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `idx1` (`form_md5`)
) ENGINE=InnoDB AUTO_INCREMENT=74 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `forms_store`
--

DROP TABLE IF EXISTS `forms_store`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `forms_store` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `form_submitter` varchar(200) NOT NULL,
  `form_submit_date` datetime NOT NULL,
  `form_data` text NOT NULL,
  `form_next_id` int(11) DEFAULT NULL,
  `form_prev_id` int(11) DEFAULT NULL,
  `form_assignee` varchar(200) DEFAULT NULL,
  `form_head_id` int(11) DEFAULT NULL,
  `form_md5` varchar(32) DEFAULT NULL,
  `form_scripts` text,
  `form_var_id` int(11) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=1045 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `forms_team_publication`
--

DROP TABLE IF EXISTS `forms_team_publication`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `forms_team_publication` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `form_id` int(11) NOT NULL,
  `group_id` int(11) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `idx1` (`form_id`),
  KEY `idx2` (`group_id`),
  CONSTRAINT `forms_team_publication_fk1` FOREIGN KEY (`form_id`) REFERENCES `forms` (`id`) ON DELETE CASCADE,
  CONSTRAINT `forms_team_publication_fk2` FOREIGN KEY (`group_id`) REFERENCES `auth_group` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=210 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `forms_team_responsible`
--

DROP TABLE IF EXISTS `forms_team_responsible`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `forms_team_responsible` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `form_id` int(11) NOT NULL,
  `group_id` int(11) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `idx1` (`form_id`),
  KEY `idx2` (`group_id`),
  CONSTRAINT `comp_forms_team_responsible_fk1` FOREIGN KEY (`form_id`) REFERENCES `forms` (`id`) ON DELETE CASCADE,
  CONSTRAINT `comp_forms_team_responsible_fk2` FOREIGN KEY (`group_id`) REFERENCES `auth_group` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=211 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `fset_cache`
--

DROP TABLE IF EXISTS `fset_cache`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `fset_cache` (
  `fset_id` int(11) NOT NULL,
  `obj_type` enum('svc_id','node_id') NOT NULL,
  `obj_id` varchar(128) NOT NULL,
  KEY `fset_id` (`fset_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `gen_filters`
--

DROP TABLE IF EXISTS `gen_filters`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `gen_filters` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `f_table` varchar(30) NOT NULL,
  `f_field` varchar(30) NOT NULL,
  `f_value` varchar(256) DEFAULT NULL,
  `f_updated` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `f_author` varchar(100) NOT NULL DEFAULT '',
  `f_op` varchar(8) NOT NULL,
  `f_cksum` varchar(64) AS (md5(concat(`f_table`,`f_field`,`f_value`,`f_op`))) PERSISTENT,
  `f_label` varchar(512) AS (concat(f_table,".",f_field," ", f_op," ",f_value)) PERSISTENT,
  PRIMARY KEY (`id`),
  UNIQUE KEY `idx1` (`f_cksum`)
) ENGINE=InnoDB AUTO_INCREMENT=201 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `gen_filterset_check_threshold`
--

DROP TABLE IF EXISTS `gen_filterset_check_threshold`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `gen_filterset_check_threshold` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `fset_id` int(11) NOT NULL,
  `chk_type` varchar(10) NOT NULL,
  `chk_low` int(11) NOT NULL,
  `chk_high` int(11) NOT NULL,
  `chk_instance` varchar(60) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `idx1` (`fset_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `gen_filterset_team_responsible`
--

DROP TABLE IF EXISTS `gen_filterset_team_responsible`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `gen_filterset_team_responsible` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `fset_id` int(11) NOT NULL,
  `group_id` int(11) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `idx1` (`fset_id`),
  KEY `gen_filterset_team_responsible_fk2` (`group_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `gen_filterset_user`
--

DROP TABLE IF EXISTS `gen_filterset_user`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `gen_filterset_user` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `fset_id` int(11) NOT NULL,
  `user_id` int(11) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `idx1` (`fset_id`,`user_id`),
  KEY `gen_filterset_user_fk2` (`user_id`)
) ENGINE=InnoDB AUTO_INCREMENT=930 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `gen_filtersets`
--

DROP TABLE IF EXISTS `gen_filtersets`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `gen_filtersets` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `fset_name` varchar(100) DEFAULT '',
  `fset_updated` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `fset_author` varchar(100) NOT NULL DEFAULT '',
  `fset_stats` varchar(1) DEFAULT 'F',
  PRIMARY KEY (`id`),
  UNIQUE KEY `idx1` (`fset_name`)
) ENGINE=InnoDB AUTO_INCREMENT=243 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `gen_filtersets_filters`
--

DROP TABLE IF EXISTS `gen_filtersets_filters`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `gen_filtersets_filters` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `fset_id` int(11) NOT NULL,
  `f_id` int(11) NOT NULL,
  `f_log_op` varchar(8) NOT NULL,
  `encap_fset_id` int(11) DEFAULT NULL,
  `f_order` int(11) DEFAULT '0',
  PRIMARY KEY (`id`),
  KEY `idx_fset_id` (`fset_id`)
) ENGINE=InnoDB AUTO_INCREMENT=579 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `group_hidden_menu_entries`
--

DROP TABLE IF EXISTS `group_hidden_menu_entries`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `group_hidden_menu_entries` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `group_id` int(11) NOT NULL,
  `menu_entry` varchar(32) DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `index_1` (`group_id`,`menu_entry`)
) ENGINE=InnoDB AUTO_INCREMENT=67 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `im_types`
--

DROP TABLE IF EXISTS `im_types`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `im_types` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `im_type` varchar(64) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `lifecycle_os`
--

DROP TABLE IF EXISTS `lifecycle_os`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `lifecycle_os` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `lc_os_concat` varchar(100) NOT NULL,
  `lc_count` int(11) NOT NULL,
  `lc_date` date NOT NULL,
  `lc_os_name` varchar(60) DEFAULT NULL,
  `lc_os_vendor` varchar(60) DEFAULT NULL,
  `fset_id` int(11) DEFAULT '0',
  PRIMARY KEY (`id`),
  UNIQUE KEY `lifecycle_os_uk1` (`lc_os_concat`,`lc_date`,`fset_id`)
) ENGINE=InnoDB AUTO_INCREMENT=4766801 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `links`
--

DROP TABLE IF EXISTS `links`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `links` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `link_function` varchar(255) DEFAULT NULL,
  `link_parameters` text,
  `link_creation_user_id` int(11) DEFAULT NULL,
  `link_creation_date` datetime NOT NULL,
  `link_last_consultation_date` datetime NOT NULL,
  `link_md5` varchar(32) DEFAULT NULL,
  `link_access_counter` int(10) DEFAULT '0',
  `link_title` varchar(255) DEFAULT NULL,
  `link_title_args` varchar(255) DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `idx1` (`link_md5`)
) ENGINE=InnoDB AUTO_INCREMENT=15 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `log`
--

DROP TABLE IF EXISTS `log`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `log` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `log_action` varchar(100) NOT NULL,
  `log_user` varchar(100) NOT NULL,
  `log_fmt` varchar(200) DEFAULT NULL,
  `log_dict` text,
  `log_date` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `svc_id` char(36) CHARACTER SET ascii DEFAULT '',
  `log_gtalk_sent` tinyint(1) DEFAULT '0',
  `log_email_sent` tinyint(1) DEFAULT '0',
  `log_entry_id` varchar(32) DEFAULT NULL,
  `log_level` enum('debug','info','warning','error','critical') DEFAULT 'info',
  `node_id` char(36) CHARACTER SET ascii DEFAULT '',
  PRIMARY KEY (`id`),
  KEY `idx6` (`log_date`),
  KEY `k_node_id` (`node_id`),
  KEY `k_svc_id` (`svc_id`)
) ENGINE=InnoDB AUTO_INCREMENT=96595 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `metrics`
--

DROP TABLE IF EXISTS `metrics`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `metrics` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `metric_name` varchar(100) NOT NULL,
  `metric_sql` text,
  `metric_author` varchar(100) DEFAULT NULL,
  `metric_created` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `metric_col_value_index` int(11) DEFAULT '0',
  `metric_col_instance_index` int(11) DEFAULT NULL,
  `metric_col_instance_label` varchar(100) DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `idx1` (`metric_name`)
) ENGINE=InnoDB AUTO_INCREMENT=129 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `metrics_log`
--

DROP TABLE IF EXISTS `metrics_log`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `metrics_log` (
  `metric_id` int(11) NOT NULL,
  `instance` varchar(100) DEFAULT NULL,
  `value` float DEFAULT NULL,
  `date` datetime DEFAULT NULL,
  `fset_id` int(11) DEFAULT '0',
  `id` int(11) NOT NULL AUTO_INCREMENT,
  PRIMARY KEY (`id`),
  KEY `idx1` (`date`,`metric_id`,`fset_id`),
  KEY `idx2` (`metric_id`,`fset_id`)
) ENGINE=InnoDB AUTO_INCREMENT=6493135 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `network_segment_responsibles`
--

DROP TABLE IF EXISTS `network_segment_responsibles`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `network_segment_responsibles` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `seg_id` int(11) DEFAULT NULL,
  `group_id` int(11) DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `network_segment_responsibles_fk1` (`seg_id`),
  KEY `network_segment_responsibles_fk2` (`group_id`)
) ENGINE=InnoDB AUTO_INCREMENT=6 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `network_segments`
--

DROP TABLE IF EXISTS `network_segments`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `network_segments` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `net_id` int(11) DEFAULT NULL,
  `seg_type` enum('dynamic','static') DEFAULT 'static',
  `seg_begin` varchar(40) DEFAULT NULL,
  `seg_end` varchar(40) DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `network_segments_fk1` (`net_id`)
) ENGINE=InnoDB AUTO_INCREMENT=13 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `networks`
--

DROP TABLE IF EXISTS `networks`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `networks` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(255) DEFAULT NULL,
  `network` varchar(40) DEFAULT NULL,
  `netmask` smallint(5) unsigned DEFAULT NULL,
  `team_responsible` varchar(255) DEFAULT NULL,
  `comment` text,
  `pvid` int(11) DEFAULT NULL,
  `gateway` varchar(40) DEFAULT NULL,
  `end` varchar(16) AS (inet_ntoa(inet_aton(network)+pow(2,32-netmask)-2)) PERSISTENT,
  `broadcast` varchar(16) AS (inet_ntoa(inet_aton(network)+pow(2,32-netmask)-1)) PERSISTENT,
  `begin` varchar(16) AS (inet_ntoa(inet_aton(network)+1)) PERSISTENT,
  `updated` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `prio` int(11) NOT NULL DEFAULT '0',
  PRIMARY KEY (`id`),
  UNIQUE KEY `idx1` (`name`),
  UNIQUE KEY `idx2` (`network`,`netmask`),
  KEY `idx3` (`prio`)
) ENGINE=InnoDB AUTO_INCREMENT=2187 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `node_groups`
--

DROP TABLE IF EXISTS `node_groups`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `node_groups` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `group_name` varchar(255) NOT NULL,
  `group_id` bigint(20) DEFAULT NULL,
  `updated` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `node_id` char(36) CHARACTER SET ascii DEFAULT '',
  PRIMARY KEY (`id`),
  UNIQUE KEY `index_1` (`node_id`,`group_name`,`group_id`),
  KEY `k_node_id` (`node_id`)
) ENGINE=InnoDB AUTO_INCREMENT=16020628 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `node_hba`
--

DROP TABLE IF EXISTS `node_hba`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `node_hba` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `updated` datetime NOT NULL,
  `hba_id` varchar(60) NOT NULL,
  `hba_type` varchar(5) DEFAULT NULL,
  `node_id` char(36) CHARACTER SET ascii DEFAULT '',
  PRIMARY KEY (`id`),
  UNIQUE KEY `index_1` (`node_id`,`hba_id`),
  KEY `k_node_id` (`node_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `node_ip`
--

DROP TABLE IF EXISTS `node_ip`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `node_ip` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `mac` varchar(17) NOT NULL,
  `intf` varchar(128) DEFAULT NULL,
  `type` enum('ipv4','ipv6') DEFAULT 'ipv4',
  `addr` varchar(128) DEFAULT '',
  `mask` varchar(64) DEFAULT '',
  `updated` datetime NOT NULL,
  `flag_deprecated` varchar(1) DEFAULT 'F',
  `node_id` char(36) CHARACTER SET ascii DEFAULT '',
  PRIMARY KEY (`id`),
  KEY `idx2` (`addr`),
  KEY `k_node_id` (`node_id`)
) ENGINE=InnoDB AUTO_INCREMENT=5282270 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `node_pw`
--

DROP TABLE IF EXISTS `node_pw`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `node_pw` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `pw` blob NOT NULL,
  `updated` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `node_id` char(36) CHARACTER SET ascii DEFAULT '',
  PRIMARY KEY (`id`),
  UNIQUE KEY `k_node_id` (`node_id`)
) ENGINE=InnoDB AUTO_INCREMENT=391 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `node_tags`
--

DROP TABLE IF EXISTS `node_tags`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `node_tags` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `tag_id` int(11) NOT NULL,
  `created` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `node_id` char(36) CHARACTER SET ascii DEFAULT '',
  PRIMARY KEY (`id`),
  UNIQUE KEY `tag_bind` (`node_id`,`tag_id`),
  KEY `k_node_id` (`node_id`)
) ENGINE=InnoDB AUTO_INCREMENT=10 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `node_users`
--

DROP TABLE IF EXISTS `node_users`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `node_users` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `user_name` varchar(255) NOT NULL,
  `user_id` bigint(20) DEFAULT NULL,
  `updated` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `node_id` char(36) CHARACTER SET ascii DEFAULT '',
  PRIMARY KEY (`id`),
  UNIQUE KEY `index_1` (`node_id`,`user_name`,`user_id`),
  KEY `k_node_id` (`node_id`)
) ENGINE=InnoDB AUTO_INCREMENT=15107900 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `nodes`
--

DROP TABLE IF EXISTS `nodes`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `nodes` (
  `nodename` varchar(250) DEFAULT NULL,
  `loc_country` varchar(20) DEFAULT NULL,
  `loc_city` varchar(50) DEFAULT NULL,
  `loc_addr` varchar(100) DEFAULT NULL,
  `loc_building` varchar(50) DEFAULT NULL,
  `loc_floor` varchar(5) DEFAULT NULL,
  `loc_room` varchar(30) DEFAULT NULL,
  `loc_rack` varchar(10) DEFAULT NULL,
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `cpu_freq` varchar(10) DEFAULT NULL,
  `cpu_cores` int(11) DEFAULT NULL,
  `cpu_dies` int(11) DEFAULT NULL,
  `cpu_vendor` varchar(20) DEFAULT NULL,
  `cpu_model` varchar(50) DEFAULT NULL,
  `mem_banks` int(11) DEFAULT NULL,
  `mem_slots` int(11) DEFAULT NULL,
  `mem_bytes` int(11) DEFAULT NULL,
  `os_name` varchar(50) DEFAULT NULL,
  `os_release` varchar(64) DEFAULT NULL,
  `os_update` varchar(10) DEFAULT NULL,
  `os_segment` varchar(10) DEFAULT NULL,
  `os_arch` varchar(10) DEFAULT NULL,
  `os_vendor` varchar(20) DEFAULT NULL,
  `os_kernel` varchar(32) DEFAULT NULL,
  `loc_zip` varchar(10) DEFAULT NULL,
  `team_responsible` varchar(32) DEFAULT NULL,
  `serial` varchar(30) DEFAULT NULL,
  `model` varchar(50) DEFAULT NULL,
  `type` varchar(15) DEFAULT NULL,
  `warranty_end` datetime DEFAULT NULL,
  `status` varchar(15) DEFAULT NULL,
  `role` varchar(64) DEFAULT NULL,
  `environnement` varchar(20) DEFAULT NULL,
  `power_cabinet1` varchar(20) DEFAULT NULL,
  `power_cabinet2` varchar(20) DEFAULT NULL,
  `power_supply_nb` int(11) DEFAULT NULL,
  `power_protect` varchar(20) DEFAULT NULL,
  `power_protect_breaker` varchar(20) DEFAULT NULL,
  `power_breaker1` varchar(20) DEFAULT NULL,
  `power_breaker2` varchar(20) DEFAULT NULL,
  `blade_cabinet` varchar(20) DEFAULT NULL,
  `updated` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `team_integ` varchar(32) DEFAULT NULL,
  `app` varchar(64) DEFAULT NULL,
  `team_support` varchar(32) DEFAULT NULL,
  `host_mode` varchar(6) NOT NULL DEFAULT 'TST',
  `maintenance_end` datetime DEFAULT NULL,
  `enclosure` varchar(64) DEFAULT NULL,
  `hw_obs_warn_date` datetime DEFAULT NULL,
  `hw_obs_alert_date` datetime DEFAULT NULL,
  `os_obs_warn_date` datetime DEFAULT NULL,
  `os_obs_alert_date` datetime DEFAULT NULL,
  `fqdn` varchar(200) DEFAULT NULL,
  `listener_port` int(11) DEFAULT '1214',
  `version` varchar(20) DEFAULT NULL,
  `hvpool` varchar(64) DEFAULT NULL,
  `hv` varchar(128) DEFAULT NULL,
  `hvvdc` varchar(64) DEFAULT NULL,
  `cpu_threads` int(11) DEFAULT NULL,
  `assetname` varchar(64) DEFAULT NULL,
  `enclosureslot` varchar(8) DEFAULT NULL,
  `sec_zone` varchar(16) DEFAULT NULL,
  `last_boot` date DEFAULT NULL,
  `action_type` enum('push','pull') DEFAULT NULL,
  `os_concat` varchar(140) AS (concat_ws(' ', os_name, os_vendor, os_release, os_update)) PERSISTENT,
  `connect_to` varchar(128) DEFAULT NULL,
  `tz` varchar(6) DEFAULT '+00:00',
  `node_id` char(36) CHARACTER SET ascii DEFAULT '',
  PRIMARY KEY (`id`),
  UNIQUE KEY `k_node_id` (`node_id`),
  KEY `idx_os_name` (`os_name`),
  KEY `idx_os_release` (`os_release`),
  KEY `idx_os_vendor` (`os_vendor`),
  KEY `idx_team_responsible` (`team_responsible`),
  KEY `idx_model` (`model`),
  KEY `idx_arch` (`os_arch`),
  KEY `idx_os_concat` (`os_concat`),
  KEY `nodename_1` (`nodename`),
  KEY `idx_pivot_os_name` (`node_id`,`os_name`)
) ENGINE=InnoDB AUTO_INCREMENT=1141951 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `nodes_import`
--

DROP TABLE IF EXISTS `nodes_import`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `nodes_import` (
  `nodename` varchar(60) NOT NULL,
  `loc_country` varchar(20) NOT NULL,
  `loc_city` varchar(50) NOT NULL,
  `loc_addr` varchar(100) NOT NULL,
  `loc_building` varchar(50) NOT NULL,
  `loc_floor` varchar(5) NOT NULL,
  `loc_room` varchar(30) DEFAULT '',
  `loc_rack` varchar(10) NOT NULL,
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `cpu_freq` varchar(10) NOT NULL,
  `cpu_cores` int(11) NOT NULL,
  `cpu_dies` int(11) NOT NULL,
  `cpu_vendor` varchar(20) NOT NULL,
  `cpu_model` varchar(50) NOT NULL,
  `mem_banks` int(11) NOT NULL,
  `mem_slots` int(11) NOT NULL,
  `mem_bytes` int(11) NOT NULL,
  `os_name` varchar(50) NOT NULL,
  `os_release` varchar(64) DEFAULT NULL,
  `os_update` varchar(10) NOT NULL,
  `os_segment` varchar(10) NOT NULL,
  `os_arch` varchar(10) NOT NULL,
  `os_vendor` varchar(20) NOT NULL,
  `os_kernel` varchar(32) DEFAULT NULL,
  `loc_zip` varchar(10) NOT NULL,
  `team_responsible` varchar(32) DEFAULT NULL,
  `serial` varchar(30) NOT NULL,
  `model` varchar(50) DEFAULT NULL,
  `type` varchar(15) NOT NULL,
  `warranty_end` datetime NOT NULL,
  `status` varchar(15) NOT NULL,
  `role` varchar(20) NOT NULL,
  `environnement` varchar(20) NOT NULL,
  `power_cabinet1` varchar(20) DEFAULT NULL,
  `power_cabinet2` varchar(20) DEFAULT NULL,
  `power_supply_nb` int(11) DEFAULT NULL,
  `power_protect` varchar(20) DEFAULT NULL,
  `power_protect_breaker` varchar(20) DEFAULT NULL,
  `power_breaker1` varchar(20) DEFAULT NULL,
  `power_breaker2` varchar(20) DEFAULT NULL,
  `blade_cabinet` varchar(20) DEFAULT NULL,
  `updated` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `team_integ` varchar(32) DEFAULT NULL,
  `project` varchar(64) DEFAULT NULL,
  `team_support` varchar(32) DEFAULT NULL,
  `host_mode` varchar(6) NOT NULL DEFAULT 'TST',
  `maintenance_end` datetime DEFAULT NULL,
  `enclosure` varchar(64) DEFAULT NULL,
  `hw_obs_warn_date` datetime DEFAULT NULL,
  `hw_obs_alert_date` datetime DEFAULT NULL,
  `os_obs_warn_date` datetime DEFAULT NULL,
  `os_obs_alert_date` datetime DEFAULT NULL,
  `fqdn` varchar(200) DEFAULT NULL,
  `listener_port` int(11) DEFAULT '1214',
  `version` varchar(20) DEFAULT NULL,
  `hvpool` varchar(64) DEFAULT NULL,
  `hv` varchar(128) DEFAULT NULL,
  `hvvdc` varchar(64) DEFAULT NULL,
  `cpu_threads` int(11) DEFAULT NULL,
  `assetname` varchar(32) DEFAULT NULL,
  `enclosureslot` varchar(8) DEFAULT NULL,
  `sec_zone` varchar(16) DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `nodename_1` (`nodename`),
  KEY `idx_os_name` (`os_name`),
  KEY `idx_pivot_os_name` (`nodename`,`os_name`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `obsolescence`
--

DROP TABLE IF EXISTS `obsolescence`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `obsolescence` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `obs_type` varchar(30) NOT NULL,
  `obs_name` varchar(100) NOT NULL,
  `obs_warn_date` datetime DEFAULT NULL,
  `obs_alert_date` datetime DEFAULT NULL,
  `obs_warn_date_updated_by` varchar(100) NOT NULL,
  `obs_alert_date_updated_by` varchar(100) NOT NULL,
  `obs_warn_date_updated` datetime NOT NULL,
  `obs_alert_date_updated` datetime NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `obs_1` (`obs_type`,`obs_name`)
) ENGINE=InnoDB AUTO_INCREMENT=2000 DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `packages`
--

DROP TABLE IF EXISTS `packages`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `packages` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `pkg_name` varchar(100) NOT NULL,
  `pkg_version` varchar(64) NOT NULL,
  `pkg_arch` varchar(8) NOT NULL,
  `pkg_updated` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `pkg_type` varchar(7) DEFAULT '',
  `pkg_install_date` datetime DEFAULT NULL,
  `pkg_sig` varchar(16) DEFAULT NULL,
  `node_id` char(36) CHARACTER SET ascii DEFAULT '',
  PRIMARY KEY (`id`),
  UNIQUE KEY `idx3` (`node_id`,`pkg_name`,`pkg_arch`,`pkg_version`,`pkg_type`),
  KEY `idx2` (`pkg_version`)
) ENGINE=InnoDB AUTO_INCREMENT=106089 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `patches`
--

DROP TABLE IF EXISTS `patches`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `patches` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `patch_num` varchar(100) NOT NULL,
  `patch_rev` varchar(32) NOT NULL,
  `patch_updated` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `patch_install_date` datetime DEFAULT NULL,
  `node_id` char(36) CHARACTER SET ascii DEFAULT '',
  PRIMARY KEY (`id`),
  UNIQUE KEY `idx3` (`node_id`,`patch_num`,`patch_rev`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `pkg_sig_provider`
--

DROP TABLE IF EXISTS `pkg_sig_provider`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `pkg_sig_provider` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `sig_id` varchar(16) NOT NULL,
  `sig_provider` varchar(32) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `index_1` (`sig_id`)
) ENGINE=InnoDB AUTO_INCREMENT=57 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `prov_template_team_publication`
--

DROP TABLE IF EXISTS `prov_template_team_publication`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `prov_template_team_publication` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `tpl_id` int(11) NOT NULL,
  `group_id` int(11) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `idx1` (`tpl_id`),
  KEY `idx2` (`group_id`)
) ENGINE=InnoDB AUTO_INCREMENT=7 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `prov_template_team_responsible`
--

DROP TABLE IF EXISTS `prov_template_team_responsible`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `prov_template_team_responsible` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `tpl_id` int(11) NOT NULL,
  `group_id` int(11) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `idx1` (`tpl_id`),
  KEY `idx2` (`group_id`)
) ENGINE=InnoDB AUTO_INCREMENT=25 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `prov_templates`
--

DROP TABLE IF EXISTS `prov_templates`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `prov_templates` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `tpl_name` varchar(100) NOT NULL,
  `tpl_command` text NOT NULL,
  `tpl_comment` text NOT NULL,
  `tpl_author` varchar(100) NOT NULL,
  `tpl_created` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  UNIQUE KEY `idx1` (`tpl_name`)
) ENGINE=InnoDB AUTO_INCREMENT=17 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `replication_status`
--

DROP TABLE IF EXISTS `replication_status`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `replication_status` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `remote` varchar(192) NOT NULL,
  `mode` enum('push','pull') DEFAULT 'push',
  `table_schema` varchar(192) NOT NULL,
  `table_name` varchar(192) NOT NULL,
  `table_cksum` varchar(32) NOT NULL,
  `table_updated` datetime DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `index_1` (`remote`,`mode`,`table_schema`,`table_name`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `reports`
--

DROP TABLE IF EXISTS `reports`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `reports` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `report_name` varchar(100) NOT NULL,
  `report_yaml` text,
  PRIMARY KEY (`id`),
  UNIQUE KEY `report_name` (`report_name`)
) ENGINE=InnoDB AUTO_INCREMENT=15 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `reports_user`
--

DROP TABLE IF EXISTS `reports_user`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `reports_user` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `report_id` int(11) NOT NULL,
  `user_id` int(11) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `report_user_uk1` (`user_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `resinfo`
--

DROP TABLE IF EXISTS `resinfo`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `resinfo` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `rid` varchar(255) DEFAULT NULL,
  `res_key` varchar(40) DEFAULT NULL,
  `res_value` varchar(255) DEFAULT NULL,
  `updated` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `cluster_type` varchar(10) DEFAULT '',
  `node_id` char(36) CHARACTER SET ascii DEFAULT '',
  `svc_id` char(36) CHARACTER SET ascii DEFAULT '',
  PRIMARY KEY (`id`),
  KEY `k_node_id` (`node_id`),
  KEY `k_svc_id` (`svc_id`)
) ENGINE=InnoDB AUTO_INCREMENT=1478707 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `resinfo_log`
--

DROP TABLE IF EXISTS `resinfo_log`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `resinfo_log` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `rid` varchar(255) DEFAULT NULL,
  `res_key` varchar(40) DEFAULT NULL,
  `res_value` varchar(255) DEFAULT NULL,
  `updated` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `cluster_type` varchar(10) DEFAULT '',
  `node_id` char(36) CHARACTER SET ascii DEFAULT '',
  `svc_id` char(36) CHARACTER SET ascii DEFAULT '',
  PRIMARY KEY (`id`),
  KEY `k_node_id` (`node_id`),
  KEY `k_svc_id` (`svc_id`)
) ENGINE=InnoDB AUTO_INCREMENT=101583 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `resmon`
--

DROP TABLE IF EXISTS `resmon`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `resmon` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `rid` varchar(16) DEFAULT NULL,
  `res_status` enum('up','down','warn','n/a','undef','stdby up','stdby down') DEFAULT 'undef',
  `changed` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `updated` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00',
  `res_desc` text,
  `res_log` text,
  `vmname` varchar(60) DEFAULT '',
  `res_monitor` varchar(1) DEFAULT NULL,
  `res_disable` varchar(1) DEFAULT NULL,
  `res_optional` varchar(1) DEFAULT NULL,
  `res_type` varchar(16) DEFAULT NULL,
  `node_id` char(36) CHARACTER SET ascii DEFAULT '',
  `svc_id` char(36) CHARACTER SET ascii DEFAULT '',
  PRIMARY KEY (`id`),
  UNIQUE KEY `uk_resmon_1` (`svc_id`,`node_id`,`vmname`,`rid`),
  KEY `resmon_updated` (`updated`),
  KEY `k_node_id` (`node_id`),
  KEY `k_svc_id` (`svc_id`)
) ENGINE=InnoDB AUTO_INCREMENT=1365305 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `safe`
--

DROP TABLE IF EXISTS `safe`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `safe` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `uploader` int(11) DEFAULT NULL,
  `uploaded_from` varchar(512) DEFAULT NULL,
  `uploaded_date` datetime NOT NULL,
  `name` varchar(512) DEFAULT NULL,
  `size` int(11) DEFAULT NULL,
  `uuid` varchar(512) DEFAULT NULL,
  `md5` char(32) DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `idx1` (`uuid`(255))
) ENGINE=InnoDB AUTO_INCREMENT=36 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `safe_team_publication`
--

DROP TABLE IF EXISTS `safe_team_publication`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `safe_team_publication` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `file_id` int(11) NOT NULL,
  `group_id` int(11) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `idx3` (`file_id`,`group_id`),
  KEY `idx1` (`file_id`),
  KEY `idx2` (`group_id`)
) ENGINE=InnoDB AUTO_INCREMENT=26 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `safe_team_responsible`
--

DROP TABLE IF EXISTS `safe_team_responsible`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `safe_team_responsible` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `file_id` int(11) NOT NULL,
  `group_id` int(11) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `idx3` (`file_id`,`group_id`),
  KEY `idx1` (`file_id`),
  KEY `idx2` (`group_id`)
) ENGINE=InnoDB AUTO_INCREMENT=17 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `san_zone`
--

DROP TABLE IF EXISTS `san_zone`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `san_zone` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `cfg` varchar(128) DEFAULT '',
  `zone` varchar(128) DEFAULT '',
  `port` varchar(16) DEFAULT '',
  `updated` datetime NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `idx1` (`cfg`,`zone`,`port`)
) ENGINE=InnoDB AUTO_INCREMENT=244815787 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `san_zone_alias`
--

DROP TABLE IF EXISTS `san_zone_alias`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `san_zone_alias` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `cfg` varchar(128) DEFAULT '',
  `alias` varchar(128) DEFAULT '',
  `port` varchar(16) DEFAULT '',
  `updated` datetime NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `idx1` (`cfg`,`alias`,`port`)
) ENGINE=InnoDB AUTO_INCREMENT=65585205 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `saves`
--

DROP TABLE IF EXISTS `saves`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `saves` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `save_name` varchar(200) NOT NULL,
  `save_group` varchar(100) NOT NULL,
  `save_size` bigint(20) DEFAULT NULL,
  `save_date` datetime NOT NULL,
  `save_retention` datetime NOT NULL,
  `save_volume` varchar(64) NOT NULL,
  `save_level` varchar(8) NOT NULL,
  `save_server` varchar(60) NOT NULL,
  `save_app` varchar(64) DEFAULT NULL,
  `save_id` varchar(64) DEFAULT NULL,
  `chk_instance` varchar(100) AS (if (substring(save_name, 1, 4) = "RMAN", substring_index(save_name, '_', 1), save_name)) PERSISTENT,
  `save_resolved` varchar(1) AS (not length(node_id)=36) PERSISTENT,
  `node_id` char(36) CHARACTER SET ascii DEFAULT '',
  `svc_id` char(36) CHARACTER SET ascii DEFAULT '',
  PRIMARY KEY (`id`),
  UNIQUE KEY `idx1` (`save_server`,`save_id`,`save_volume`),
  KEY `idx_save_retention` (`save_retention`),
  KEY `idx_save_date` (`save_date`),
  KEY `idx_save_name` (`save_name`),
  KEY `k_node_id` (`node_id`),
  KEY `k_svc_id` (`svc_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `saves_last`
--

DROP TABLE IF EXISTS `saves_last`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `saves_last` (
  `id` int(11) NOT NULL DEFAULT '0',
  `save_name` varchar(200) NOT NULL,
  `save_group` varchar(100) NOT NULL,
  `save_size` bigint(20) DEFAULT NULL,
  `save_date` datetime NOT NULL,
  `save_retention` datetime NOT NULL,
  `save_volume` varchar(64) NOT NULL,
  `save_level` varchar(8) NOT NULL,
  `save_server` varchar(60) NOT NULL,
  `save_app` varchar(64) DEFAULT NULL,
  `save_id` varchar(64) DEFAULT NULL,
  `chk_instance` varchar(100) DEFAULT NULL,
  `save_resolved` varchar(1) DEFAULT NULL,
  `node_id` char(36) CHARACTER SET ascii DEFAULT '',
  `svc_id` char(36) CHARACTER SET ascii DEFAULT '',
  KEY `k_node_id` (`node_id`),
  KEY `k_svc_id` (`svc_id`),
  KEY `idx2` (`node_id`,`svc_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `scheduler_run`
--

DROP TABLE IF EXISTS `scheduler_run`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `scheduler_run` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `task_id` int(11) DEFAULT NULL,
  `start_time` datetime DEFAULT NULL,
  `stop_time` datetime DEFAULT NULL,
  `run_output` longtext,
  `run_result` longtext,
  `traceback` longtext,
  `status` varchar(512) DEFAULT NULL,
  `worker_name` varchar(512) DEFAULT NULL,
  `duration` int(11) AS (timediff(stop_time, start_time)) PERSISTENT,
  PRIMARY KEY (`id`),
  KEY `task_id__idx` (`task_id`)
) ENGINE=InnoDB AUTO_INCREMENT=814709 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `scheduler_task`
--

DROP TABLE IF EXISTS `scheduler_task`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `scheduler_task` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `uuid` varchar(255) DEFAULT NULL,
  `args` longtext,
  `vars` longtext,
  `enabled` char(1) DEFAULT NULL,
  `start_time` datetime DEFAULT NULL,
  `next_run_time` datetime DEFAULT NULL,
  `stop_time` datetime DEFAULT NULL,
  `repeats` int(11) DEFAULT NULL,
  `retry_failed` int(11) DEFAULT NULL,
  `period` int(11) DEFAULT NULL,
  `timeout` int(11) DEFAULT NULL,
  `sync_output` int(11) DEFAULT NULL,
  `times_run` int(11) DEFAULT NULL,
  `times_failed` int(11) DEFAULT NULL,
  `last_run_time` datetime DEFAULT NULL,
  `prevent_drift` char(1) DEFAULT NULL,
  `group_name` varchar(255) DEFAULT NULL,
  `function_name` varchar(255) DEFAULT NULL,
  `status` varchar(255) DEFAULT NULL,
  `task_name` varchar(255) DEFAULT NULL,
  `application_name` varchar(255) DEFAULT NULL,
  `assigned_worker_name` varchar(512) DEFAULT '',
  PRIMARY KEY (`id`),
  UNIQUE KEY `uuid` (`uuid`),
  KEY `idx_dispatch` (`assigned_worker_name`(255),`status`),
  KEY `idx_expire` (`status`,`stop_time`)
) ENGINE=InnoDB AUTO_INCREMENT=13947 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `scheduler_task_deps`
--

DROP TABLE IF EXISTS `scheduler_task_deps`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `scheduler_task_deps` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `job_name` int(11) DEFAULT NULL,
  `task_parent` int(11) DEFAULT NULL,
  `task_child` int(11) DEFAULT NULL,
  `can_visit` varchar(1) DEFAULT 'F',
  PRIMARY KEY (`id`),
  KEY `idx1` (`task_parent`),
  KEY `idx2` (`task_child`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `scheduler_worker`
--

DROP TABLE IF EXISTS `scheduler_worker`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `scheduler_worker` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `worker_name` varchar(64) DEFAULT NULL,
  `first_heartbeat` datetime DEFAULT NULL,
  `last_heartbeat` datetime DEFAULT NULL,
  `is_ticker` char(1) DEFAULT NULL,
  `group_names` longtext,
  `status` varchar(512) DEFAULT NULL,
  `worker_stats` longtext,
  PRIMARY KEY (`id`),
  UNIQUE KEY `worker_name` (`worker_name`)
) ENGINE=InnoDB AUTO_INCREMENT=25525 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `services`
--

DROP TABLE IF EXISTS `services`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `services` (
  `svc_hostid` varchar(30) CHARACTER SET latin1 DEFAULT NULL,
  `svcname` varchar(60) DEFAULT NULL,
  `svc_nodes` varchar(1000) CHARACTER SET latin1 DEFAULT NULL,
  `svc_drpnode` varchar(30) CHARACTER SET latin1 DEFAULT NULL,
  `svc_drptype` varchar(7) CHARACTER SET latin1 DEFAULT NULL,
  `svc_autostart` varchar(60) CHARACTER SET latin1 NOT NULL DEFAULT '',
  `svc_type` varchar(10) CHARACTER SET latin1 DEFAULT NULL,
  `svc_drpnodes` varchar(1000) CHARACTER SET latin1 DEFAULT NULL,
  `svc_comment` varchar(1000) CHARACTER SET latin1 DEFAULT NULL,
  `svc_app` varchar(64) DEFAULT NULL,
  `svc_drnoaction` varchar(1) CHARACTER SET latin1 DEFAULT 'F',
  `svc_created` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `svc_envdate` datetime DEFAULT NULL,
  `svc_containertype` varchar(10) CHARACTER SET latin1 DEFAULT NULL,
  `svc_metrocluster` varchar(10) CHARACTER SET latin1 DEFAULT NULL,
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `svc_wave` varchar(10) CHARACTER SET latin1 NOT NULL DEFAULT '3',
  `svc_envfile` mediumtext,
  `updated` datetime NOT NULL,
  `svc_cluster_type` varchar(20) CHARACTER SET latin1 DEFAULT 'failover',
  `svc_flex_min_nodes` int(11) DEFAULT '1',
  `svc_flex_max_nodes` int(11) DEFAULT '0',
  `svc_flex_cpu_low_threshold` int(11) DEFAULT '10',
  `svc_flex_cpu_high_threshold` int(11) DEFAULT '70',
  `svc_status` varchar(10) CHARACTER SET latin1 DEFAULT 'undef',
  `svc_availstatus` varchar(10) CHARACTER SET latin1 DEFAULT 'undef',
  `svc_ha` tinyint(1) DEFAULT '0',
  `svc_status_updated` datetime DEFAULT NULL,
  `svc_id` char(36) CHARACTER SET ascii DEFAULT '',
  PRIMARY KEY (`id`),
  UNIQUE KEY `k_svc_id` (`svc_id`),
  KEY `svc_hostid` (`svc_hostid`),
  KEY `svc_drpnode` (`svc_drpnode`),
  KEY `idx2` (`svc_cluster_type`),
  KEY `services_svc_app` (`svc_app`),
  KEY `k_svc_name` (`svcname`)
) ENGINE=InnoDB AUTO_INCREMENT=395355 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `services_log`
--

DROP TABLE IF EXISTS `services_log`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `services_log` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `svc_availstatus` varchar(10) NOT NULL,
  `svc_begin` datetime NOT NULL,
  `svc_end` datetime NOT NULL,
  `svc_id` char(36) CHARACTER SET ascii DEFAULT '',
  PRIMARY KEY (`id`),
  KEY `k_svc_id` (`svc_id`)
) ENGINE=InnoDB AUTO_INCREMENT=527054 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `stat_day`
--

DROP TABLE IF EXISTS `stat_day`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `stat_day` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `day` datetime NOT NULL,
  `nb_svc` int(11) NOT NULL DEFAULT '0',
  `nb_action` int(11) NOT NULL DEFAULT '0',
  `nb_action_err` int(11) NOT NULL DEFAULT '0',
  `nb_action_warn` int(11) NOT NULL DEFAULT '0',
  `nb_action_ok` int(11) NOT NULL DEFAULT '0',
  `disk_size` int(11) NOT NULL DEFAULT '0',
  `ram_size` int(11) DEFAULT '0',
  `nb_cpu_core` int(11) DEFAULT '0',
  `nb_cpu_die` int(11) DEFAULT '0',
  `watt` int(11) DEFAULT '0',
  `rackunit` int(11) DEFAULT '0',
  `nb_apps` int(11) NOT NULL DEFAULT '0',
  `nb_accounts` int(11) NOT NULL DEFAULT '0',
  `nb_svc_with_drp` int(11) NOT NULL DEFAULT '0',
  `nb_nodes` int(11) NOT NULL DEFAULT '0',
  `nb_svc_prd` int(11) DEFAULT '0',
  `nb_svc_cluster` int(11) DEFAULT '0',
  `nb_nodes_prd` int(11) DEFAULT '0',
  `fset_id` int(11) DEFAULT '0',
  `nb_vcpu` int(11) DEFAULT '0',
  `nb_vmem` int(11) DEFAULT '0',
  `nb_resp_accounts` int(11) DEFAULT '0',
  `nb_virt_nodes` int(11) DEFAULT '0',
  `local_disk_size` int(11) NOT NULL DEFAULT '0',
  PRIMARY KEY (`id`),
  UNIQUE KEY `stat_day_uk1` (`day`,`fset_id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `stat_day_billing`
--

DROP TABLE IF EXISTS `stat_day_billing`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `stat_day_billing` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `fset_id` int(11) NOT NULL DEFAULT '0',
  `day` datetime NOT NULL,
  `os_name` varchar(100) NOT NULL,
  `nb_svc_prd` int(11) DEFAULT '0',
  `nb_svc_nonprd` int(11) DEFAULT '0',
  `nb_agents_without_svc_prd` int(11) DEFAULT '0',
  `nb_agents_without_svc_nonprd` int(11) DEFAULT '0',
  PRIMARY KEY (`id`),
  UNIQUE KEY `new_index` (`day`,`fset_id`,`os_name`)
) ENGINE=InnoDB AUTO_INCREMENT=821 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `stat_day_disk_app`
--

DROP TABLE IF EXISTS `stat_day_disk_app`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `stat_day_disk_app` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `day` datetime NOT NULL,
  `app` varchar(100) NOT NULL,
  `disk_used` int(11) DEFAULT '0',
  `quota` int(11) DEFAULT '0',
  PRIMARY KEY (`id`),
  UNIQUE KEY `new_index` (`day`,`app`)
) ENGINE=InnoDB AUTO_INCREMENT=6988 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `stat_day_disk_app_dg`
--

DROP TABLE IF EXISTS `stat_day_disk_app_dg`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `stat_day_disk_app_dg` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `day` datetime NOT NULL,
  `dg_id` int(11) NOT NULL,
  `app` varchar(100) NOT NULL,
  `disk_used` int(11) DEFAULT '0',
  `quota` int(11) DEFAULT '0',
  PRIMARY KEY (`id`),
  UNIQUE KEY `new_index` (`day`,`app`,`dg_id`)
) ENGINE=InnoDB AUTO_INCREMENT=65464 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `stat_day_disk_array`
--

DROP TABLE IF EXISTS `stat_day_disk_array`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `stat_day_disk_array` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `day` datetime NOT NULL,
  `array_name` varchar(100) NOT NULL,
  `disk_used` int(11) DEFAULT '0',
  `disk_size` int(11) DEFAULT '0',
  `reservable` int(11) DEFAULT '0',
  `reserved` int(11) DEFAULT '0',
  PRIMARY KEY (`id`),
  UNIQUE KEY `new_index` (`day`,`array_name`)
) ENGINE=InnoDB AUTO_INCREMENT=2288 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `stat_day_disk_array_dg`
--

DROP TABLE IF EXISTS `stat_day_disk_array_dg`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `stat_day_disk_array_dg` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `day` datetime NOT NULL,
  `array_name` varchar(100) NOT NULL,
  `array_dg` varchar(100) NOT NULL,
  `disk_used` int(11) DEFAULT '0',
  `disk_size` int(11) DEFAULT '0',
  `reserved` int(11) DEFAULT '0',
  `reservable` int(11) DEFAULT '0',
  PRIMARY KEY (`id`),
  UNIQUE KEY `new_index` (`day`,`array_name`,`array_dg`)
) ENGINE=InnoDB AUTO_INCREMENT=135387 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `stat_day_svc`
--

DROP TABLE IF EXISTS `stat_day_svc`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `stat_day_svc` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `day` datetime NOT NULL,
  `nb_action` int(11) DEFAULT NULL,
  `nb_action_err` int(11) DEFAULT '0',
  `nb_action_warn` int(11) DEFAULT '0',
  `nb_action_ok` int(11) DEFAULT '0',
  `disk_size` int(11) DEFAULT '0',
  `ram_size` int(11) DEFAULT '0',
  `nb_cpu_core` int(11) DEFAULT '0',
  `nb_cpu_die` int(11) DEFAULT '0',
  `watt` int(11) DEFAULT '0',
  `rackunit` int(11) DEFAULT '0',
  `nb_nodes` int(11) DEFAULT '0',
  `local_disk_size` int(11) DEFAULT '0',
  `svc_id` char(36) CHARACTER SET ascii DEFAULT '',
  PRIMARY KEY (`id`),
  UNIQUE KEY `uk_stat_day_svc_1` (`day`,`svc_id`),
  KEY `k_svc_id` (`svc_id`)
) ENGINE=InnoDB AUTO_INCREMENT=593976 DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `stats_block`
--

DROP TABLE IF EXISTS `stats_block`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `stats_block` (
  `date` datetime NOT NULL,
  `tps` float NOT NULL,
  `rtps` float NOT NULL,
  `wtps` float NOT NULL,
  `rbps` float NOT NULL,
  `wbps` float NOT NULL,
  `node_id` char(36) CHARACTER SET ascii DEFAULT '',
  UNIQUE KEY `index_1` (`date`,`node_id`)
) ENGINE=MyISAM DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `stats_block_day`
--

DROP TABLE IF EXISTS `stats_block_day`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `stats_block_day` (
  `date` datetime NOT NULL,
  `tps` float NOT NULL,
  `rtps` float NOT NULL,
  `wtps` float NOT NULL,
  `rbps` float NOT NULL,
  `wbps` float NOT NULL,
  `node_id` char(36) CHARACTER SET ascii DEFAULT '',
  UNIQUE KEY `index_1` (`date`,`node_id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `stats_block_hour`
--

DROP TABLE IF EXISTS `stats_block_hour`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `stats_block_hour` (
  `date` datetime NOT NULL,
  `tps` float NOT NULL,
  `rtps` float NOT NULL,
  `wtps` float NOT NULL,
  `rbps` float NOT NULL,
  `wbps` float NOT NULL,
  `node_id` char(36) CHARACTER SET ascii DEFAULT '',
  UNIQUE KEY `index_1` (`date`,`node_id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `stats_blockdev`
--

DROP TABLE IF EXISTS `stats_blockdev`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `stats_blockdev` (
  `date` datetime NOT NULL,
  `dev` varchar(20) NOT NULL,
  `tps` float NOT NULL,
  `rsecps` float NOT NULL,
  `wsecps` float NOT NULL,
  `avgrq_sz` float NOT NULL,
  `avgqu_sz` float NOT NULL,
  `await` float NOT NULL,
  `svctm` float NOT NULL,
  `pct_util` float NOT NULL,
  `node_id` char(36) CHARACTER SET ascii DEFAULT '',
  UNIQUE KEY `index_1` (`date`,`dev`,`node_id`)
) ENGINE=MyISAM DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `stats_blockdev_day`
--

DROP TABLE IF EXISTS `stats_blockdev_day`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `stats_blockdev_day` (
  `date` datetime NOT NULL,
  `dev` varchar(20) NOT NULL,
  `tps` float NOT NULL,
  `rsecps` float NOT NULL,
  `wsecps` float NOT NULL,
  `avgrq_sz` float NOT NULL,
  `avgqu_sz` float NOT NULL,
  `await` float NOT NULL,
  `svctm` float NOT NULL,
  `pct_util` float NOT NULL,
  `node_id` char(36) CHARACTER SET ascii DEFAULT '',
  UNIQUE KEY `index_1` (`date`,`dev`,`node_id`)
) ENGINE=MyISAM DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `stats_blockdev_hour`
--

DROP TABLE IF EXISTS `stats_blockdev_hour`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `stats_blockdev_hour` (
  `date` datetime NOT NULL,
  `dev` varchar(20) NOT NULL,
  `tps` float NOT NULL,
  `rsecps` float NOT NULL,
  `wsecps` float NOT NULL,
  `avgrq_sz` float NOT NULL,
  `avgqu_sz` float NOT NULL,
  `await` float NOT NULL,
  `svctm` float NOT NULL,
  `pct_util` float NOT NULL,
  `node_id` char(36) CHARACTER SET ascii DEFAULT '',
  UNIQUE KEY `index_1` (`date`,`dev`,`node_id`)
) ENGINE=MyISAM DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `stats_compare`
--

DROP TABLE IF EXISTS `stats_compare`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `stats_compare` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(60) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `stats_compare_fset`
--

DROP TABLE IF EXISTS `stats_compare_fset`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `stats_compare_fset` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `compare_id` int(11) NOT NULL,
  `fset_id` int(11) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `stats_compare_fset_uk1` (`compare_id`,`fset_id`),
  KEY `stats_compare_fset_ibfk_1` (`fset_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `stats_compare_user`
--

DROP TABLE IF EXISTS `stats_compare_user`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `stats_compare_user` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `compare_id` int(11) NOT NULL,
  `user_id` int(11) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `stats_compare_user_uk1` (`compare_id`,`user_id`),
  KEY `stats_compare_user_ibfk_1` (`user_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `stats_cpu`
--

DROP TABLE IF EXISTS `stats_cpu`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `stats_cpu` (
  `date` datetime NOT NULL,
  `cpu` varchar(5) NOT NULL,
  `usr` float NOT NULL,
  `nice` float NOT NULL,
  `sys` float NOT NULL,
  `iowait` float NOT NULL,
  `steal` float DEFAULT '0',
  `irq` float DEFAULT '0',
  `soft` float DEFAULT '0',
  `guest` float DEFAULT '0',
  `gnice` float DEFAULT '0',
  `idle` float NOT NULL,
  `node_id` char(36) CHARACTER SET ascii DEFAULT '',
  UNIQUE KEY `index_1` (`date`,`cpu`,`node_id`)
) ENGINE=MyISAM DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `stats_cpu_day`
--

DROP TABLE IF EXISTS `stats_cpu_day`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `stats_cpu_day` (
  `date` datetime NOT NULL,
  `cpu` varchar(5) NOT NULL,
  `usr` float NOT NULL,
  `nice` float NOT NULL,
  `sys` float NOT NULL,
  `iowait` float NOT NULL,
  `steal` float DEFAULT '0',
  `irq` float DEFAULT '0',
  `soft` float DEFAULT '0',
  `guest` float DEFAULT '0',
  `gnice` float DEFAULT '0',
  `idle` float NOT NULL,
  `node_id` char(36) CHARACTER SET ascii DEFAULT '',
  UNIQUE KEY `index_1` (`date`,`cpu`,`node_id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `stats_cpu_hour`
--

DROP TABLE IF EXISTS `stats_cpu_hour`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `stats_cpu_hour` (
  `date` datetime NOT NULL,
  `cpu` varchar(5) NOT NULL,
  `usr` float NOT NULL,
  `nice` float NOT NULL,
  `sys` float NOT NULL,
  `iowait` float NOT NULL,
  `steal` float DEFAULT '0',
  `irq` float DEFAULT '0',
  `soft` float DEFAULT '0',
  `guest` float DEFAULT '0',
  `gnice` float DEFAULT '0',
  `idle` float NOT NULL,
  `node_id` char(36) CHARACTER SET ascii DEFAULT '',
  UNIQUE KEY `index_1` (`date`,`cpu`,`node_id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `stats_fs_u`
--

DROP TABLE IF EXISTS `stats_fs_u`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `stats_fs_u` (
  `date` datetime NOT NULL,
  `mntpt` varchar(200) NOT NULL,
  `size` bigint(20) NOT NULL,
  `used` int(11) NOT NULL,
  `node_id` char(36) CHARACTER SET ascii DEFAULT '',
  UNIQUE KEY `index_1` (`date`,`mntpt`,`node_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `stats_fs_u_day`
--

DROP TABLE IF EXISTS `stats_fs_u_day`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `stats_fs_u_day` (
  `date` datetime NOT NULL,
  `mntpt` varchar(200) NOT NULL,
  `size` bigint(20) NOT NULL,
  `used` int(11) NOT NULL,
  `node_id` char(36) CHARACTER SET ascii DEFAULT '',
  UNIQUE KEY `index_1` (`date`,`mntpt`,`node_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `stats_fs_u_diff`
--

DROP TABLE IF EXISTS `stats_fs_u_diff`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `stats_fs_u_diff` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `begin` datetime NOT NULL,
  `end` datetime NOT NULL,
  `nodename` varchar(60) NOT NULL,
  `mntpt` varchar(200) NOT NULL,
  `size` bigint(20) DEFAULT NULL,
  `used` int(11) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `stats_fs_u_hour`
--

DROP TABLE IF EXISTS `stats_fs_u_hour`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `stats_fs_u_hour` (
  `date` datetime NOT NULL,
  `mntpt` varchar(200) NOT NULL,
  `size` bigint(20) NOT NULL,
  `used` int(11) NOT NULL,
  `node_id` char(36) CHARACTER SET ascii DEFAULT '',
  UNIQUE KEY `index_1` (`date`,`mntpt`,`node_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `stats_fs_u_last`
--

DROP TABLE IF EXISTS `stats_fs_u_last`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `stats_fs_u_last` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `begin` datetime NOT NULL,
  `end` datetime NOT NULL,
  `nodename` varchar(60) NOT NULL,
  `mntpt` varchar(200) NOT NULL,
  `size` bigint(20) DEFAULT NULL,
  `used` int(11) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `index_1` (`nodename`,`mntpt`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `stats_mem_u`
--

DROP TABLE IF EXISTS `stats_mem_u`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `stats_mem_u` (
  `kbmemfree` int(11) NOT NULL,
  `kbmemused` int(11) NOT NULL,
  `pct_memused` float NOT NULL,
  `kbbuffers` int(11) NOT NULL,
  `kbcached` int(11) NOT NULL,
  `kbcommit` int(11) NOT NULL,
  `pct_commit` float NOT NULL,
  `date` datetime NOT NULL,
  `kbmemsys` int(11) NOT NULL DEFAULT '0',
  `kbactive` int(11) DEFAULT NULL,
  `kbinact` int(11) DEFAULT NULL,
  `kbdirty` int(11) DEFAULT NULL,
  `node_id` char(36) CHARACTER SET ascii DEFAULT '',
  UNIQUE KEY `index_1` (`date`,`node_id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `stats_mem_u_day`
--

DROP TABLE IF EXISTS `stats_mem_u_day`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `stats_mem_u_day` (
  `kbmemfree` int(11) NOT NULL,
  `kbmemused` int(11) NOT NULL,
  `pct_memused` float NOT NULL,
  `kbbuffers` int(11) NOT NULL,
  `kbcached` int(11) NOT NULL,
  `kbcommit` int(11) NOT NULL,
  `pct_commit` float NOT NULL,
  `date` datetime NOT NULL,
  `kbmemsys` int(11) NOT NULL DEFAULT '0',
  `kbactive` int(11) DEFAULT NULL,
  `kbinact` int(11) DEFAULT NULL,
  `kbdirty` int(11) DEFAULT NULL,
  `node_id` char(36) CHARACTER SET ascii DEFAULT '',
  UNIQUE KEY `index_1` (`date`,`node_id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `stats_mem_u_hour`
--

DROP TABLE IF EXISTS `stats_mem_u_hour`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `stats_mem_u_hour` (
  `kbmemfree` int(11) NOT NULL,
  `kbmemused` int(11) NOT NULL,
  `pct_memused` float NOT NULL,
  `kbbuffers` int(11) NOT NULL,
  `kbcached` int(11) NOT NULL,
  `kbcommit` int(11) NOT NULL,
  `pct_commit` float NOT NULL,
  `date` datetime NOT NULL,
  `kbmemsys` int(11) NOT NULL DEFAULT '0',
  `kbactive` int(11) DEFAULT NULL,
  `kbinact` int(11) DEFAULT NULL,
  `kbdirty` int(11) DEFAULT NULL,
  `node_id` char(36) CHARACTER SET ascii DEFAULT '',
  UNIQUE KEY `index_1` (`date`,`node_id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `stats_netdev`
--

DROP TABLE IF EXISTS `stats_netdev`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `stats_netdev` (
  `date` datetime NOT NULL,
  `dev` varchar(32) DEFAULT NULL,
  `rxkBps` float NOT NULL,
  `txkBps` float NOT NULL,
  `rxpckps` float NOT NULL,
  `txpckps` float NOT NULL,
  `node_id` char(36) CHARACTER SET ascii DEFAULT '',
  UNIQUE KEY `index_1` (`date`,`dev`,`node_id`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `stats_netdev_day`
--

DROP TABLE IF EXISTS `stats_netdev_day`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `stats_netdev_day` (
  `date` datetime NOT NULL,
  `dev` varchar(32) DEFAULT NULL,
  `rxkBps` float NOT NULL,
  `txkBps` float NOT NULL,
  `rxpckps` float NOT NULL,
  `txpckps` float NOT NULL,
  `node_id` char(36) CHARACTER SET ascii DEFAULT '',
  UNIQUE KEY `index_1` (`date`,`dev`,`node_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `stats_netdev_err`
--

DROP TABLE IF EXISTS `stats_netdev_err`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `stats_netdev_err` (
  `date` datetime NOT NULL,
  `rxerrps` float NOT NULL,
  `txerrps` float NOT NULL,
  `collps` float NOT NULL,
  `rxdropps` float NOT NULL,
  `txdropps` float NOT NULL,
  `dev` varchar(8) NOT NULL,
  `node_id` char(36) CHARACTER SET ascii DEFAULT '',
  UNIQUE KEY `index_1` (`date`,`dev`,`node_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 ROW_FORMAT=COMPRESSED;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `stats_netdev_err_day`
--

DROP TABLE IF EXISTS `stats_netdev_err_day`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `stats_netdev_err_day` (
  `date` datetime NOT NULL,
  `rxerrps` float NOT NULL,
  `txerrps` float NOT NULL,
  `collps` float NOT NULL,
  `rxdropps` float NOT NULL,
  `txdropps` float NOT NULL,
  `dev` varchar(8) NOT NULL,
  `node_id` char(36) CHARACTER SET ascii DEFAULT '',
  UNIQUE KEY `index_1` (`date`,`dev`,`node_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 ROW_FORMAT=COMPRESSED;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `stats_netdev_err_hour`
--

DROP TABLE IF EXISTS `stats_netdev_err_hour`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `stats_netdev_err_hour` (
  `date` datetime NOT NULL,
  `rxerrps` float NOT NULL,
  `txerrps` float NOT NULL,
  `collps` float NOT NULL,
  `rxdropps` float NOT NULL,
  `txdropps` float NOT NULL,
  `dev` varchar(8) NOT NULL,
  `node_id` char(36) CHARACTER SET ascii DEFAULT '',
  UNIQUE KEY `index_1` (`date`,`dev`,`node_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 ROW_FORMAT=COMPRESSED;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `stats_netdev_hour`
--

DROP TABLE IF EXISTS `stats_netdev_hour`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `stats_netdev_hour` (
  `date` datetime NOT NULL,
  `dev` varchar(32) DEFAULT NULL,
  `rxkBps` float NOT NULL,
  `txkBps` float NOT NULL,
  `rxpckps` float NOT NULL,
  `txpckps` float NOT NULL,
  `node_id` char(36) CHARACTER SET ascii DEFAULT '',
  UNIQUE KEY `index_1` (`date`,`dev`,`node_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `stats_proc`
--

DROP TABLE IF EXISTS `stats_proc`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `stats_proc` (
  `date` datetime NOT NULL,
  `runq_sz` int(11) NOT NULL,
  `plist_sz` int(11) NOT NULL,
  `ldavg_1` float NOT NULL,
  `ldavg_5` float NOT NULL,
  `ldavg_15` float NOT NULL,
  `node_id` char(36) CHARACTER SET ascii DEFAULT '',
  UNIQUE KEY `index_1` (`date`,`node_id`)
) ENGINE=MyISAM DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `stats_proc_day`
--

DROP TABLE IF EXISTS `stats_proc_day`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `stats_proc_day` (
  `date` datetime NOT NULL,
  `runq_sz` int(11) NOT NULL,
  `plist_sz` int(11) NOT NULL,
  `ldavg_1` float NOT NULL,
  `ldavg_5` float NOT NULL,
  `ldavg_15` float NOT NULL,
  `node_id` char(36) CHARACTER SET ascii DEFAULT '',
  UNIQUE KEY `index_1` (`date`,`node_id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `stats_proc_hour`
--

DROP TABLE IF EXISTS `stats_proc_hour`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `stats_proc_hour` (
  `date` datetime NOT NULL,
  `runq_sz` int(11) NOT NULL,
  `plist_sz` int(11) NOT NULL,
  `ldavg_1` float NOT NULL,
  `ldavg_5` float NOT NULL,
  `ldavg_15` float NOT NULL,
  `node_id` char(36) CHARACTER SET ascii DEFAULT '',
  UNIQUE KEY `index_1` (`date`,`node_id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `stats_svc`
--

DROP TABLE IF EXISTS `stats_svc`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `stats_svc` (
  `date` datetime NOT NULL,
  `swap` int(11) NOT NULL,
  `rss` int(11) NOT NULL,
  `cap` float NOT NULL,
  `at` float NOT NULL,
  `avgat` float NOT NULL,
  `pg` float NOT NULL,
  `avgpg` float NOT NULL,
  `nproc` float NOT NULL,
  `mem` float NOT NULL,
  `cpu` float NOT NULL,
  `cap_cpu` float DEFAULT '1',
  `node_id` char(36) CHARACTER SET ascii DEFAULT '',
  `svc_id` char(36) CHARACTER SET ascii DEFAULT '',
  UNIQUE KEY `uk_stats_svc_1` (`date`,`node_id`,`svc_id`),
  KEY `k_svc_id` (`svc_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `stats_svc_day`
--

DROP TABLE IF EXISTS `stats_svc_day`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `stats_svc_day` (
  `date` datetime NOT NULL,
  `swap` int(11) NOT NULL,
  `rss` int(11) NOT NULL,
  `cap` float NOT NULL,
  `at` float NOT NULL,
  `avgat` float NOT NULL,
  `pg` float NOT NULL,
  `avgpg` float NOT NULL,
  `nproc` float NOT NULL,
  `mem` float NOT NULL,
  `cpu` float NOT NULL,
  `cap_cpu` float DEFAULT '1',
  `node_id` char(36) CHARACTER SET ascii DEFAULT '',
  `svc_id` char(36) CHARACTER SET ascii DEFAULT '',
  UNIQUE KEY `uk_stats_svc_day_1` (`date`,`node_id`,`svc_id`),
  KEY `k_svc_id` (`svc_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `stats_svc_hour`
--

DROP TABLE IF EXISTS `stats_svc_hour`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `stats_svc_hour` (
  `date` datetime NOT NULL,
  `swap` int(11) NOT NULL,
  `rss` int(11) NOT NULL,
  `cap` float NOT NULL,
  `at` float NOT NULL,
  `avgat` float NOT NULL,
  `pg` float NOT NULL,
  `avgpg` float NOT NULL,
  `nproc` float NOT NULL,
  `mem` float NOT NULL,
  `cpu` float NOT NULL,
  `cap_cpu` float DEFAULT '1',
  `node_id` char(36) CHARACTER SET ascii DEFAULT '',
  `svc_id` char(36) CHARACTER SET ascii DEFAULT '',
  UNIQUE KEY `uk_stats_svc_hour_1` (`date`,`node_id`,`svc_id`),
  KEY `k_svc_id` (`svc_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `stats_swap`
--

DROP TABLE IF EXISTS `stats_swap`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `stats_swap` (
  `date` datetime NOT NULL,
  `kbswpfree` int(11) NOT NULL,
  `kbswpused` int(11) NOT NULL,
  `pct_swpused` float NOT NULL,
  `kbswpcad` int(11) NOT NULL,
  `pct_swpcad` float NOT NULL,
  `node_id` char(36) CHARACTER SET ascii DEFAULT '',
  UNIQUE KEY `index_1` (`date`,`node_id`)
) ENGINE=MyISAM DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `stats_swap_day`
--

DROP TABLE IF EXISTS `stats_swap_day`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `stats_swap_day` (
  `date` datetime NOT NULL,
  `kbswpfree` int(11) NOT NULL,
  `kbswpused` int(11) NOT NULL,
  `pct_swpused` float NOT NULL,
  `kbswpcad` int(11) NOT NULL,
  `pct_swpcad` float NOT NULL,
  `node_id` char(36) CHARACTER SET ascii DEFAULT '',
  UNIQUE KEY `index_1` (`date`,`node_id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `stats_swap_hour`
--

DROP TABLE IF EXISTS `stats_swap_hour`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `stats_swap_hour` (
  `date` datetime NOT NULL,
  `kbswpfree` int(11) NOT NULL,
  `kbswpused` int(11) NOT NULL,
  `pct_swpused` float NOT NULL,
  `kbswpcad` int(11) NOT NULL,
  `pct_swpcad` float NOT NULL,
  `node_id` char(36) CHARACTER SET ascii DEFAULT '',
  UNIQUE KEY `index_1` (`date`,`node_id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `stor_array`
--

DROP TABLE IF EXISTS `stor_array`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `stor_array` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `array_name` varchar(100) DEFAULT NULL,
  `array_model` varchar(30) NOT NULL,
  `array_cache` int(11) DEFAULT NULL,
  `array_firmware` varchar(60) DEFAULT NULL,
  `array_updated` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `array_level` int(11) NOT NULL DEFAULT '0',
  PRIMARY KEY (`id`),
  UNIQUE KEY `index_1` (`array_name`)
) ENGINE=MyISAM AUTO_INCREMENT=554 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `stor_array_dg`
--

DROP TABLE IF EXISTS `stor_array_dg`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `stor_array_dg` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `array_id` varchar(60) NOT NULL,
  `dg_name` varchar(60) NOT NULL,
  `dg_free` int(11) NOT NULL,
  `dg_updated` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `dg_size` int(11) DEFAULT NULL,
  `dg_used` int(11) DEFAULT NULL,
  `dg_reserved` int(11) DEFAULT '0',
  PRIMARY KEY (`id`),
  UNIQUE KEY `index_1` (`array_id`,`dg_name`),
  KEY `idx_array_id` (`array_id`),
  KEY `idx_dg_name` (`dg_name`)
) ENGINE=InnoDB AUTO_INCREMENT=581223 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `stor_array_dg_quota`
--

DROP TABLE IF EXISTS `stor_array_dg_quota`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `stor_array_dg_quota` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `dg_id` int(11) NOT NULL,
  `app_id` int(11) NOT NULL,
  `quota` int(11) DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `index_1` (`dg_id`,`app_id`),
  KEY `stor_array_dg_quota_ibfk_2` (`app_id`),
  KEY `key_dg_id` (`dg_id`)
) ENGINE=InnoDB AUTO_INCREMENT=13 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `stor_array_proxy`
--

DROP TABLE IF EXISTS `stor_array_proxy`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `stor_array_proxy` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `array_id` int(11) NOT NULL,
  `node_id` char(36) CHARACTER SET ascii DEFAULT '',
  PRIMARY KEY (`id`),
  UNIQUE KEY `index_1` (`node_id`,`array_id`),
  KEY `k_node_id` (`node_id`)
) ENGINE=InnoDB AUTO_INCREMENT=8238 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `stor_array_tgtid`
--

DROP TABLE IF EXISTS `stor_array_tgtid`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `stor_array_tgtid` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `array_id` varchar(60) NOT NULL,
  `array_tgtid` varchar(60) NOT NULL,
  `updated` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  UNIQUE KEY `index_1` (`array_id`,`array_tgtid`)
) ENGINE=InnoDB AUTO_INCREMENT=603224 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `stor_zone`
--

DROP TABLE IF EXISTS `stor_zone`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `stor_zone` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `tgt_id` varchar(60) NOT NULL,
  `hba_id` varchar(60) NOT NULL,
  `updated` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `node_id` char(36) CHARACTER SET ascii DEFAULT '',
  PRIMARY KEY (`id`),
  UNIQUE KEY `index_1` (`node_id`,`hba_id`,`tgt_id`),
  KEY `k_node_id` (`node_id`)
) ENGINE=InnoDB AUTO_INCREMENT=3047170 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `svc_tags`
--

DROP TABLE IF EXISTS `svc_tags`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `svc_tags` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `tag_id` int(11) NOT NULL,
  `created` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `svc_id` char(36) CHARACTER SET ascii DEFAULT '',
  PRIMARY KEY (`id`),
  UNIQUE KEY `uk_svc_tags_1` (`tag_id`,`svc_id`),
  KEY `k_svc_id` (`svc_id`)
) ENGINE=InnoDB AUTO_INCREMENT=41 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `svcactions`
--

DROP TABLE IF EXISTS `svcactions`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `svcactions` (
  `action` varchar(30) CHARACTER SET latin1 DEFAULT NULL,
  `status` enum('err','ok','warn','') DEFAULT '',
  `begin` datetime NOT NULL DEFAULT '0000-00-00 00:00:00',
  `end` datetime DEFAULT NULL,
  `hostid` varchar(30) DEFAULT NULL,
  `status_log` text CHARACTER SET latin1,
  `pid` varchar(32) DEFAULT NULL,
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `ack` tinyint(4) DEFAULT NULL,
  `alert` tinyint(1) DEFAULT NULL,
  `acked_by` varchar(50) CHARACTER SET latin1 DEFAULT NULL,
  `acked_comment` text CHARACTER SET latin1,
  `acked_date` datetime DEFAULT NULL,
  `version` varchar(20) CHARACTER SET latin1 DEFAULT NULL,
  `cron` tinyint(1) DEFAULT '0',
  `time` datetime DEFAULT '0000-00-00 00:00:00',
  `node_id` char(36) CHARACTER SET ascii DEFAULT '',
  `svc_id` char(36) CHARACTER SET ascii DEFAULT '',
  PRIMARY KEY (`id`),
  KEY `action` (`action`),
  KEY `end` (`end`),
  KEY `status` (`status`),
  KEY `k_node_id` (`node_id`),
  KEY `k_svc_id` (`svc_id`)
) ENGINE=InnoDB AUTO_INCREMENT=8715012 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `svcdisks`
--

DROP TABLE IF EXISTS `svcdisks`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `svcdisks` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `disk_id` varchar(120) DEFAULT NULL,
  `disk_size` int(11) NOT NULL DEFAULT '0',
  `disk_vendor` varchar(60) DEFAULT NULL,
  `disk_model` varchar(60) DEFAULT NULL,
  `disk_dg` varchar(60) DEFAULT NULL,
  `disk_updated` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `disk_local` varchar(1) DEFAULT 'T',
  `disk_used` int(11) NOT NULL DEFAULT '0',
  `disk_region` varchar(32) DEFAULT '0',
  `app_id` int(11) DEFAULT NULL,
  `node_id` char(36) CHARACTER SET ascii DEFAULT '',
  `svc_id` char(36) CHARACTER SET ascii DEFAULT '',
  PRIMARY KEY (`id`),
  UNIQUE KEY `uk_svcdisks_1` (`disk_id`,`svc_id`,`node_id`,`disk_dg`),
  KEY `k_node_id` (`node_id`),
  KEY `k_svc_id` (`svc_id`),
  KEY `k_svcdisks_1` (`svc_id`,`node_id`)
) ENGINE=InnoDB AUTO_INCREMENT=16622921 DEFAULT CHARSET=utf8 COMMENT='disks used by services';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `svcmon`
--

DROP TABLE IF EXISTS `svcmon`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `svcmon` (
  `mon_svctype` varchar(10) DEFAULT NULL,
  `mon_ipstatus` varchar(10) DEFAULT 'undef',
  `mon_fsstatus` varchar(10) DEFAULT 'undef',
  `mon_updated` datetime DEFAULT NULL,
  `ID` int(11) NOT NULL AUTO_INCREMENT,
  `mon_frozen` int(11) DEFAULT NULL,
  `mon_changed` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `mon_diskstatus` varchar(10) DEFAULT 'undef',
  `mon_containerstatus` varchar(10) DEFAULT 'undef',
  `mon_overallstatus` varchar(10) DEFAULT 'undef',
  `mon_syncstatus` varchar(10) DEFAULT 'undef',
  `mon_appstatus` varchar(10) DEFAULT 'undef',
  `mon_hbstatus` varchar(10) DEFAULT NULL,
  `mon_availstatus` varchar(10) DEFAULT 'undef',
  `mon_vmname` varchar(50) DEFAULT '',
  `mon_guestos` varchar(30) DEFAULT NULL,
  `mon_vmem` int(11) DEFAULT '0',
  `mon_vcpus` float DEFAULT '0',
  `mon_containerpath` varchar(512) DEFAULT NULL,
  `mon_vmtype` varchar(10) DEFAULT NULL,
  `mon_sharestatus` varchar(10) DEFAULT 'undef',
  `node_id` char(36) CHARACTER SET ascii DEFAULT '',
  `svc_id` char(36) CHARACTER SET ascii DEFAULT '',
  PRIMARY KEY (`ID`),
  UNIQUE KEY `uk_svcmon` (`node_id`,`svc_id`,`mon_vmname`),
  KEY `mon_vmname` (`mon_vmname`),
  KEY `k_node_id` (`node_id`),
  KEY `k_svc_id` (`svc_id`)
) ENGINE=InnoDB AUTO_INCREMENT=105402 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `svcmon_log`
--

DROP TABLE IF EXISTS `svcmon_log`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `svcmon_log` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `mon_overallstatus` enum('up','down','warn','n/a','undef','stdby up','stdby down') DEFAULT 'undef',
  `mon_ipstatus` enum('up','down','warn','n/a','undef','stdby up','stdby down') DEFAULT 'undef',
  `mon_fsstatus` enum('up','down','warn','n/a','undef','stdby up','stdby down') DEFAULT 'undef',
  `mon_diskstatus` enum('up','down','warn','n/a','undef','stdby up','stdby down') DEFAULT 'undef',
  `mon_containerstatus` enum('up','down','warn','n/a','undef','stdby up','stdby down') DEFAULT 'undef',
  `mon_syncstatus` enum('up','down','warn','n/a','undef','stdby up','stdby down') DEFAULT 'undef',
  `mon_appstatus` enum('up','down','warn','n/a','undef','stdby up','stdby down') DEFAULT 'undef',
  `mon_begin` datetime NOT NULL,
  `mon_end` datetime NOT NULL,
  `mon_hbstatus` enum('up','down','warn','n/a','undef','stdby up','stdby down') DEFAULT 'undef',
  `mon_availstatus` enum('up','down','warn','n/a','undef','stdby up','stdby down') DEFAULT 'undef',
  `mon_sharestatus` varchar(10) DEFAULT 'undef',
  `node_id` char(36) CHARACTER SET ascii DEFAULT '',
  `svc_id` char(36) CHARACTER SET ascii DEFAULT '',
  PRIMARY KEY (`id`),
  KEY `mon_overallstatus` (`mon_overallstatus`),
  KEY `mon_begin` (`mon_begin`,`mon_end`),
  KEY `k_node_id` (`node_id`),
  KEY `k_svc_id` (`svc_id`)
) ENGINE=InnoDB AUTO_INCREMENT=6474959 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `svcmon_log_ack`
--

DROP TABLE IF EXISTS `svcmon_log_ack`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `svcmon_log_ack` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `mon_begin` datetime NOT NULL,
  `mon_end` datetime NOT NULL,
  `mon_comment` text NOT NULL,
  `mon_acked_by` varchar(100) NOT NULL,
  `mon_acked_on` datetime NOT NULL,
  `mon_account` tinyint(1) NOT NULL DEFAULT '1',
  `svc_id` char(36) CHARACTER SET ascii DEFAULT '',
  PRIMARY KEY (`id`),
  UNIQUE KEY `uk_svcmon_log_ack` (`svc_id`,`mon_begin`,`mon_end`),
  KEY `mon_begin` (`mon_begin`),
  KEY `mon_end` (`mon_end`),
  KEY `k_svc_id` (`svc_id`)
) ENGINE=InnoDB AUTO_INCREMENT=6 DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `switches`
--

DROP TABLE IF EXISTS `switches`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `switches` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `sw_name` varchar(64) NOT NULL,
  `sw_slot` int(11) DEFAULT NULL,
  `sw_port` int(11) DEFAULT NULL,
  `sw_portspeed` int(11) DEFAULT NULL,
  `sw_portnego` varchar(1) DEFAULT '',
  `sw_porttype` varchar(16) DEFAULT '',
  `sw_portstate` varchar(16) DEFAULT '',
  `sw_portname` varchar(16) DEFAULT '',
  `sw_rportname` varchar(128) DEFAULT NULL,
  `sw_updated` datetime NOT NULL,
  `sw_fabric` varchar(128) DEFAULT NULL,
  `sw_index` int(11) DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `idx1` (`sw_name`,`sw_slot`,`sw_port`,`sw_rportname`),
  KEY `idx2` (`sw_portname`,`sw_rportname`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `sym_upload`
--

DROP TABLE IF EXISTS `sym_upload`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `sym_upload` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `archive` varchar(512) DEFAULT NULL,
  `added` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `batched` int(11) DEFAULT '0',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `sysrep_allow`
--

DROP TABLE IF EXISTS `sysrep_allow`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `sysrep_allow` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `pattern` text NOT NULL,
  `fset_id` int(11) NOT NULL,
  `group_id` int(11) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=8 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `sysrep_changing`
--

DROP TABLE IF EXISTS `sysrep_changing`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `sysrep_changing` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `pattern` text NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `sysrep_secure`
--

DROP TABLE IF EXISTS `sysrep_secure`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `sysrep_secure` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `pattern` text NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=26 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `table_modified`
--

DROP TABLE IF EXISTS `table_modified`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `table_modified` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `table_name` varchar(192) NOT NULL,
  `table_modified` datetime DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `index_1` (`table_name`)
) ENGINE=InnoDB AUTO_INCREMENT=335468 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `tags`
--

DROP TABLE IF EXISTS `tags`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `tags` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `tag_name` varchar(64) NOT NULL DEFAULT '',
  `tag_created` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `tag_exclude` varchar(128) DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `tag_name` (`tag_name`)
) ENGINE=InnoDB AUTO_INCREMENT=83 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `tmp`
--

DROP TABLE IF EXISTS `tmp`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `tmp` (
  `id` int(11) NOT NULL DEFAULT '0'
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `tmp_comp_log`
--

DROP TABLE IF EXISTS `tmp_comp_log`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `tmp_comp_log` (
  `run_date` datetime DEFAULT NULL,
  `run_nodename` varchar(64) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `tmpmd5`
--

DROP TABLE IF EXISTS `tmpmd5`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `tmpmd5` (
  `rset_md5` varchar(32) DEFAULT NULL,
  KEY `idx1` (`rset_md5`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `u_inc`
--

DROP TABLE IF EXISTS `u_inc`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `u_inc` (
  `inc` double DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `upc_dashboard`
--

DROP TABLE IF EXISTS `upc_dashboard`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `upc_dashboard` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `upc_user_id` int(11) NOT NULL,
  `upc_dashboard` varchar(100) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `index_1` (`upc_user_id`,`upc_dashboard`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `user_log`
--

DROP TABLE IF EXISTS `user_log`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `user_log` (
  `user_id` int(11) NOT NULL DEFAULT '0',
  `log_id` int(11) DEFAULT NULL,
  PRIMARY KEY (`user_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `user_prefs_columns`
--

DROP TABLE IF EXISTS `user_prefs_columns`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `user_prefs_columns` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `upc_user_id` int(11) NOT NULL,
  `upc_table` varchar(30) NOT NULL,
  `upc_field` varchar(30) NOT NULL,
  `upc_visible` tinyint(1) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `idx1` (`upc_user_id`,`upc_table`,`upc_field`),
  KEY `upc_user_id` (`upc_user_id`)
) ENGINE=InnoDB AUTO_INCREMENT=432 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Temporary table structure for view `v_action_queue`
--

DROP TABLE IF EXISTS `v_action_queue`;
/*!50001 DROP VIEW IF EXISTS `v_action_queue`*/;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
/*!50001 CREATE TABLE `v_action_queue` (
  `nodename` tinyint NOT NULL,
  `svcname` tinyint NOT NULL,
  `id` tinyint NOT NULL,
  `status` tinyint NOT NULL,
  `command` tinyint NOT NULL,
  `date_queued` tinyint NOT NULL,
  `date_dequeued` tinyint NOT NULL,
  `ret` tinyint NOT NULL,
  `stdout` tinyint NOT NULL,
  `stderr` tinyint NOT NULL,
  `action_type` tinyint NOT NULL,
  `user_id` tinyint NOT NULL,
  `form_id` tinyint NOT NULL,
  `connect_to` tinyint NOT NULL,
  `node_id` tinyint NOT NULL,
  `svc_id` tinyint NOT NULL,
  `username` tinyint NOT NULL
) ENGINE=MyISAM */;
SET character_set_client = @saved_cs_client;

--
-- Temporary table structure for view `v_apps`
--

DROP TABLE IF EXISTS `v_apps`;
/*!50001 DROP VIEW IF EXISTS `v_apps`*/;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
/*!50001 CREATE TABLE `v_apps` (
  `id` tinyint NOT NULL,
  `app` tinyint NOT NULL,
  `updated` tinyint NOT NULL,
  `app_domain` tinyint NOT NULL,
  `app_team_ops` tinyint NOT NULL,
  `description` tinyint NOT NULL,
  `responsibles` tinyint NOT NULL,
  `publications` tinyint NOT NULL
) ENGINE=MyISAM */;
SET character_set_client = @saved_cs_client;

--
-- Temporary table structure for view `v_comp_explicit_rulesets`
--

DROP TABLE IF EXISTS `v_comp_explicit_rulesets`;
/*!50001 DROP VIEW IF EXISTS `v_comp_explicit_rulesets`*/;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
/*!50001 CREATE TABLE `v_comp_explicit_rulesets` (
  `id` tinyint NOT NULL,
  `ruleset_name` tinyint NOT NULL,
  `variables` tinyint NOT NULL
) ENGINE=MyISAM */;
SET character_set_client = @saved_cs_client;
