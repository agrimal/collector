{{def sort_filters(x, y):
        return cmp(x['id'], y['id'])
  pass
}}

{{def FILTERS_ACTIVE(filters):}}
  <input type=hidden name=delfilter>
  <table>
    {{for f in sorted(filters.values(), sort_filters):}}
      {{if f['active']:}}
        {{if f.has_key('value'):
              query = ' '+f['value']
          else:
              query = ''
          pass}}
        <tr>
          <td>{{=f['name']}}{{=query}}</td>
          <td><img src='{{=URL(r=request,c='static',f='del.png')}}' border=0 title='{{=T("remove filter")}}' onClick='javascript:document.svcform.delfilter.value={{=f["id"]}};document.svcform.submit()'></td>
        </tr>
      {{pass}}
    {{pass}}
  </table>
{{pass}}

{{def FILTERS_AVAIL(filters):}}
  <table>
    <tr>
      <td>
        <select name=addfilter id=addfilter onChange="toggle_filter_value_input()">
        <option value=''>{{=T('choose')}}</option>
        {{for f in sorted(filters.values(), sort_filters):}}
          {{if not f['active']:}}
            {{if f.has_key('value'):
              title = 'need value'
            else:
              title = ''
            pass}}
            <option id="addfilter_opt{{=f['id']}}" value={{=f['id']}} title="{{=title}}">{{=T(f['name'])}}</option>
          {{pass}}
        {{pass}}
        </select>
      </td>
      <td>
        <img src='{{=URL(r=request,c='static',f='add.png')}}' border=0 title='{{=T("add filter")}}' onClick='javascript:document.svcform.submit()'>
      </td>
    </tr>
    <tr class=hidden id=tr_filtervalue>
      <td>
        <input name='filtervalue' id='filtervalue' size=14 onkeypress="checkEnter(event)">
      </td>
    </tr>
  </table>
{{pass}}
